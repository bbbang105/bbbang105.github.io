---
date: 2024-07-06
tags:
  - project
  - backend
---

---

ë“œë””ì–´ 18í•™ë²ˆ í™”ì„ì˜ ë§ˆì§€ë§‰ í•™ê¸°ê°€ ëì´ ë‚¬ë‹¤ ğŸ‘´ğŸ» 

ê·¸ë˜ë„ ë§‰í•™ê¸°ë¼ 11í•™ì  (ì „ê³µ2 + ìº¡ìŠ¤í†¤1 + ì‹¸ê°•)ì„ ë“¤ì–´ì„œ ë„ë„í•  ì¤„ ì•Œì•˜ë”ë‹ˆ..

íì‹œì¦˜ + ì°½ì—… ë™ì•„ë¦¬ + ìº¡ìŠ¤í†¤ + ë°ë³´ì…˜ì˜ + ê³¼ê¸°ì •í†µë¶€ ì •ì±… ì„œí¬í„°ì¦ˆ + ì¡°êµ + íŒŒì´ì¬ í”„ë¡œê·¸ë˜ë° TA + ìŠ¤í„°ë”” + ì¬íƒ ì•Œë°” ë“±... ìˆ˜ë§ì€ í•  ì¼ ë“¤ì´ ìŸì•„ì§€ê²Œ ë˜ì–´ì„œ ì •ë§ ì •ë§ í˜ë“¤ì—ˆë‹¤.

ì‚¬ì‹¤ ë‹¤ ë‚´ê°€ ìì´ˆí•œ ì¼ì´ê¸°ëŠ” í•œë°.. ì—°ì´ˆì— ì§€ì›í–ˆë˜ ê²ƒë“¤ì´ ìš´ ì¢‹ê²Œ ë‹¤ í•©ê²©í•˜ê²Œ ë˜ì–´ í–‰ë³µí–ˆì§€ë§Œ ì‰½ì§€ ì•Šì€ í•œ í•™ê¸°ë¥¼ ë³´ë‚´ê²Œ ë˜ì—ˆë‹¤ ğŸ’€

ê·¸ë˜ë„ ëŒ€ë¶€ë¶„ ì„±ê³µì ìœ¼ë¡œ ë§ˆë¬´ë¦¬ë¥¼ í–ˆê³ ! íŠ¹íˆ ìº¡ìŠ¤í†¤ì—ì„œëŠ” ë°°ìš´ ì ë„, ë¿Œë“¯í•œ ì ë„ ë§ì•˜ê¸°ì— ì´ë ‡ê²Œ íšŒê³ ë¡ì„ ì‘ì„±í•´ë³´ê³ ì í•œë‹¤.

(Github ë§í¬ : https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4)

---

# ğŸ¨ 1. ìº¡ìŠ¤í†¤ ë””ìì¸

ë‚˜ëŠ” ì—°ê³„ì „ê³µìœ¼ë¡œ `ìœµí•©ì†Œí”„íŠ¸ì›¨ì–´` ë¥¼ í•˜ê³  ìˆê¸°ì— í•´ë‹¹ ì „ê³µì˜ ì¡¸ì—…ì„ ìœ„í•´ì„œëŠ” ì •í™•íˆ `ìœµí•© ìº¡ìŠ¤í†¤ ë””ìì¸` ì´ë¼ëŠ” ê°•ì˜ë¥¼ ìˆ˜ê°•í•´ì•¼ í•œë‹¤.

ì¡¸ì—… ì‘í’ˆìœ¼ë¡œ ê°œë°œ í”„ë¡œì íŠ¸ë¥¼ í•˜ë‚˜ ë§Œë“ ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤!

## ê°€. íŒ€ ë¹Œë”©

ìš°ì„ ì€ ì²« ìˆ˜ì—…ë¶€í„° ë°”ë¡œ íŒ€ ë¹Œë”©ì´ ì‹œì‘ëë‹¤.

ìˆ˜ì—… ì‹œì‘ ì „ì— ì´ë¯¸ ì´ë ¥ì„œë„ ì œì¶œí–ˆì—ˆê³ , í•œ ëª…ì”© ì•ì— ë‚˜ì™€ ê°„ë‹¨íˆ ë³¸ì¸ PRì„ ì§„í–‰í–ˆë‹¤.

ë‹¤ë§Œ... ìˆ˜ì—… ìì²´ ì •ì›ì´ 13ëª… ë°–ì— ì•ˆë˜ì–´ì„œ... 4 3 3 3 ëª…ìœ¼ë¡œ ì´ 4íŒ€ë°–ì— êµ¬ì„±ì„ í•˜ì§€ ëª»í–ˆë‹¤.

ì§€ì¸ë“¤ì´ ìˆëŠ” ì‚¬ëŒë“¤ì€ ì´ë¯¸ íŒ€ ë¹Œë”©ì„ í•˜ê¸°ë„ í•´ì„œ, ë‚˜ì—ê²ŒëŠ” ë§ì€ ì„ íƒì§€ê°€ ìˆì§€ëŠ” ì•Šì•˜ë‹¤.

ê²°êµ­ ë‚˜ í¬í•¨ ë‚¨ì 2 ì—¬ì 1 ëª…ìœ¼ë¡œ íŒ€ì„ êµ¬ì„±ì„ í•˜ê²Œ ë˜ì—ˆê³ , 
ë‹¤í–‰íˆ ë‚¨ì í•œ ë¶„ê»˜ì„œ í”„ë¡ íŠ¸ì—”ë“œë„ ê°€ëŠ¥í–ˆê¸°ì—
í”„ë¡ íŠ¸ì—”ë“œ1 ë°±ì—”ë“œ1 ë”¥ëŸ¬ë‹1 ì´ë ‡ê²Œ íŒ€ ë¹Œë”©ì„ ì™„ë£Œí•˜ê²Œ ë˜ì—ˆë‹¤!

ê¸°íš & ë””ìì¸ë„ ì—†ê³  ê°œë°œ ê¸°ê°„ë„ ì§§ì€ë° 3ëª…ì´ì„œ í•˜ëŠ” ê²Œ ë§ë‚˜ ... ì‹¶ì—ˆì§€ë§Œ
í•™êµì—ì„œ í•˜ëŠ” í”„ë¡œì íŠ¸ê°€ ê·¸ë ‡ì§€ ë­ ğŸ˜Ÿ
ê·¸ë˜ë„ ì¡¸ì‘ì´ë‹ˆë§Œí¼ ì •ë§ ì—´ì‹¬íˆ í•´ë´ì•¼ê² ë‹¤ëŠ” ìƒê°ì„ í–ˆë‹¤!

ê·¸ë¦¬ê³  ë‹¤í–‰íˆ ë‹¤ë“¤ ì˜ì§€ì™€ ì—´ì •ì´ ìˆì–´ ë³´ì˜€ë‹¤.

## ë‚˜. ì£¼ì œ ì„ ì •

ì´ë²ˆì—ëŠ” ìƒˆë¡­ê²Œ ìº¡ìŠ¤í†¤ ë””ìì¸ì— ê° íŒ€ë§ˆë‹¤ ë©˜í† ë‹˜ì´ í•œ ë¶„ì”© ë¶™ì–´ì„œ ì§„í–‰ì´ ë˜ì—ˆë‹¤!

ê·¸ë˜ì„œ ì´ë¯¸ ë©˜í† ë‹˜ë“¤ê»˜ì„œ í•¨ê»˜ í•´ ë³´ê³  ì‹¶ì€ í”„ë¡œì íŠ¸ ì£¼ì œë¥¼ ì œì•ˆí•´ ì£¼ì‹  ìƒíƒœì˜€ê³ , í•™ìƒë“¤ì€ ì´ë¥¼ ë³´ê³  íŒ€ì›ë“¤ì˜ ì´ë ¥ì„œ ë° ì„ ì • ì´ìœ  ë“±ì„ ì œì¶œí•˜ì—¬ ìµœì¢…ì ìœ¼ë¡œ ë§¤ì¹­ì´ ë˜ëŠ” ë°©ì‹ì´ì—ˆë‹¤.

ë©˜í† ë‹˜ë“¤ì´ í•˜ë‚˜ ê°™ì´ ìŠ¤í™ì´ ì¢‹ìœ¼ì…”ì„œ... ì‹ ê¸°í•˜ê¸°ë„ í–ˆê³  ë§ì´ ë°°ìš¸ ìˆ˜ ìˆê² ë‹¤ë¼ëŠ” ìƒê°ì´ ë“¤ì–´ì„œ ì¢‹ì•˜ë‹¤!

ì£¼ì œë¥¼ ì„ ì •í•¨ì— ìˆì–´ì„œ `1) ìš°ë¦¬ì˜ ì—­ëŸ‰ìœ¼ë¡œ ê°œë°œì´ ê°€ëŠ¥í•œê°€` `2) ì£¼ì œê°€ ë§¤ë ¥ì ì¸ê°€` `3) í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ ì–»ì„ ì ì´ ìˆëŠ”ê°€` ë“±ì„ ê³ ë ¤í•˜ì˜€ê³ , ê·¸ ê²°ê³¼ ì¹´ì¹´ì˜¤ë±…í¬ ê¹€ë„í˜„ ë©˜í† ë‹˜ì˜ ê°€ìƒí™”í 24ì‹œê°„ ìë™ë§¤ë§¤ ì„œë¹„ìŠ¤ì— ì§€ì›í•˜ê²Œ ë˜ì—ˆë‹¤!

ë©˜í† ë‹˜ê»˜ì„œë§Œ ìœ ì¼í•˜ê²Œ PDFë¡œ ì œì•ˆì„œë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ ì²¨ë¶€í•´ì£¼ì…¨ëŠ”ë°, ì´ëŸ¬í•œ ì ì—ì„œ ë©˜í† ë‹˜ì˜ ì—´ì •ì´ í¬ê²Œ ëŠê»´ì¡Œë˜ ê²ƒ ê°™ë‹¤.
ì—„ì²­ë‚˜ê²Œ ì—´ì‹¬íˆ í•´ì•¼í•  ê²ƒ ê°™ê¸°ëŠ” í–ˆì§€ë§Œ ... ê·¸ë˜ë„ ë„ì „í•´ ë³´ê³  ì‹¶ì—ˆë‹¤!

ê·¸ë¦¬ê³  ë°±í…ŒìŠ¤íŒ…, ê°€ìƒí™”í, ìë™ë§¤ë§¤, íŠ¸ë ˆì´ë”© ë“±... ìƒì†Œí•œ ë„ë©”ì¸ì´ì—ˆì§€ë§Œ, ê·¸ë˜ì„œ ë”ìš± ì¬ë°Œì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ë„ í•œ ê²ƒ ê°™ë‹¤.

ë‹¨ìˆœ í•™ì  ì´ìˆ˜ë¥¼ ìœ„í•œ ê°œë°œì´ ì•„ë‹Œ ì‹¤ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë³´ê³  ì‹¶ì€ ë©˜í‹°, ê·¸ë¦¬ê³  ì´ê²ƒì €ê²ƒ ë¬¼ì–´ë³¼ ì¤„ ì•„ëŠ” ë©˜í‹°ë¥¼ ì¢‹ì•„í•˜ì‹ ë‹¤ê³  í•˜ì‹œê¸°ì— ë§ˆìŒì´ ë” ê°”ë˜ ê²ƒ ê°™ë‹¤ ğŸ™ƒ

ê·¸ë˜ì„œ ê¼­ í•¨ê»˜ í–ˆìœ¼ë©´ ì¢‹ê² ë‹¤ë¼ëŠ” ìƒê°ì„ í•˜ê³  ìˆì—ˆëŠ”ë°, ê°ì‚¬í•˜ê²Œë„ ë©˜í† ë‹˜ê»˜ì„œ ì¢‹ê²Œ ë´ì£¼ì…”ì„œ í”„ë¡œì íŠ¸ë¥¼ í•¨ê»˜ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤!

## ë‹¤. íŒ€ ëª…

íŒ€ì´ë¦„ì€ ì˜¬ë¹¼ë¯¸ğŸ¦‰ë¡œ ì§€ì—ˆë‹¤!

24ì‹œê°„ ìë™ë§¤ë§¤ ì„œë¹„ìŠ¤ë¼ ì•¼ê°„ì—ë„ ìš´ì˜ì´ ë˜ê³ , ê°œë°œì íŠ¹ì„±ìƒ ìƒˆë²½ ëŠ¦ê²Œê¹Œì§€ í•  ì¼ì„ í•˜ê¸°ì— ğŸ˜‚ ì˜ ë§ì„ ê²ƒ ê°™ì•„ì„œ ì´ë ‡ê²Œ ì§“ê²Œ ë˜ì—ˆë‹¤.

ê·¸ë¦¬ê³  ì¶”ê°€ì ìœ¼ë¡œ ë§¤ì£¼ ìˆ˜ìš”ì¼ë§ˆë‹¤ ìˆ˜ì—…ì´ ëë‚˜ê³  ë‚˜ì„œ ì •ê¸° íšŒì˜ë¥¼ ì§„í–‰í•˜ì˜€ê³ , ê¼­ í”„ë¡œì íŠ¸ ì–˜ê¸°ê°€ ì•„ë‹ˆë”ë¼ë„ ì‚¬ì ì¸ ì–˜ê¸°ë¼ë„ í•˜ë©° ì¹œë°€ê°ì„ ìŒ“ê¸°ë¡œ í–ˆë‹¤!

## ë¼. ë„ë©”ì¸ ê³µë¶€

í•˜ì§€ë§Œ ì‹œì‘ë¶€í„° ë§ì€ ë‚œê´€ì— ë´‰ì°©í–ˆë‹¤.
ë°±í…ŒìŠ¤íŒ…, íŠ¸ë ˆì´ë”© ë“± ì œëŒ€ë¡œ ì•„ëŠ” ê²Œ í•˜ë‚˜ë„ ì—†ì—ˆë‹¤.

ë‹¤í–‰íˆ ì²« ì˜¨ë¼ì¸ ë¯¸íŒ…ì—ì„œ ë©˜í† ë‹˜ê»˜ì„œ ë§ì´ ì„¤ëª…ë„ í•´ì£¼ì‹œê³  ìë£Œë„ ê³µìœ í•´ì£¼ì…”ì„œ ì¡°ê¸ˆ ê°ì„ ì¡ê¸°ëŠ” í–ˆì§€ë§Œ, ê·¸ë˜ë„ ì„¸ë¶€ì ìœ¼ë¡œ ê¸°íšì„ í•˜ê¸°ì—ëŠ” ì—­ë¶€ì¡±ì´ì—ˆë˜ ê²ƒ ê°™ë‹¤.

ê¸°íšìë„ ì—†ëŠ” ìƒíƒœì´ê³ , ì–´ëŠ ì •ë„ ì•Œê³  ê¸°ëŠ¥ì„ ì§œì•¼ ì‹œê°„ ë‚´ë¡œ ê°œë°œì„ ì™„ìˆ˜í•  ìˆ˜ ìˆëŠ”ì§€ ê°ì´ ì˜¬ í…ë° ê·¸ëŸ° ê²Œ í•˜ë‚˜ë„ ë˜ì§€ë¥¼ ì•Šì•˜ë‹¤.

ê·¸ë˜ì„œ ìš°ë¦¬ íŒ€ì€ ìš°ì„  ê¸°íš ë° ê°œë°œì„ í•˜ê¸° ì „ì— ë„ë©”ì¸ì— ëŒ€í•œ ê³µë¶€ë¥¼ ë¨¼ì € í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.
ìë£Œ ì¡°ì‚¬ë¥¼ ê°ì í•˜ì—¬ ë…¸ì…˜ì— ê³µìœ í•˜ì˜€ê³ , ë¹„ìŠ·í•œ ê°œë°œ ì‚¬ë¡€ê°€ ìˆë‹¤ë©´ ì°¸ê³ í•˜ì˜€ë‹¤.
ê·¸ë¦¬ê³  ì¸í”„ëŸ°ì—ì„œ ì•„ë˜ ê°•ì˜ë¥¼ êµ¬ë§¤í•˜ì—¬ ìˆ˜ê°•í•˜ë©° ë°±í…ŒìŠ¤íŒ…, ë§¤ë§¤ë²•, ì´ë™í‰ê· ì„  ë“±ì— ëŒ€í•œ ì§€ì‹ì„ ìŠµë“í–ˆë‹¤.

(ê°•ì˜ ë§í¬ : https://url.kr/r1nT6F)

ê·¸ë¦¬ê³  ë©˜í† ë‹˜ê»˜ì„œ ì´ì „ì— ì§„í–‰í–ˆë˜ í”„ë¡œì íŠ¸ë“¤ì˜ ì½”ë“œì™€, ë¸”ë¡œê·¸ì— ì •ë¦¬í•˜ì‹  ê¸€ê¹Œì§€ ëª¨ë‘ ì°¾ì•„ë³´ì•˜ë˜ ê²ƒ ê°™ë‹¤... ê·¸ì •ë„ë¡œ ì´í•´ë¥¼ í•˜ëŠ” ë° ë§ì€ ì• ë¥¼ ë¨¹ì—ˆë‹¤ ğŸ¥²

ì´ë ‡ê²Œê¹Œì§€ í•˜ë‹ˆ ê·¸ë˜ë„ ì§€í‘œ ë° ê¸°ë²•ë“¤ì— ëŒ€í•œ ì´í•´ê°€ ë˜ì–´ì„œ, ê°œë°œì„ ì§„í–‰í•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë˜ì—ˆë‹¤. 

## ë§ˆ. ë©˜í† ë‹˜ê³¼ì˜ ì²« ë§Œë‚¨

4ì›” 3ì¼ ì„¤ë ˆëŠ” ë©˜í† ë‹˜ê³¼ì˜ ì²« ë§Œë‚¨ì´ ìˆì—ˆë‹¤!

ì´ì „ì— ì˜¨ë¼ì¸ ë¯¸íŒ…ì„ í•œ ë²ˆ í•˜ê¸°ëŠ” í–ˆì§€ë§Œ ì´ëŠ” ë”°ë¡œ ìš”ì²­ì„ í•´ì„œ í–ˆë˜ ê²ƒì´ì—ˆê³ , ê³µì‹ì ì¸ ë©˜í† ë§ì€ ì´ ë‚ ì´ ì²˜ìŒì´ì—ˆë‹¤.

ì´ë ‡ê²Œ í˜„ì—…ìì™€ ë©˜í† ë§ì„ í†µí•´ ì‹¤ì œ í”„ë¡œì íŠ¸ë¥¼ í•¨ê»˜ í•˜ëŠ” ê²ƒì€ ì²˜ìŒì´ì—ˆê¸° ë•Œë¬¸ì— ê¸´ì¥ë„ ë§ì´ ë˜ì—ˆê³ , ì–´ëŠ ê³³ì—ì„œ ì–´ëŠ ì‹ë‹¹ì„ ê°€ì•¼í• ê¹Œ.. ë¶€í„° ê±±ì •ì´ ë˜ì—ˆë‹¤ ğŸ˜‚

ë‹¤í–‰íˆ íŒ€ì› ë‚˜ì€ë‹˜ì´ ë§›ì§‘ì„ ì˜ ì•„ì…”ì„œ! ë™ì—­ì‚¬ì— ìˆëŠ” projec D ë¼ëŠ” ë§›ìˆëŠ” í”¼ìê°€ ìˆëŠ” íìœ¼ë¡œ ê°€ê²Œ ë˜ì—ˆë‹¤.

![](https://velog.velcdn.com/images/hsh111366/post/781bd19a-2ff4-431f-9de1-437360bbadc4/image.jpeg)|![](https://velog.velcdn.com/images/hsh111366/post/17bdd28f-7c49-483e-94d9-1efcd34dfc55/image.jpeg)
---|---

ìš”ë˜ ë§›ìˆëŠ” í”¼ìë„ ë¨¹ê³  ğŸ• ë©˜í† ë‹˜ì´ë‘ ìƒê°ë³´ë‹¤ ì–´ìƒ‰í•˜ì§€ ì•Šê²Œ ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ëƒˆë‹¤! 
ë§Œë‚˜ìë§ˆì í”„ë¡œì íŠ¸ ì–˜ê¸°ë¥¼ í•˜ì§€ëŠ” ì•Šì•˜ê³ , ë§¥ì£¼ë„ í•œ ì” ë§ˆì‹œë©´ì„œ ì•Œì•„ê°€ëŠ” ì‹œê°„ë„ ê°€ì§€ê³  ì–´ìƒ‰í•¨ì„ í’€ì—ˆë‹¤ ã…ã…

ê·¸ë¦¬ê³  ë°±ì—”ë“œì™€ ê´€ë ¨í•´ì„œ ê¶ê¸ˆí•œ ì´ì•¼ê¸°ë‚˜, ì·¨ì—…ì— ëŒ€í•œ ì´ì•¼ê¸°ë„ ë‚˜ëˆŒ ìˆ˜ ìˆì—ˆëŠ”ë° ì¬ë¯¸ìˆì—ˆê³  ìœ ìµí•œ ì‹œê°„ì´ì—ˆë‹¤!

ê·¸ë¦¬ê³  ë‚˜ì„œ ìŠ¤íƒ€ë²…ìŠ¤ë¡œ ì´ë™í•´ ë³¸ê²©ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì´ì•¼ê¸°ë¥¼ ì‹œì‘í–ˆë‹¤.

ìš°ë¦¬ê°€ ìƒê°í–ˆë˜ í”„ë¡œì íŠ¸ì˜ ë°©í–¥ê³¼ ê°œë°œ ë°©ì‹ì— ëŒ€í•´ ê³µìœ ë¥¼ í–ˆê³ , ë©˜í† ë‹˜ê»˜ì„œëŠ” ì´ì— ëŒ€í•´ í˜„ì‹¤ì ì¸ í”¼ë“œë°±ì„ í•´ì£¼ì…¨ë‹¤. ê·¸ë¦¬ê³  ë„ë©”ì¸ì— ê´€ë ¨í•´ì„œ ì˜ë¬¸ì ì´ ìˆë˜ ë¶€ë¶„ë“¤ë„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.

í™•ì‹¤íˆ ë§Œë‚˜ì„œ í”¼ë“œë°±ì„ ë“¤ìœ¼ë‹ˆ ì–´ë–¤ ë¶€ë¶„ì— ì§‘ì¤‘í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•´ì•¼í•  ì§€ ê°ì„ ì¡ê²Œ ë˜ì—ˆë‹¤!

ê±±ì •í–ˆë˜ ê²ƒë³´ë‹¤ í›¨ì”¬ ê´œì°®ì€ ë¶„ìœ„ê¸°ì˜€ê³ , ë©˜í† ë‹˜ê»˜ì„œ ì¢‹ìœ¼ì‹  ë¶„ì´ë¼ëŠ” ê²Œ ëŠê»´ì ¸ ì¢‹ì•˜ë‹¤ ğŸ‘ğŸ»

![](https://velog.velcdn.com/images/hsh111366/post/b11a238c-741b-4b95-a5b1-95ef03b7d290/image.png)

ê·¸ë¦¬ê³  ë°”ë¡œ ë‹¤ìŒ ë‚ ì— ì´ëŸ° ì‹ìœ¼ë¡œ ë©˜í† ë‹˜ê»˜ì„œ ê° íŒŒíŠ¸ë³„ë¡œ ê³¼ì œë¥¼ ë‚´ ì£¼ì…¨ë‹¤! 
ë°±ì—”ë“œê°€ í™•ì‹¤íˆ ë§ê¸°ëŠ” í–ˆëŠ”ë°... ê·¸ë˜ë„ ë‹¤ì‹œ í•œ ë²ˆ ë°©í–¥ì„±ì„ ì¡ì•„ ì£¼ì…”ì„œ ë„ˆë¬´ ì¢‹ì•˜ë˜ ê²ƒ ê°™ë‹¤!

ë©˜í† ë‹˜ ì…ì¥ì—ì„œ ì´ë ‡ê²Œê¹Œì§€ í•´ì£¼ì…”ì„œ ì–»ëŠ” ê²Œ ë¬´ì—‡ì´ ìˆì„ê¹Œ..? ë¼ëŠ” ìƒê°ì´ ë“¤ ì •ë„ë¡œ, í”„ë¡œì íŠ¸ì— ë§ì€ ì‹ ê²½ì„ ì¨ì£¼ì…¨ê³  ì—´ì •ì„ ë³´ì—¬ì£¼ì…”ì„œ ê°ì‚¬í–ˆë‹¤ ğŸ™ğŸ»

---

# ğŸ¦‰ 2. ì„œë¹„ìŠ¤ ì†Œê°œ

ì—¬ê¸°ì„œë¶€í„°ëŠ” ìš°ë¦¬ê°€ ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ë§Œë“  ì„œë¹„ìŠ¤ì— ëŒ€í•´ ì†Œê°œí•´ë³´ê³ ì í•œë‹¤.

>**í”„ë¡œì íŠ¸ëª…** : `ê°€ìƒí™”í ê°€ê²© ì˜ˆì¸¡ AI ê¸°ìˆ ì„ ì ‘ëª©í•œ ë°±í…ŒìŠ¤íŒ… & ìë™ë§¤ë§¤ ì„œë¹„ìŠ¤ - "BAMOWL"`

## ê°€. ê°œë°œ ë™ê¸° ë° ëª©í‘œ
<img width="1540" alt="image" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/8602d445-7b93-4595-b1f1-6e34a027864f">

### 1) ê°œë°œ ë™ê¸°
- ê°€ìƒí™”í ì‹œì¥ì€ ì „í†µì ì¸ ì£¼ì‹ ì‹œì¥ê³¼ëŠ” ë‹¤ë¥´ê²Œ ë§¤ìš° ë†’ì€ ë³€ë™ì„±ê³¼ 24ì‹œê°„ ìš´ì˜ì´ë¼ëŠ” íŠ¹ì„±ì„ ê°€ì§€ê³  ìˆì–´, ê°œì¸ íˆ¬ììë“¤ì´ íš¨ê³¼ì ì¸ íˆ¬ì ì „ëµì„ ì„¸ìš°ê³  ì´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê²€ì¦í•˜ë©° ì¡°ì •í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ í•„ìˆ˜ì ì„.
- ë”°ë¼ì„œ, ê°œì¸ì´ ìì‹ ì˜ íˆ¬ì ì „ëµì„ ì²´ê³„ì ìœ¼ë¡œ ê²€ì¦í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì´ ë§¤ìš° ì¤‘ìš”í•¨.
- ìµœê·¼ ë”¥ëŸ¬ë‹ ê¸°ìˆ ì˜ ë°œì „ì€ ê°€ìƒí™”í ì‹œì¥ ë°ì´í„°ë¥¼ ë³´ë‹¤ ì •í™•í•˜ê²Œ ì˜ˆì¸¡í•˜ëŠ” ë° í™œìš©ë˜ê³  ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ë³´ë‹¤ íš¨ìœ¨ì ì¸ ê±°ë˜ê°€ ê°€ëŠ¥í•´ì§.
- ê·¸ëŸ¬ë‚˜ ê°€ìƒí™”í ì‹œì¥ì˜ ë†’ì€ ë³€ë™ì„±ê³¼ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥ì„±ìœ¼ë¡œ ì¸í•´ ê¸°ì¡´ ì˜ˆì¸¡ ëª¨ë¸ì˜ ì ìš©ì´ ì–´ë µê³ , ë”¥ëŸ¬ë‹ì„ í™œìš©í•œ ì½”ì¸ ê°€ê²© ì˜ˆì¸¡ê³¼ ë°±í…ŒìŠ¤íŒ…ì˜ ê²°í•©ì„ í†µí•œ ì „ëµ ê²€ì¦ ì‚¬ë¡€ëŠ” ë“œë¬¸ ìƒí™©ì„.
- ë§ì€ íˆ¬ììë“¤ì´ ê°€ìƒí™”í ì‹œì¥ì˜ ë³µì¡í•œ ê¸°ìˆ ì  ìš”ì†Œë“¤ì„ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œí•˜ë©°, ì´ë¡œ ì¸í•´ íš¨ê³¼ì ì¸ íˆ¬ìë¥¼ ìœ„í•œ ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ UIì™€ ë„êµ¬ê°€ í•„ìš”í•¨.

### 2) ê°œë°œ ëª©í‘œ
- ìë™í™”ëœ ê±°ë˜ ì‹œìŠ¤í…œê³¼ ë°±í…ŒìŠ¤íŒ…ì„ ê²°í•©í•œ í”Œë«í¼ì˜ ê°œë°œ.
- íˆ¬ììë“¤ì€ ê³¼ê±°ì˜ ë°ì´í„°ë¥¼ í†µí•´ ì „ëµì„ ê²€ì¦í•˜ê³ , ë”¥ëŸ¬ë‹ ì˜ˆì¸¡ ëª¨ë¸ì„ í†µí•´ ë¯¸ë˜ì˜ ì‹œì¥ ë³€ë™ì„ íŒŒì•…í•  ìˆ˜ ìˆìŒ.
- ì´ëŸ¬í•œ ê¸°ìˆ ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ, íˆ¬ì ì „ëµì„ ìë™ ì¡°ì •í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•¨ìœ¼ë¡œì¨ ì„±ê³µì ì¸ íˆ¬ìë¥¼ ì´ëŒì–´ ëƒ„.

## ë‚˜. í•„ìš”ì„±

<img width="1526" alt="image" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/a2dc9bda-b951-47f7-9c57-fcb3cb38d5f6">

## ë‹¤. ê¸°ì¡´ ì„œë¹„ìŠ¤ì™€ì˜ ì°¨ë³„ì 

<img width="1535" alt="image" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/84e8a104-cda5-499f-9108-b5be19605c04">

## ë¼. ì„œë¹„ìŠ¤ ë©”ì¸ í”„ë¡œì„¸ìŠ¤

<img width="1239" alt="image" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/3604000e-15ca-4bdb-8ff7-46a99155698b">

### ğŸ’¡ ë°±í…ŒìŠ¤íŒ…? 

ìš°ì„ ì€ `ë°±í…ŒìŠ¤íŒ…` ì´ë¼ëŠ” ìš©ì–´ ìì²´ê°€ ìƒì†Œí•œ ì‚¬ëŒë“¤ì´ ë§ì„ ê²ƒ ê°™ë‹¤.
ë‚˜ ë˜í•œ ê·¸ë¬ìœ¼ë‹ˆ ë§ì´ë‹¤.

ë°±í…ŒìŠ¤íŒ…ì€ **ê³¼ê±°ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ê±°ë˜ ì „ëµì´ë‚˜ íˆ¬ì ëª¨ë¸ì˜ ì„±ê³¼ë¥¼ í‰ê°€í•˜ëŠ” ê³¼ì •**ì„ ë§í•œë‹¤. ì¦‰, ìš°ë¦¬ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì—…ë¹„íŠ¸ì—ì„œ ê³¼ê±° ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ë°±í…ŒìŠ¤íŒ…ì„ ì§„í–‰í•˜ì˜€ë‹¤.

ë°±í…ŒìŠ¤íŒ…ì„ í†µí•´ ì „ëµì´ë‚˜ ëª¨ë¸ì´ ì‹¤ì œ ì‹œì¥ ìƒí™©ì—ì„œ ì–´ë–»ê²Œ ì‘ë™í• ì§€ë¥¼ ì˜ˆì¸¡í•  ìˆ˜ê°€ ìˆê³ , ì‚¬ìš©ìëŠ” ì´ëŸ¬í•œ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒë‹¨í•˜ì—¬ ìë™ë§¤ë§¤ë¥¼ ì§„í–‰í•  ê²ƒì¸ì§€ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê²Œ ëœë‹¤.

ì„œë¹„ìŠ¤ì˜ í•µì‹¬ ë¡œì§ì€ ì•„ë˜ì™€ ê°™ë‹¤.

1ï¸âƒ£ ì‚¬ìš©ìëŠ” ë°±í…ŒìŠ¤íŒ… ì „ëµ ì„ íƒ ë° ì‹¤í–‰í•˜ì—¬ ë³¸ì¸ì´ ì„ íƒí•œ ì „ëµ (ì§€í‘œ)ê°€ ì–¼ë§ˆë‚˜ ì„±ê³¼ë¥¼ ë‚´ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.

2ï¸âƒ£ ê²°ê³¼ë¥¼ í¬íŠ¸í´ë¦¬ì˜¤í™”í•˜ì—¬ ê´€ë¦¬í•œë‹¤.

3ï¸âƒ£ í¬íŠ¸í´ë¦¬ì˜¤ ì¤‘, ì‹¤ì œ ìë™ë§¤ë§¤ë¥¼ ì§„í–‰í•˜ê³  ì‹¶ë‹¤ë©´ ë“±ë¡ì ˆì°¨ë¥¼ ê±°ì³ 24ì‹œê°„ ìë™ë§¤ë§¤ë¥¼ ì§„í–‰í•˜ê²Œ ëœë‹¤.

## ë§ˆ. ì„¸ë¶€ ê¸°íš

<img width="1644" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-06-24 á„‹á…©á„’á…® 4 41 00" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/c7f0d3a0-558b-4f54-895a-e94c1e7684f9">

ë”ìš± ìì„¸í•œ ë‚´ìš©ì€ ìƒë‹¨ ê¹ƒí—ˆë¸Œ ë§í¬ì—ì„œ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤!

---

# ğŸ’» 3. ê°œë°œ ê³¼ì •

## ê°€. ì„¤ê³„

### 1) í”Œë¡œìš° ì°¨íŠ¸

<img width="1260" alt="BAMOWL_á„‘á…³á†¯á„…á…©á„‹á…®á„á…¡á„á…³" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/affe947c-6ee2-45b4-8d25-aa3f950a3190">

í”Œë¡œìš°ì°¨íŠ¸ëŠ” ìœ„ì²˜ëŸ¼ ë¡œê·¸ì¸ or ë¹„ë¡œê·¸ì¸ìœ¼ë¡œ êµ¬ë¶„ì„ í•˜ì˜€ê³ , ì„œë¹„ìŠ¤ í•µì‹¬ ê¸°ëŠ¥ë“¤ì€ ì£¼í™©ìƒ‰ìœ¼ë¡œ ëˆˆì— ì˜ ë“¤ì–´ì˜¤ê²Œ í‘œí˜„ì„ í•˜ì˜€ë‹¤.

í”Œë¡œìš°ì°¨íŠ¸ë¥¼ ë‚´ê°€ ì§œë³¸ ê²ƒì€ ê±°ì˜ ì²˜ìŒì´ì—ˆë˜ ê²ƒ ê°™ì€ë°, ê·¸ë¦¬ ì–´ë µì§€ë„ ì•Šì•˜ê³  ìƒê°ë³´ë‹¤ ì¬ë¯¸ìˆì—ˆë‹¤!
ê·¸ë¦¬ê³  ì–´ë–¤ í”Œë¡œìš°ë¡œ ì„œë¹„ìŠ¤ê°€ ì§„í–‰ë˜ê³ , ê·¸ë˜ì„œ ë‚œ ì–´ë–¤ ê¸°ëŠ¥ì„ ê°œë°œí•´ì•¼ í•˜ëŠ”ì§€ ì¡°ê¸ˆ ê°ì´ ì˜¤ëŠ” ê²ƒ ê°™ì•„ì„œ ì¢‹ì•˜ë˜ ê²ƒ ê°™ë‹¤.

### 2) í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜

<img width="1305" alt="BAMOWL_á„‹á…¡á„á…µá„á…¦á†¨á„á…¥" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/2a300ad6-ce83-4db7-b42b-06fa84cde033">

ë°±ì—”ë“œëŠ” Spring Boot í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì˜€ê³ 
`1) Upbit ì™¸ë¶€ API 2) Flask ë”¥ëŸ¬ë‹ 3) í”„ë¡ íŠ¸ì—”ë“œ` ì™€ í†µì‹ ì„ ì§„í–‰í–ˆë‹¤.

`Docker & Github Actions` ë¥¼ ì‚¬ìš©í•˜ì—¬ `CI/CD` íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í–ˆë‹¤.

ë”¥ëŸ¬ë‹ì€ `TensorFlow` ë° `Flask` ì„œë²„ë¥¼ í†µí•´ êµ¬ì¶•í•˜ì—¬, í•˜ë£¨ì— 1ë²ˆì”© ë°±ì—”ë“œì™€ API í†µì‹ í•˜ë©° ìƒˆë¡œìš´ ê°€ê²© ì˜ˆì¸¡ ê°’ì„ ë°›ì•˜ë‹¤.

### 3) ERD

<img width="1382" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-06-24 á„‹á…©á„’á…® 4 16 56" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/ea955bd5-5c9a-466d-93a4-d8c328383d7b">

ìš°ì¸¡ì— ìˆëŠ” ìº”ë“¤ ë°ì´í„°ëŠ” ì°¨íŠ¸ ë° ë°±í…ŒìŠ¤íŒ… ê¸°ëŠ¥ì— í•„ìˆ˜ì ì¸ ë°ì´í„°ì˜€ë‹¤.
ë•Œë¬¸ì— ì—…ë¹„íŠ¸ APIë¥¼ í™œìš©í•˜ì—¬ DBë¥¼ êµ¬ì¶•í•˜ì˜€ê³ , ê°€ìƒí™”íì˜ ì¢…ë¥˜ & ìº”ë“¤ ì¢…ë¥˜ì™€ ë§¤í•‘í•¨ìœ¼ë¡œì¨ ëª¨ë“  ê°€ìƒí™”íì™€ ìº”ë“¤ ì¢…ë¥˜ì— ë”°ë¼ í•„í„°ë§ì„ í†µí•´ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë¥¼ ì§„í–‰í–ˆë‹¤.

ìœ ì €ì™€ ê´€ë ¨ëœ ì¤‘ìš” ì •ë³´ë¡œëŠ” ì„œë¹„ìŠ¤ ì•½ê´€ ë™ì˜ì—¬ë¶€ & ì—…ë¹„íŠ¸ í‚¤ & ìë™ë§¤ë§¤ ì˜µì…˜ ë“±ì´ ì¡´ì¬í•œë‹¤.

ìœ ì €ì™€ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ 1:N ë§¤í•‘í•¨ìœ¼ë¡œì¨, ì†Œìœ í•œ í¬íŠ¸í´ë¦¬ì˜¤ ì§€í‘œ ë° ê²°ê³¼ ë“±ì„ ë‹¤ì‹œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ì–¸ì œë“ ì§€ ì›í•˜ëŠ” ì§€í‘œë¡œ ìë™ë§¤ë§¤ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.

ë”¥ëŸ¬ë‹ ì˜ˆì¸¡ ê°€ê²©ì€ í•˜ë£¨ì— 1ë²ˆì”© Flask ì„œë²„ì™€ í†µì‹ í•˜ì—¬ ì—…ë°ì´íŠ¸ë¥¼ ì§„í–‰í–ˆê³ , ì´ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ API ìš”ì²­ ì‹œ ë³´ë‚´ì£¼ëŠ” ì‹ìœ¼ë¡œ ì„¤ê³„í•˜ì˜€ë‹¤.

## ë‚˜. êµ¬í˜„ ê¸°ëŠ¥ (ë°±ì—”ë“œ)

ì§€ê¸ˆë¶€í„°ëŠ” ë°±ì—”ë“œë¡œì¨ êµ¬í˜„í•œ ê¸°ëŠ¥ë“¤ì— ëŒ€í•´ ë‹¤ë£¨ì–´ë³´ë ¤ê³  í•œë‹¤.

(ìë™ë§¤ë§¤ ê¸°ëŠ¥ì€ ë”°ë¡œ ë¹¼ì„œ ì‘ì„±í•  ì˜ˆì •ì´ë‹¤!)

### 1) ì—…ë¹„íŠ¸ API í†µì‹  & DB êµ¬ì¶•

ì²«ë²ˆì§¸ë¡œëŠ” ì™¸ë¶€ APIì¸ ì—…ë¹„íŠ¸ì™€ í†µì‹ í•˜ë©° ì„œë¹„ìŠ¤ì— í•„ìš”í•œ DBë¥¼ êµ¬ì¶•í–ˆë‹¤ëŠ” ì ì´ ìˆë‹¤.

(ì—…ë¹„íŠ¸ API ë ˆí¼ëŸ°ìŠ¤ : https://url.kr/RnaESP)

#### ì‹œì„¸ ìº”ë“¤ ì¡°íšŒ ë¡œì§


```java
package org.dgu.backend.service;

import jakarta.transaction.Transactional;
import lombok.RequiredArgsConstructor;
import org.dgu.backend.domain.Candle;
import org.dgu.backend.domain.CandleInfo;
import org.dgu.backend.domain.Market;
import org.dgu.backend.dto.UpbitDto;
import org.dgu.backend.repository.CandleInfoRepository;
import org.dgu.backend.repository.CandleRepository;
import org.dgu.backend.repository.MarketRepository;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Objects;

@Service
@Transactional
@RequiredArgsConstructor
public class CandleInfoServiceImpl implements CandleInfoService {
    @Value("${upbit.url.candle-minute}")
    private String UPBIT_URL_CANDLE_MINUTE;
    @Value("${upbit.url.candle-etc}")
    private String UPBIT_URL_CANDLE_ETC;
    private final CandleInfoRepository candleInfoRepository;
    private final MarketRepository marketRepository;
    private final CandleRepository candleRepository;
    private final UpbitApiClient upbitApiClient;

    // ì—…ë¹„íŠ¸ APIë¥¼ í†µí•´ ìº”ë“¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ
    @Override
    public void getCandleInfo(String koreanName, LocalDateTime to, int count, String candleName) {
        Market market = marketRepository.findByKoreanName(koreanName);
        Candle candle = candleRepository.findByCandleName(candleName);
        String marketName = market.getMarketName();

        String url;
        if (candleName.startsWith("minutes")) {
            // ë¶„ë´‰ì¸ ê²½ìš°
            int unit = Integer.parseInt(candleName.substring(7));
            url = String.format(UPBIT_URL_CANDLE_MINUTE, candleName.substring(0,7), unit, marketName, count);
        } else {
            // ê·¸ ì™¸ (ì¼ë´‰, ì£¼ë´‰, ì›”ë´‰)
            url = String.format(UPBIT_URL_CANDLE_ETC, candleName, marketName, count);
        }

        if (!Objects.isNull(to)) {
            // ë§ˆì§€ë§‰ ìº”ë“¤ ì‹œê°ë„ ì§€ì •í•œ ê²½ìš°
            String formattedTo = to.format(DateTimeFormatter.ofPattern("yyyy-MM-dd'T'HH:mm:ss'Z'"));
            url += ("&to=" + formattedTo);
        }

        UpbitDto.CandleInfoResponse[] responseBody = upbitApiClient.getCandleInfoAtUpbit(url);
        for (UpbitDto.CandleInfoResponse candleInfoResponse : responseBody) {
            CandleInfo candleInfo = CandleInfo.toEntity(candleInfoResponse, market, candle);
            candleInfoRepository.save(candleInfo);
        }
    }
}
```

ìœ„ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ì—ì„œëŠ” ìº”ë“¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ì„ ë‹´ë‹¹í•œë‹¤.

ë§ˆì¼“ í•œê¸€ì´ë¦„ (ex. ë¹„íŠ¸ì½”ì¸, ì´ë”ë¦¬ì›€), ê¸°ê°„, ë°ì´í„° ê°œìˆ˜, ìº”ë“¤ ì¢…ë¥˜ (1ë¶„ë´‰, 5ë¶„ë´‰..)ë¥¼ ì¸ìë¡œ ë°›ì•„ì„œ ì´ì— ë”°ë¼ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

ì‹¤ì§ˆì ìœ¼ë¡œ ì—…ë¹„íŠ¸ APIì™€ í†µì‹ í•˜ì—¬ ì‘ë‹µì„ ë°›ì•„ ì˜¤ëŠ” ê¸°ëŠ¥ì€ ì•„ë˜ì˜ `upbitApiClient`ì—ì„œ êµ¬í˜„í•˜ì˜€ë‹¤.

#### upbitApiClient

```java
package org.dgu.backend.service;

import com.nimbusds.jose.shaded.gson.Gson;
import lombok.RequiredArgsConstructor;
import org.dgu.backend.domain.UpbitKey;
import org.dgu.backend.domain.User;
import org.dgu.backend.dto.UpbitDto;
import org.dgu.backend.exception.UpbitErrorResult;
import org.dgu.backend.exception.UpbitException;
import org.dgu.backend.exception.UserErrorResult;
import org.dgu.backend.exception.UserException;
import org.dgu.backend.repository.UpbitKeyRepository;
import org.dgu.backend.util.JwtUtil;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.http.*;
import org.springframework.stereotype.Component;
import org.springframework.web.client.HttpClientErrorException;
import org.springframework.web.client.RestTemplate;

import java.util.Map;
import java.util.Objects;
import java.util.Optional;

@Component
@RequiredArgsConstructor
public class UpbitApiClient {
    @Value("${upbit.url.account}")
    private String UPBIT_URL_ACCOUNT;
    private final RestTemplate restTemplate;
    private final JwtUtil jwtUtil;
    private final UpbitKeyRepository upbitKeyRepository;

    // HTTP GET ìš”ì²­ì„ ë³´ë‚´ê³  ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œ
    public <T> T sendHttpGetRequest(String url, Class<T> responseType, Optional<String> token) {
        HttpHeaders headers = new HttpHeaders();
        headers.set("accept", MediaType.APPLICATION_JSON_VALUE);
        token.ifPresent(t -> headers.add("Authorization", "Bearer " + t));

        try {
            ResponseEntity<T> responseEntity = restTemplate.exchange(
                    url,
                    HttpMethod.GET,
                    new HttpEntity<>(headers),
                    responseType
            );

            // HTTP ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆì§€ë§Œ, ì‘ë‹µ ë³¸ë¬¸ì´ nullì¸ ê²½ìš° ì˜ˆì™¸ ì²˜ë¦¬
            if (Objects.isNull(responseEntity.getBody())) {
                throw new UpbitException(UpbitErrorResult.FAIL_GET_RESPONSE);
            }

            return responseEntity.getBody();
        } catch (HttpClientErrorException e) {
            UpbitErrorResult errorResult = mapToUpbitErrorResult((HttpStatus) e.getStatusCode(), e.getResponseBodyAsString());
            throw new UpbitException(errorResult);
        }
    }

    // HTTP POST ì£¼ë¬¸ ìš”ì²­ì„ ë³´ë‚´ê³  ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œ
    private <T> T sendHttpPostRequest(String url, Class<T> responseType, String token, Map<String, String> params) {
        HttpHeaders headers = new HttpHeaders();
        headers.set("Content-Type", MediaType.APPLICATION_JSON_VALUE);
        headers.set("Authorization", "Bearer " + token);

        try {
            ResponseEntity<T> responseEntity = restTemplate.exchange(
                    url,
                    HttpMethod.POST,
                    new HttpEntity<>(new Gson().toJson(params), headers),
                    responseType
            );
            if (Objects.isNull(responseEntity.getBody())) {
                throw new UpbitException(UpbitErrorResult.FAIL_GET_RESPONSE);
            }
            return responseEntity.getBody();
        } catch (HttpClientErrorException e) {
            UpbitErrorResult errorResult = mapToUpbitErrorResult((HttpStatus) e.getStatusCode(), e.getResponseBodyAsString());
            throw new UpbitException(errorResult);
        }
    }

    // ìœ ì € ì—…ë¹„íŠ¸ ê³„ì¢Œ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ë©”ì„œë“œ
    public UpbitDto.Account[] getUpbitAccounts(User user) {
        UpbitKey upbitKey = upbitKeyRepository.findByUser(user);
        if (Objects.isNull(upbitKey)) {
            throw new UserException(UserErrorResult.NOT_FOUND_KEY);
        }

        String token = jwtUtil.generateUpbitToken(upbitKey);
        return getUserAccountsAtUpbit(UPBIT_URL_ACCOUNT, token);
    }

    // ìº”ë“¤ ì°¨íŠ¸ ì¡°íšŒ ì—…ë¹„íŠ¸ APIì™€ í†µì‹ í•˜ëŠ” ë©”ì„œë“œ
    public UpbitDto.CandleInfoResponse[] getCandleInfoAtUpbit(String url) {
        return sendHttpGetRequest(url, UpbitDto.CandleInfoResponse[].class, Optional.empty());
    }

    // ê°€ìƒí™”í ì¡°íšŒ ì—…ë¹„íŠ¸ APIì™€ í†µì‹ í•˜ëŠ” ë©”ì„œë“œ
    public UpbitDto.MarketResponse[] getAllMarketsAtUpbit(String url) {
        return sendHttpGetRequest(url, UpbitDto.MarketResponse[].class, Optional.empty());
    }

    // ì „ì²´ ê³„ì¢Œ ì¡°íšŒ ì—…ë¹„íŠ¸ APIì™€ í†µì‹ í•˜ëŠ” ë©”ì„œë“œ
    public UpbitDto.Account[] getUserAccountsAtUpbit(String url, String token) {
        return sendHttpGetRequest(url, UpbitDto.Account[].class, Optional.of(token));
    }

    // ì‹œì„¸ í˜„ì¬ê°€ ì¡°íšŒ ì—…ë¹„íŠ¸ APIì™€ í†µì‹ í•˜ëŠ” ë©”ì„œë“œ
    public UpbitDto.Ticker[] getTickerPriceAtUpbit(String url) {
        return sendHttpGetRequest(url, UpbitDto.Ticker[].class, Optional.empty());
    }

    // ì£¼ë¬¸ ìƒì„± ì—…ë¹„íŠ¸ APIì™€ í†µì‹ í•˜ëŠ” ë©”ì„œë“œ
    public UpbitDto.OrderResponse createNewOrder(String url, String token, Map<String, String> params) {
        return sendHttpPostRequest(url, UpbitDto.OrderResponse.class, token, params);
    }
    // HTTP ìƒíƒœ ì½”ë“œì— ë”°ë¼ UpbitErrorResultë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ ì—ëŸ¬ ì½”ë“œë¥¼ ì¶œë ¥í•˜ëŠ” ë©”ì„œë“œ
    private UpbitErrorResult mapToUpbitErrorResult(HttpStatus statusCode, String responseBody) {
        for (UpbitErrorResult errorResult : UpbitErrorResult.values()) {
            if (errorResult.getHttpStatus() == statusCode && responseBody.contains(errorResult.getCode())) {
                return errorResult;
            }
        }

        // ê·¸ ì™¸ì˜ ê²½ìš°, ì—ëŸ¬ ì½”ë“œë§Œ ì¶œë ¥
        System.out.println("Upbit error code: " + statusCode.toString() + " " + responseBody);
        return null;
    }
}
```

ìœ„ ì„œë¹„ìŠ¤ì— ìˆëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì—…ë¹„íŠ¸ì—ì„œ ì‘ë‹µ ê°ì²´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê³ , ì—¬ê¸°ì„œ í•„ìš”í•œ ì •ë³´ë¥¼ DBì— ì €ì¥í•˜ê±°ë‚˜ í”„ë¡ íŠ¸ì—”ë“œë¡œ ë°˜í™˜í•˜ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ë‹¤.

ì´ëŸ¬í•œ ë¡œì§ì„ í†µí•´ì„œ ì—…ë¹„íŠ¸ì™€ í†µì‹ í•˜ëŠ” ë¶€ë¶„ì€ ì˜ êµ¬í˜„ë˜ì—ˆìœ¼ë‚˜, ë¬¸ì œëŠ” ì—…ë¹„íŠ¸ê°€ 1ì´ˆì— 10íšŒ ìš”ì²­ ì œí•œì´ ìˆë‹¤ëŠ” ì ì´ì—ˆë‹¤. ë˜í•œ 1íšŒ ìš”ì²­ ë‹¹ ë°ì´í„°ë¥¼ 200ê°œê¹Œì§€ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì—ˆë‹¤.
ì¦‰, 1ì´ˆì— ìµœëŒ€ 2,000ê°œì˜ ë°ì´í„°ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

ë§Œì•½ 1ì´ˆì— 10íšŒ ìš”ì²­ì´ ë„˜ì–´ê°€ê²Œ ë˜ë©´, ì—ëŸ¬ê°€ ë°œìƒí•˜ë©° ë°ì´í„°ë¥¼ ì œëŒ€ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì—ˆë‹¤.

1ë¶„ë´‰ ë°ì´í„°ë¥¼ 2018ë…„ë¶€í„° ë°›ì•„ì˜¤ê²Œ ë˜ë©´ ìˆ˜ë°±ë§Œê°œ ì´ìƒì˜ ë°ì´í„°ì˜ ìš”ì²­ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì—, ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©´ì„œë„ ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë°©ë²•ì´ í•„ìš”í–ˆë‹¤.

### 2) Guava ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš© - ë¹„ë™ê¸°ì²˜ë¦¬

<img width="1639" alt="image" src="https://github.com/CSID-DGU/2024-1-SCS4031-01-owl-4/assets/113084292/c838aea3-e0b5-4481-ad86-6b4e9446450c">

ë•Œë¬¸ì— Googleì˜ Guava ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ ì´ë¥¼ ë¹„ë™ê¸°ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ í•´ê²°í•˜ì˜€ë‹¤.

#### CandleDataCollector

```java
package org.dgu.backend.util;

import lombok.RequiredArgsConstructor;
import org.dgu.backend.service.CandleInfoService;
import org.springframework.stereotype.Component;

import java.time.Duration;
import java.time.LocalDateTime;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.ExecutionException;

import com.google.common.util.concurrent.RateLimiter;

@Component
@RequiredArgsConstructor
public class CandleDataCollector {
    private final CandleInfoService candleInfoService;
    private final CandleUtil candleUtil;
    private final int batchSize = 200;
    private final RateLimiter rateLimiter = RateLimiter.create(10.0); // ì´ˆë‹¹ ìš”ì²­ í—ˆìš©ëŸ‰ 10ê°œë¡œ ì œí•œ
    private final long retryDelayMillis = 100; // ì¬ì‹œë„ ëŒ€ê¸° ì‹œê°„ (0.1ì´ˆ)

    public void collectCandleData(String koreanName, String candleName, LocalDateTime startDate, LocalDateTime endDate) {
        // ìº”ë“¤ì„ ë¶„ ê¸°ì¤€ìœ¼ë¡œ ë³€í™˜
        int candleInterval = candleUtil.calculateCandleInterval(candleName);

        // ì‹œì‘ ì‹œê°„ë¶€í„° ì¢…ë£Œ ì‹œê°„ê¹Œì§€ì˜ ì´ ë¶„ ìˆ˜ ê³„ì‚°
        long totalMinutes = Duration.between(startDate, endDate).toMinutes();

        // í•œ ë²ˆì˜ API ìš”ì²­ì—ì„œ ì§€ë‚˜ëŠ” ì‹œê°„
        long oneAPI = (long) candleInterval * batchSize;

        // ë°˜ë³µ íšŸìˆ˜ ê³„ì‚°
        long numIterations = (long) Math.ceil((double) totalMinutes / oneAPI);

        CompletableFuture<Void>[] futures = new CompletableFuture[(int) numIterations];

        for (int i = 0; i < numIterations; i++) {
            LocalDateTime currentStartTime = startDate.plusMinutes((long) i * oneAPI);
            LocalDateTime currentEndTime = currentStartTime.plusMinutes(oneAPI);

            // ì¢…ë£Œ ì‹œê°„ì´ endDateì„ ë„˜ì–´ê°€ë©´ endDateìœ¼ë¡œ ì„¤ì •
            if (currentEndTime.isAfter(endDate)) {
                currentEndTime = endDate;
            }

            final LocalDateTime intervalEnd = currentEndTime;

            CompletableFuture<Void> future = CompletableFuture.runAsync(() -> {
                // candleInfoServiceë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìˆ˜ì§‘
                boolean requestSuccess = false;
                while (!requestSuccess) {
                    // ì´ˆë‹¹ ìš”ì²­ í—ˆìš©ëŸ‰ì„ ì´ˆê³¼í•˜ì§€ ì•Šì„ ë•Œê¹Œì§€ ëŒ€ê¸°
                    rateLimiter.acquire();

                    try {
                        candleInfoService.getCandleInfo(koreanName, intervalEnd, batchSize, candleName);
                        requestSuccess = true; // ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë¨
                    } catch (Exception e) {
                        // ì˜¤ë¥˜ ë°œìƒ ì‹œ ì¬ì‹œë„
                        System.out.println("ì¬ì‹œë„ ì¤‘...");
                        try {
                            Thread.sleep(retryDelayMillis); // 0.1ì´ˆ ëŒ€ê¸°
                        } catch (InterruptedException ex) {
                            ex.printStackTrace();
                        }
                    }
                }
            });

            futures[i] = future;
        }

        // ëª¨ë“  CompletableFutureê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
        CompletableFuture<Void> allOfFuture = CompletableFuture.allOf(futures);
        try {
            allOfFuture.get(); // ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
            System.out.println("ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        }
    }
}
```

ì½”ë“œëŠ” ìœ„ì™€ ê°™ë‹¤.
1íšŒ ìš”ì²­ë‹¹ ìµœëŒ€ ë°ì´í„° ê°œìˆ˜ëŠ” 200ê°œì´ë¯€ë¡œ batchSizeëŠ” 200ìœ¼ë¡œ ì„¤ì •í•˜ì˜€ê³ , ì´ˆë‹¹ ìš”ì²­ í—ˆìš©ëŸ‰ë„ 10íšŒë¡œ ì œí•œí•˜ì˜€ë‹¤.

ë¡œì§ì€ ì•„ë˜ì™€ ê°™ë‹¤.

1ï¸âƒ£ ì¸ìë¡œ ë“¤ì–´ì˜¨ ìº”ë“¤ ë„¤ì„(ì¢…ë¥˜)ë¥¼ ë¶„ ê¸°ì¤€ìœ¼ë¡œ ë³€í™˜í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `days` ë¼ë©´ 1440ìœ¼ë¡œ ë³€í™˜ëœë‹¤. ì´ëŠ” `candleInterval` ì´ ëœë‹¤.

2ï¸âƒ£ ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì˜ ì°¨ì´, ì¦‰ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ê¸°ê°„ì„ ë¶„ ê¸°ì¤€ìœ¼ë¡œ ë³€í™˜í•œë‹¤.

3ï¸âƒ£ ìœ„ì—ì„œ ë³€í™˜í•œ `candleInterval` ì€ ê°ê° 1ê°œì˜ ë°ì´í„°ì´ë©°, 1íšŒ ìš”ì²­ë‹¹ 200ê°œì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, í•œ ë²ˆì˜ API ìš”ì²­ì—ì„œ ì§€ë‚˜ëŠ” ì‹œê°„ì€ ì•„ë˜ì™€ ê°™ë‹¤.
```java
long oneAPI = (long) candleInterval * batchSize;
```

4ï¸âƒ£ ê¸°ê°„ì„ `oneAPI` ë¡œ ë‚˜ëˆ„ì–´ ëª‡ ë²ˆì˜ API ìš”ì²­ì„ ì§„í–‰í•´ì•¼ í•˜ëŠ”ì§€ ê³„ì‚°í•œë‹¤.

```java
long numIterations = (long) Math.ceil((double) totalMinutes / oneAPI);
```

5ï¸âƒ£ í•„ìš” ìš”ì²­ íšŸìˆ˜ë§Œí¼ì˜ ë°˜ë³µì„ ë¹„ë™ê¸°ì²˜ë¦¬í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.


ë¹„ë™ê¸°ì²˜ë¦¬ë¥¼ í•´ë³¸ ê²ƒì€ ì´ë²ˆì´ ì²˜ìŒì´ë¼ ë¯¸ìˆ™í•´ ì œëŒ€ë¡œ êµ¬í˜„í•˜ì§€ ëª»í•œ íƒ“ì¸ì§€, ì´ë ‡ê²Œ í•´ë„ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ë˜ ì¤‘ ìš”ì²­ ì œí•œ ì—ëŸ¬ê°€ ë°œìƒí•´ ë©ˆì¶”ê²Œ ë˜ì—ˆë‹¤.

```java
                    try {
                        candleInfoService.getCandleInfo(koreanName, intervalEnd, batchSize, candleName);
                        requestSuccess = true; // ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë¨
                    } catch (Exception e) {
                        // ì˜¤ë¥˜ ë°œìƒ ì‹œ ì¬ì‹œë„
                        System.out.println("ì¬ì‹œë„ ì¤‘...");
                        try {
                            Thread.sleep(retryDelayMillis); // 0.1ì´ˆ ëŒ€ê¸°
                        } catch (InterruptedException ex) {
                            ex.printStackTrace();
                        }
                    }
```

ê·¸ë ‡ê¸°ì— ìœ„ì²˜ëŸ¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´ 0.1ì´ˆë¥¼ ëŒ€ê¸°í•œ í›„ì— ë‹¤ì‹œ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰ì„ í•˜ì—¬ ì—ëŸ¬ë¥¼ í•´ê²°í–ˆë‹¤.

ë˜í•œ ë°ì´í„°ë¥¼ ê±°ì˜ ë‹¤ ë°›ì•„ê°ˆ ì¦ˆìŒì—ëŠ” ì¤‘ë³µëœ ë°ì´í„°ê°€ ë§ì´ ìŒ“ì´ê²Œ ë˜ì—ˆëŠ”ë°, ì•„ë§ˆ ì´ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ë³‘ë ¬ì ìœ¼ë¡œ ì§„í–‰ì´ ë˜ì—ˆëŠ”ë° ì„œë¡œ ì–´ëŠ ê¸°ê°„ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ì§€ ê³µìœ ê°€ ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ ì•„ë‹Œê°€.. ì‹¶ë‹¤.
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì½œë°±ì„ ì‚¬ìš©í•´ì•¼ í–ˆì„ê¹Œ? ë¹„ë™ê¸° ì²˜ë¦¬ì— ëŒ€í•´ì„œëŠ” ê³µë¶€ê°€ í•„ìš”í•  ê²ƒ ê°™ë‹¤.

> ğŸ§‘ğŸ»â€ğŸ’» ë©˜í† ë‹˜ê»˜ì„œ ë§ì”€í•˜ì‹œê¸°ë¥¼ `Thread.sleep(retryDelayMillis)` ê°™ì€ ë°©ì‹ì€ í˜„ì—…ì—ì„œëŠ” ì§€ì–‘í•œë‹¤ê³  í•˜ì…¨ë‹¤. í•˜ì§€ë§Œ í•´ê²° ë°©ë²•ì„ ì˜ ëª¨ë¥´ê² ê³ , ì‹œê°„ì´ ë¶€ì¡±í•˜ì—¬ ì´ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•˜ëŠ” ê²Œ ì¢‹ì•˜ì„ê¹Œ?
ë˜í•œ ìœ„ì²˜ëŸ¼ ë¹„ë™ê¸°ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ëŠ” ë°©ì‹ì´ ì˜³ì€ ê²ƒì¼ê¹Œ?
 
### 3) ë°±í…ŒìŠ¤íŒ… ê¸°ëŠ¥ êµ¬í˜„

![](https://velog.velcdn.com/images/hsh111366/post/9810df48-ef49-4dd0-87c7-a794a75e0e0b/image.png)

íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë°±í…ŒìŠ¤íŒ… ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬í˜„í–ˆë‹¤ëŠ” ì ë„ íŠ¹ì§•ì´ë‹¤.
ëŒ€ê°œ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” íŒŒì´ì¬ì— ì¡´ì¬í–ˆê³ , ìš°ë¦¬ íŒ€ì€ ì¡°ê¸ˆ ë” ê°„ë‹¨í•˜ê³  í¸ë¦¬í•œ ë°±í…ŒìŠ¤íŒ… ê¸°ëŠ¥ì„ ë§Œë“œëŠ” ê²ƒì´ì—ˆê¸°ì— ì§ì ‘ ë§Œë“¤ì–´ë³´ìëŠ” ìƒê°ì´ ë“¤ì–´ ê²°ì •í–ˆë‹¤.

ë¬¼ë¡  ë„ˆë¬´ë„ˆë¬´ ì–´ë ¤ì› ê³ .. ì‹œê°„ë„ ë§ì´ ë“¤ì—ˆë‹¤ğŸ˜‚

ìš°ë¦¬ ì„œë¹„ìŠ¤ì—ì„œëŠ” ë°±í…ŒìŠ¤íŒ…ì—ì„œ `ì§€ìˆ˜ ê°€ì¤‘ ì´ë™í‰ê· `ê³¼ `ë¬¼íƒ€ê¸° ë§¤ë§¤ë²•` ì„ ì±„íƒí•˜ì˜€ëŠ”ë°, ë°±í…ŒìŠ¤íŒ… ë¡œì§ì— ëŒ€í•´ ì„¤ëª…í•˜ê¸° ì „ì— ì´ ë‘˜ì— ëŒ€í•´ ì„¤ëª…í•´ë³´ë„ë¡ í•˜ê² ë‹¤.

`ì§€ìˆ˜ ê°€ì¤‘ ì´ë™í‰ê· ` ì€ ì¼ë°˜ì ì¸ ì´ë™í‰ê· ì— ì§€ìˆ˜ ê°€ì¤‘ì¹˜ë¥¼ ì¶”ê°€í•˜ëŠ”ë°, ì´ëŠ” ì ì  ìµœì‹  ë°ì´í„°ë¡œ ê°ˆ ìˆ˜ë¡ ê°€ì¤‘ì¹˜ê°€ ì»¤ì§„ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ìµœì‹  ë°ì´í„°ì˜ ê°€ê²© ì¶”ì„¸ì— ë”ìš± ì˜í–¥ì„ ë§ì´ ë°›ê²Œ ë˜ì–´, ìµœì‹  ê²½í–¥ì„ ì¡°ê¸ˆ ë” ì˜ ë°˜ì˜í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.

ë‹¤ìŒìœ¼ë¡œ `ë¬¼íƒ€ê¸° ë§¤ë§¤ë²•` ì€ ê°€ê²©ì´ ë–¨ì–´ì§€ë©´ ë§¤ìˆ˜í•˜ê³ , ê°€ê²©ì´ ì˜¤ë¥´ë©´ ë§¤ë„í•˜ì—¬ ì¶”ì„¸ë¥¼ ë”°ë¼ê°€ë©° ì´ìµì„ ë³´ëŠ” ë§¤ë§¤ë²•ì´ë¼ í•  ìˆ˜ ìˆë‹¤. ì–´ì©” ìˆ˜ ì—†ì´ ê°€ê²©ì˜ ì¶”ì„¸ì— ì˜ì¡´í•˜ê²Œ ë˜ì§€ë§Œ, 24ì‹œê°„ë™ì•ˆ ë¹ ë¥´ê²Œ ë§¤ë§¤ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ íŠ¹ì„± ìƒ ì´ìµì„ ë³´ê¸° ìœ ë¦¬í•  ê²ƒ ê°™ì•„ ì±„íƒí•˜ì˜€ë‹¤.

#### ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ ìƒì„± ë¡œì§

```java
    // ìµœì‹ í™”ëœ ìº”ë“¤ ì •ë³´ë¥¼ ì‚¬ìš©í•´ ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œ
    @Transactional
    protected BackTestingDto.BackTestingResponse fetchBackTestingResult(String authorizationHeader, BackTestingDto.StepInfo stepInfo) {
        Market market = marketRepository.findByKoreanName("ë¹„íŠ¸ì½”ì¸");
        Candle candle = candleRepository.findByCandleName(stepInfo.getCandleName());
        LocalDateTime startDate = dateUtil.convertToLocalDateTime(stepInfo.getStartDate());
        LocalDateTime endDate = dateUtil.convertToLocalDateTime(stepInfo.getEndDate());
        if (startDate.isAfter(endDate)) {
            throw new BackTestingException(BackTestingErrorResult.START_DATE_AFTER_END_DATE);
        }
        if (stepInfo.getNDate() > stepInfo.getMDate()) {
            throw new BackTestingException(BackTestingErrorResult.N_DAY_LONGER_THAN_M_DAY);
        }

        List<CandleInfo> candles = candleInfoRepository.findFilteredCandleInfo(market, candle, startDate, endDate);
        if (candles.isEmpty()) {
            throw new CandleException(CandleErrorResult.NOT_FOUND_CANDLES);
        }
        candles = candleUtil.removeDuplicatedCandles(candles);

        // ê³¨ë“  í¬ë¡œìŠ¤ ì§€ì  ì°¾ê¸°
        List<LocalDateTime> goldenCrossPoints = backTestingCalculator.findGoldenCrossPoints(candles, stepInfo);

        // ë°±í…ŒìŠ¤íŒ… ì‹œì‘
        List<BackTestingDto.BackTestingResult> backTestingResults = backTestingCalculator.run(candles, stepInfo, goldenCrossPoints);

        // ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ ì§‘ê³„
        BackTestingDto.BackTestingResponse backTestingResponse = backTestingCalculator.collectResults(backTestingResults, stepInfo.getInitialCapital());

        // íšŒì›ì¸ ê²½ìš° í¬íŠ¸í´ë¦¬ì˜¤ ì„ì‹œ ì €ì¥
        if (authorizationHeader != null) {
            saveTempBackTestingResult(authorizationHeader, stepInfo, backTestingResponse);
        }

        return backTestingResponse;
    }
```

ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ë¥¼ ìƒì„±í•˜ëŠ” ì£¼ìš” ë©”ì„œë“œëŠ” ìœ„ì™€ ê°™ë‹¤.

ìš°ì„  ê¸°ëŠ¥ ê³ ë„í™”ë¥¼ ìœ„í•´ ê°€ìƒí™”íëŠ” `ë¹„íŠ¸ì½”ì¸` í•˜ë‚˜ë§Œìœ¼ë¡œ í•œì •ì„ í•˜ì˜€ë‹¤.

ì—ëŸ¬ ì²˜ë¦¬ ë° í•„ìš”í•œ ê°ì²´ë“¤ì„ ë¶ˆëŸ¬ì˜¨ í›„ì—, í•„í„°ë§ ëœ ìº”ë“¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
ê·¸ë¦¬ê³  ì¤‘ë³µ ë°ì´í„°ë¥¼ ì œê±°í•´ì£¼ì–´ ìµœì¢…ì ìœ¼ë¡œ ë°±í…ŒìŠ¤íŒ…ì„ ì§„í–‰í•  ë°ì´í„°ë¥¼ ì¤€ë¹„í•œë‹¤.

ë§¤ë§¤ ì§€ì ì„ íŒŒì•…í•˜ê¸° ìœ„í•˜ì—¬, ìœ ì €ê°€ ì…ë ¥í•œ `Nì¼(ë‹¨ê¸°ì„ )` `Mì¼(ì¥ê¸°ì„ )` ì„ ê¸°ë°˜ìœ¼ë¡œ ê³¨ë“  í¬ë¡œìŠ¤ ì§€ì ì„ ëª¨ë‘ ì°¾ì•„ì¤€ë‹¤.

![](https://velog.velcdn.com/images/hsh111366/post/3c9b6fa5-d2b8-48bb-9bd2-1e53625a1726/image.png)

(ì¶œì²˜ : https://m.blog.naver.com/dysaghwls/223228083628)

ìœ„ì²˜ëŸ¼ ë‹¨ê¸°ì„ ì´ ì¥ê¸°(or ì¤‘ê¸°)ì„ ì„ ëš«ëŠ” ìˆœê°„ì„ ê³¨ë“  í¬ë¡œìŠ¤ ì§€ì ì´ë¼ê³  í•˜ë©°, í•´ë‹¹ ì§€ì ë¶€í„°ëŠ” ìƒìŠ¹ ì¶”ì„¸ë¥¼ ì˜ˆìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œë¶€í„° ê±°ë˜ë¥¼ ì‹œì‘í•˜ê²Œ ëœë‹¤.

#### ê³¨ë“  í¬ë¡œìŠ¤ ì§€ì ì„ ì°¾ëŠ” ë¡œì§

```java
    // ê³¨ë“  í¬ë¡œìŠ¤ ì§€ì ì„ ì°¾ì•„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œ
    public List<LocalDateTime> findGoldenCrossPoints(List<CandleInfo> candles, BackTestingDto.StepInfo stepInfo) {
        List<BackTestingDto.EMAInfo> nDateEMAs = calculateEMA(candles, stepInfo.getNDate());
        List<BackTestingDto.EMAInfo> mDateEMAs = calculateEMA(candles, stepInfo.getMDate());

        int diff = nDateEMAs.size() - mDateEMAs.size();
        List<LocalDateTime> goldenCrossPoints = new ArrayList<>();

        boolean crossed = false; // ê³¨ë“  í¬ë¡œìŠ¤ê°€ ë°œìƒí–ˆëŠ”ì§€ ì—¬ë¶€

        for (int i = 0; i < mDateEMAs.size(); i++) {
            Long nPrice = nDateEMAs.get(i + diff).getPrice();
            Long mPrice = mDateEMAs.get(i).getPrice();

            if (nPrice > mPrice && !crossed) {
                goldenCrossPoints.add(mDateEMAs.get(i).getDate());
                crossed = true;
            } else if (nPrice <= mPrice && crossed) {
                crossed = false;
            }
        }

        return goldenCrossPoints;
    }
```

ê³¨ë“  í¬ë¡œìŠ¤ ì§€ì ì€ ìœ„ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê³„ì‚°í•´ì£¼ì—ˆë‹¤. ê³„ì‚°ì„ ìœ„í•´ì„œëŠ” ë‹¨ê¸°ì„ , ì¥ê¸°ì„  ê°ê°ì˜ ì´ë™í‰ê· ì„  ë°ì´í„°ê°€ í•„ìš”í•˜ë‹¤. 

![](https://velog.velcdn.com/images/hsh111366/post/f73d2227-378f-46da-b7c2-f04fba4a4cfc/image.png)

ì˜ˆë¥¼ ë“¤ì–´ ìœ„ì™€ ê°™ì€ í˜•íƒœì´ë‹¤.
ë‚ ì§œì™€ í•´ë‹¹ ë‚ ì§œì˜ ë¹„íŠ¸ì½”ì¸ ê°€ê²©ì„ ê³„ì‚°í•˜ê³ , ì´ë¥¼ ë¹„êµí•˜ì—¬ ê³¨ë“  í¬ë¡œìŠ¤ë¥¼ ì°¾ì•„ë‚¸ë‹¤.

ê³¨ë“  í¬ë¡œìŠ¤ëŠ” ë‹¨ìˆœíˆ ë‹¨ê¸°ì„ ì´ ì¥ê¸°ì„ ë³´ë‹¤ ê°€ê²©ì´ ë†’ì„ ë•Œê°€ ì•„ë‹ˆë¼, ê°€ê²©ì´ ë” ë‚®ì•˜ë‹¤ê°€ ë†’ì•„ì ¸ ëš«ëŠ” ìˆœê°„ì´ê¸° ë•Œë¬¸ì—, ì•„ë˜ ë³€ìˆ˜ë¥¼ í™œìš©í•´ êµ¬ë¶„í•˜ì˜€ë‹¤.

```java
boolean crossed = false; // ê³¨ë“  í¬ë¡œìŠ¤ê°€ ë°œìƒí–ˆëŠ”ì§€ ì—¬ë¶€
```

ê³¨ë“  í¬ë¡œìŠ¤ ì§€ì ê¹Œì§€ ì°¾ì•„ì£¼ì—ˆìœ¼ë‹ˆ, ì´ì œ ë°±í…ŒìŠ¤íŒ…ì„ ì§„í–‰í•˜ê²Œ ëœë‹¤.

#### ë°±í…ŒìŠ¤íŒ… ì‹¤í–‰ ë¡œì§

```java
    // ë°±í…ŒìŠ¤íŒ…ì„ ì‹¤í–‰í•˜ëŠ” ë©”ì„œë“œ
    public List<BackTestingDto.BackTestingResult> run(List<CandleInfo> candles, BackTestingDto.StepInfo stepInfo, List<LocalDateTime> goldenCrossPoints) {
        capital = stepInfo.getInitialCapital();        // ì´ˆê¸° ìë³¸
        tradingUnit = capital / stepInfo.getTradingUnit(); // í•œ ë²ˆ ë§¤ìˆ˜ë‹¹ ê¸ˆì•¡
        buyingPoint = stepInfo.getBuyingPoint();     // ë§¤ìˆ˜ ì§€ì 
        sellingPoint = stepInfo.getSellingPoint();   // ìµì ˆ ì§€ì 
        stopLossPoint = stepInfo.getStopLossPoint(); // ì†ì ˆ ì§€ì 

        List<BackTestingDto.BackTestingResult> backTestingResults = new ArrayList<>();

        for (LocalDateTime goldenCrossPoint : goldenCrossPoints) {
            int startIndex = findStartIndex(candles, goldenCrossPoint);

            executeTrade(candles, startIndex, stepInfo.getTradingUnit(), backTestingResults);
        }

        return backTestingResults;
    }
```

ìœ ì €ê°€ ì…ë ¥í•œ ë°±í…ŒìŠ¤íŒ… ì „ëµ (ì§€í‘œ)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰ëœë‹¤. ëª¨ë“  ê³¨ë“  í¬ë¡œìŠ¤ ì§€ì ì—ì„œë¶€í„° ë§¤ë§¤ë¥¼ ì§„í–‰í•˜ë©° ê·¸ ê²°ê³¼ë¥¼ DTOë¡œ ë¬¶ì–´ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥í•œ í›„ ë°˜í™˜í•œë‹¤.

#### ê±°ë˜ ì§„í–‰ ë¡œì§

```java
    // ê±°ë˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë©”ì„œë“œ
    private void executeTrade(List<CandleInfo> candles, int startIndex, int tradingCnt, List<BackTestingDto.BackTestingResult> backTestingResults) {
        // ì´ˆê¸° ì„¸íŒ…
        coin = BigDecimal.ZERO;
        executeBuy("BUY", candles.get(startIndex).getDateTime(), candles.get(startIndex).getTradePrice(), backTestingResults);
        buyingCnt = 1;
        List<Double> tradePrices = new ArrayList<>();
        tradePrices.add(candles.get(startIndex).getTradePrice());
        Double avgPrice = candles.get(startIndex).getTradePrice();
        startDate = null;

        for (int i = startIndex + 1; i < candles.size(); i++) {
            LocalDateTime currentDate = candles.get(i).getDateTime();
            Double currentPrice = candles.get(i).getTradePrice();

            if (startDate == null) {
                startDate = currentDate;
            }

            Long initialCapital = capital + tradingUnit * buyingCnt;
            Double curRate = calculateRate(capital, initialCapital, currentPrice, coin);
            String action = determineAction(currentPrice, avgPrice, tradingCnt, buyingCnt, buyingPoint, sellingPoint, stopLossPoint, curRate);
            // ë§¤ìˆ˜ ì²˜ë¦¬
            if (action.equals("BUY")) {
                executeBuy(action, currentDate, currentPrice, backTestingResults);
                buyingCnt++;
                tradePrices.add(currentPrice);
                avgPrice = tradePrices.stream().mapToDouble(Double::doubleValue).sum() / buyingCnt;
            }
            // ìµì ˆ ì²˜ë¦¬
            else if (action.equals("SELL")) {
                executeSell(action, currentDate, currentPrice, backTestingResults);
                break;
            }
            // ì†ì ˆ ì²˜ë¦¬
            else if (action.equals("STOP_LOSS")) {
                executeStopLoss(action, currentDate, currentPrice, backTestingResults);
                break;
            }

            // ë§ˆì§€ë§‰ ë‚¨ì€ ì½”ì¸ ë§¤ë„ ì²˜ë¦¬
            if (i == candles.size() - 1 && !Objects.equals(coin, BigDecimal.ZERO)) {
                executeSell(action, currentDate, currentPrice, backTestingResults);
            }
        }
    }
```

ê±°ë˜ë¥¼ ì§„í–‰í•˜ëŠ” ë©”ì„œë“œì´ë‹¤. 
ìš°ì„  1íšŒ ë§¤ìˆ˜ë¥¼ ì‹œì‘í•˜ë©° ì´ˆê¸° ì„¸íŒ…ì„ í•´ì¤€ë‹¤.

ì´ì œë¶€í„°ëŠ” ì‹¤ì œ ë¹„íŠ¸ì½”ì¸ ê°€ê²© ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°€ê²©ì´ ì˜¤ë¥´ë©´ ë§¤ë„í•˜ê³ , ê°€ê²©ì´ ë–¨ì–´ì§€ë©´ ë§¤ìˆ˜ë¥¼ ì§„í–‰í•˜ë©° ìˆ˜ìµì„ ë³¸ë‹¤.

```java
String action = determineAction(currentPrice, avgPrice, tradingCnt, buyingCnt, buyingPoint, sellingPoint, stopLossPoint, curRate);
```

ìœ„ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ í˜„ì¬ ë°ì´í„°ì—ì„œ ë§¤ìˆ˜ or ë§¤ë„ (=ìµì ˆ) or ì†ì ˆí•  ê²ƒì¸ì§€ ì•¡ì…˜ì„ ê²°ì •í•œë‹¤.

```java
    // ì•¡ì…˜ì„ íŒë‹¨í•˜ëŠ” ë©”ì„œë“œ
    public String determineAction(Double currentPrice, Double avgPrice, int tradingCnt, int buyingCnt, Double buyingPoint, Double sellingPoint, Double stopLossPoint, Double curRate) {
        // ë§¤ìˆ˜ ì¡°ê±´ íŒë‹¨
        if (buyingCnt < tradingCnt && currentPrice < avgPrice * (100 - buyingPoint) / 100) {
            return "BUY";
        }
        // ìµì ˆ ì¡°ê±´ íŒë‹¨
        else if (curRate > sellingPoint) {
            return "SELL";
        }
        // ì†ì ˆ ì¡°ê±´ íŒë‹¨
        else if (curRate < -stopLossPoint) {
            return "STOP_LOSS";
        }

        return "STAY";
    }
```

ì•„ì§ ë§¤ìˆ˜ íšŸìˆ˜ê°€ ë‚¨ì•„ ìˆê³ , `í˜„ì¬ ê°€ê²© < í˜„ì¬ í‰ë‹¨ê°€ì—ì„œ ë§¤ìˆ˜ í¬ì¸íŠ¸ë§Œí¼ ë–¨ì–´ì§„ ê°€ê²©` ì´ë¼ë©´ `BUY` ì•¡ì…˜ì„ ë¦¬í„´í•œë‹¤.

`curRate` ëŠ” í˜„ì¬ ìˆ˜ìµë¥ ë¡œ, ë‚´ê°€ ì§€ê¸ˆê¹Œì§€ ë§¤ìˆ˜í•œ ë¹„íŠ¸ì½”ì¸ì„ í˜„ì¬ ê°€ê²©ìœ¼ë¡œ íŒë§¤í•œë‹¤ë©´ ë§¤ìˆ˜ ë‹¹ì‹œ ìë³¸ì˜ ë¹„í•´ ì–¼ë§ˆì˜ ìˆ˜ìµë¥ ì„ ë³¼ ìˆ˜ ìˆëŠ”ì§€ë¥¼ ê³„ì‚°í•œ ìˆ˜ì¹˜ì´ë‹¤.

ë§Œì•½ `curRate` ê°€ `sellingPoint`, ì¦‰ ë§¤ë„ í¬ì¸íŠ¸ë³´ë‹¤ í¬ë‹¤ë©´ ë§¤ë„ë¥¼ í•  íƒ€ì´ë°ì´ê¸°ì— `SELL` ì•¡ì…˜ì„ ë¦¬í„´í•œë‹¤.

ë°˜ëŒ€ë¡œ `curRate` ê°€ `stopLossPoint`, ì¦‰ ì†ì ˆ í¬ì¸íŠ¸ë³´ë‹¤ ì‘ë‹¤ë©´ ì†ì ˆì„ í•  íƒ€ì´ë°ì´ê¸°ì— `STOP_LOSS` ì•¡ì…˜ì„ ë¦¬í„´í•œë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ìœ„ 3ê°€ì§€ ê²½ìš°ì— ëª¨ë‘ í•´ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì•„ë¬´ í–‰ë™ë„ ì·¨í•˜ì§€ ì•Šì•„ì•¼ í•˜ë¯€ë¡œ, `STAY` ì•¡ì…˜ì„ ë¦¬í„´í•œë‹¤.

ì•¡ì…˜ì„ ë¦¬í„´ ë°›ì•˜ë‹¤ë©´, ì´ì— ë”°ë¼ ë§¤ë§¤ë¥¼ ì§„í–‰í•œë‹¤. ìì„¸í•œ ë©”ì„œë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```java
    // ë§¤ìˆ˜ ì²˜ë¦¬ ë©”ì„œë“œ
    private void executeBuy(String action, LocalDateTime currentDate, Double currentPrice, List<BackTestingDto.BackTestingResult> backTestingResults) {
        coin = coin.add(BigDecimal.valueOf(tradingUnit).divide(BigDecimal.valueOf(currentPrice), 10, RoundingMode.HALF_UP));
        capital -= tradingUnit;

        backTestingResults.add(BackTestingDto.BackTestingResult.of(currentDate, action, currentPrice, coin, capital, 0.0, 0L, null));
    }

    // ìµì ˆ ì²˜ë¦¬ ë©”ì„œë“œ
    private void executeSell(String action, LocalDateTime currentDate, Double currentPrice, List<BackTestingDto.BackTestingResult> backTestingResults) {
        Long initialCapital = capital + tradingUnit * buyingCnt;
        capital += (BigDecimal.valueOf(currentPrice).multiply(coin)).longValue();
        coin = BigDecimal.ZERO;
        Long income = capital - initialCapital;
        Double rate = ((double) income / initialCapital) * 100;

        backTestingResults.add(BackTestingDto.BackTestingResult.of(currentDate, action, currentPrice, coin, capital, rate, income, currentDate.compareTo(startDate)));
    }

    // ì†ì ˆ ì²˜ë¦¬ ë©”ì„œë“œ
    private void executeStopLoss(String action, LocalDateTime currentDate, Double currentPrice, List<BackTestingDto.BackTestingResult> backTestingResults) {
        Long initialCapital = capital + tradingUnit * buyingCnt;
        capital += (BigDecimal.valueOf(currentPrice).multiply(coin)).longValue();
        coin = BigDecimal.ZERO;
        Long income = capital - initialCapital;
        Double rate = ((double) income / initialCapital) * 100;

        backTestingResults.add(BackTestingDto.BackTestingResult.of(currentDate, action, currentPrice, coin, capital, rate, income, currentDate.compareTo(startDate)));
    }
```

ë§¤ìˆ˜ë¥¼ í•  ë•ŒëŠ” í˜„ì¬ ê°€ê²©ë§Œí¼ í˜„ì¬ ìë³¸ì—ì„œ ë¹¼ì¤€ë‹¤. ê·¸ë¦¬ê³  ë¹„íŠ¸ì½”ì¸ ê°œìˆ˜ë¥¼ ê³„ì‚°í•˜ì—¬ ë”í•´ì¤€ë‹¤.

ìµì ˆ ë° ì†ì ˆì„ í•  ë•Œì—ëŠ” ì¼ê´„ì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ëª¨ë“  ë¹„íŠ¸ì½”ì¸ì„ íŒë§¤í•˜ê²Œ ëœë‹¤. 
ë•Œë¬¸ì— `í˜„ì¬ ê°€ê²© * ë¹„íŠ¸ì½”ì¸` ê°œìˆ˜ë¥¼ í˜„ì¬ ìë³¸ì— ë”í•´ì¤€ë‹¤. 
ê·¸ë¦¬ê³  ë¹„íŠ¸ì½”ì¸ì€ ë‹¤ì‹œ 0ê°œë¡œ ì´ˆê¸°í™”í•œë‹¤.

ì´ëŸ¬í•œ ê³¼ì •ë“¤ì„ í†µí•´ ë°±í…ŒìŠ¤íŒ…ì´ ëª¨ë‘ ì™„ë£Œê°€ ë˜ì—ˆë‹¤ë©´, ì´ì œ ê±°ë˜ ë¡œê·¸ê°€ ìŒ“ì—¬ ìˆì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì´ ë¡œê·¸ë§Œ ë³´ì—¬ì¤€ë‹¤ê³  í•´ì„œ ìœ ì €ê°€ ì„±ëŠ¥ì„ íŒŒì•…í•˜ê¸°ëŠ” ì‰½ì§€ ì•Šê¸° ë•Œë¬¸ì—, ìœ ì˜ë¯¸í•œ ì§€í‘œ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ ì¤„ í•„ìš”ê°€ ìˆë‹¤.

ì´ë¥¼ ìœ„í•´ ì•„ë˜ ë©”ì„œë“œë¥¼ í†µí•´ ê²°ê³¼ ì§‘ê³„ë¥¼ ì§„í–‰í•˜ë©° ë‹¤ì–‘í•œ ì§€í‘œë“¤ì„ ê³„ì‚°í•˜ê²Œ ëœë‹¤.

```java
   // ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ë¥¼ ì§‘ê³„í•˜ëŠ” ë©”ì„œë“œ
    public BackTestingDto.BackTestingResponse collectResults(List<BackTestingDto.BackTestingResult> backTestingResults, Long capital) {
        Double initialCapital = Double.parseDouble(String.valueOf(capital));
        Long finalCapital = backTestingResults.get(backTestingResults.size() - 1).getCapital();
        List<BackTestingDto.TradingLog> tradingLogs = new ArrayList<>();
        positiveTradeCount = 0;
        negativeTradeCount = 0;
        tradingPeriodSum = 0;
        positiveRatioSum = 0.0;
        negativeRatioSum = 0.0;
        highValueStrategy = 0L;
        lowValueStrategy = 1_000_000_000L;
        highLossValueStrategy = 0L;

        // ê±°ë˜ ê²°ê³¼ ì§‘ê³„
        calculateTradeStats(backTestingResults, tradingLogs);

        // ê±°ë˜ íŒŒíŠ¸ ìƒì„±
        BackTestingDto.Trading trading = createTradingPart(capital, finalCapital);

        // ì„±ëŠ¥ íŒŒíŠ¸ ìƒì„±
        BackTestingDto.Performance performance = createPerformancePart(initialCapital, finalCapital);

        return BackTestingDto.BackTestingResponse.builder()
                .trading(trading)
                .performance(performance)
                .tradingLogs(tradingLogs)
                .build();
    }

    // ê±°ë˜ ê²°ê³¼ ì§‘ê³„ ë©”ì„œë“œ
    private void calculateTradeStats(List<BackTestingDto.BackTestingResult> backTestingResults, List<BackTestingDto.TradingLog> tradingLogs) {
        for (BackTestingDto.BackTestingResult backTestingResult : backTestingResults) {
            if (!backTestingResult.getAction().equals("BUY")) {
                Long income = backTestingResult.getIncome();
                // ì´ìµì¸ ê²½ìš°
                if (income > 0) {
                    positiveTradeCount++;
                    positiveRatioSum += backTestingResult.getRate();
                    highValueStrategy = Math.max(highValueStrategy, income);
                    lowValueStrategy = Math.min(lowValueStrategy, income);
                }
                // ì†í•´ì¸ ê²½ìš°
                else {
                    negativeTradeCount++;
                    negativeRatioSum += backTestingResult.getRate();
                    highLossValueStrategy = Math.min(highLossValueStrategy, income);
                }
                tradingPeriodSum += backTestingResult.getTradingPeriod();
            }

            // ê±°ë˜ ë¡œê·¸ ìƒì„±
            tradingLogs.add(createTradingLog(backTestingResult));
        }
    }

    // ê±°ë˜ íŒŒíŠ¸ ìƒì„± ë©”ì„œë“œ
    private BackTestingDto.Trading createTradingPart(Long capital, Long finalCapital) {
        int totalTradeCount = positiveTradeCount + negativeTradeCount;
        int averageTradePeriod = (int) Math.ceil((double) tradingPeriodSum / totalTradeCount);
        Double averagePositiveTrade = positiveTradeCount != 0 ? numberUtil.round(positiveRatioSum / positiveTradeCount, 2) : 0.0;
        Double averageNegativeTrade = negativeTradeCount != 0 ? numberUtil.round(negativeRatioSum / negativeTradeCount, 2) : 0.0;

        return BackTestingDto.Trading.builder()
                .initialCapital(capital)
                .finalCapital(finalCapital)
                .totalTradeCount(totalTradeCount)
                .positiveTradeCount(positiveTradeCount)
                .negativeTradeCount(negativeTradeCount)
                .averageTradePeriod(averageTradePeriod)
                .averagePositiveTrade(averagePositiveTrade)
                .averageNegativeTrade(averageNegativeTrade)
                .build();
    }

    // ì„±ëŠ¥ íŒŒíŠ¸ ìƒì„± ë©”ì„œë“œ
    private BackTestingDto.Performance createPerformancePart(Double initialCapital, Long finalCapital) {
        int totalTradeCount = positiveTradeCount + negativeTradeCount;
        Double totalRate = numberUtil.round(((finalCapital - initialCapital) / initialCapital) * 100, 2);
        Double winRate = positiveTradeCount != 0 ? numberUtil.round((double) positiveTradeCount / totalTradeCount * 100, 2) : 0.0;
        Double lossRate = negativeTradeCount != 0 ? numberUtil.round((double) negativeTradeCount / totalTradeCount * 100, 2) : 0.0;
        Double winLossRatio = negativeTradeCount != 0 ? numberUtil.round((double) positiveTradeCount / negativeTradeCount * 100, 2) : 0.0;

        return BackTestingDto.Performance.builder()
                .totalRate(totalRate)
                .winRate(winRate)
                .lossRate(lossRate)
                .winLossRatio(winLossRatio)
                .highValueStrategy(highValueStrategy)
                .lowValueStrategy(lowValueStrategy)
                .highLossValueStrategy(highLossValueStrategy)
                .build();
    }

    // ê±°ë˜ ë¡œê·¸ ìƒì„± ë©”ì„œë“œ
    private BackTestingDto.TradingLog createTradingLog(BackTestingDto.BackTestingResult backTestingResult) {
        Double rate = numberUtil.round(backTestingResult.getRate(), 2);
        backTestingResult.updateRate(rate);

        return BackTestingDto.TradingLog.of(backTestingResult);
    }
```

ì„¤ëª…ì´ ë„ˆë¬´ ê¸¸ì–´ì§€ê¸°ì— ìƒì„¸í•œ ì„¤ëª…ì€ ìƒëµí•˜ë„ë¡ í•˜ê² ë‹¤.

![](https://velog.velcdn.com/images/hsh111366/post/5adcd648-b6d3-47a6-8c97-6174308ad076/image.png)

ê²°ê³¼ì ìœ¼ë¡œ ìœ„ì™€ ê°™ì€ ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ í™”ë©´ì„ êµ¬ì„±í•  ì§€í‘œë“¤ì„ ê³„ì‚°í•˜ê²Œ ëœë‹¤.

í¬ê²ŒëŠ” ì´ëŸ¬í•œ ë¡œì§ìœ¼ë¡œ ë°±í…ŒìŠ¤íŒ… ê¸°ëŠ¥ì„ êµ¬í˜„ ì™„ë£Œí–ˆë‹¤.
ì•„ë‹ˆ, ì™„ë£Œí–ˆë‹¤ê³  ë³´ê¸°ëŠ” í˜ë“¤ë‹¤.. ì™„ì „íˆ ìˆ˜í•™ì ì¸ ê³„ì‚°ì´ê¸° ë•Œë¬¸ì— ì½”ë“œê°€ í•˜ë‚˜ë¼ë„ ì˜ëª» ì íˆê²Œ ë˜ë©´ ì•„ì˜ˆ ë‹¤ë¥¸ ê²°ê³¼ê°€ ë‚˜ì˜¤ê¸°ë„ í–ˆê³ , ìˆ«ìì™€ ê´€ë ¨ëœ ì—ëŸ¬ë„ ë§ì´ ë°œìƒí–ˆë‹¤.

ë•Œë¬¸ì— ê°œë°œì„ ì§„í–‰í•˜ë©´ì„œ ê³„ì†í•´ì„œ ìˆ˜ì •ì„ ì§„í–‰í–ˆë˜ ê²ƒ ê°™ë‹¤.

ê¹¡êµ¬í˜„ì´ì—ˆê¸° ë•Œë¬¸ì—, ë‚´ê°€ êµ¬í˜„í•œ ì½”ë“œê°€ ì ì ˆí•œ ê³„ì‚°ë²•ì¸ì§€ì— ëŒ€í•œ ì˜ë¬¸ë„ ë‚¨ì•„ ìˆë‹¤. í•˜ì§€ë§Œ í™•ì‹¤íˆ ì²˜ìŒì— ì½”ë“œë¥¼ ì§°ì„ ë•Œë³´ë‹¤ëŠ” ë§ì´ ê°œì„ ë˜ì—ˆìŒì€ í™•ì‹¤í•˜ë‹¤.

íŠ¹íˆ `BigDecimal` íƒ€ì…ì„ ì ìš©í•˜ì—¬ ìˆ˜ìµë¥ ì„ ë” ì˜¬ë¦´ ìˆ˜ ìˆì—ˆë‹¤.
ë¹„íŠ¸ì½”ì¸ì˜ ê²½ìš°ì—ëŠ” ê°€ê²©ì´ êµ‰ì¥íˆ í¬ê¸° ë•Œë¬¸ì— (ê°œë‹¹ ëª‡ì²œë§Œì› ê¼´), ë§¤ìˆ˜ë¥¼ ì§„í–‰í•  ë•Œ ë³´í†µ ë¹„íŠ¸ì½”ì¸ ê°œìˆ˜ê°€ ì†Œìˆ«ì ìœ¼ë¡œ í‘œí˜„ì´ ëœë‹¤.

ì›ë˜ëŠ” ì´ë¥¼ `Double` ë¡œ í•˜ì˜€ì§€ë§Œ, ê·¸ë ‡ê²Œ ë˜ë©´ ëˆ„ë½ë˜ëŠ” ì½”ì¸ì˜ ê°œìˆ˜ê°€ ë°œìƒí•˜ê²Œ ë˜ê³  ì´ë“¤ì´ ìŒ“ì¸ë‹¤ë©´ ê½¤ë‚˜ í° ê¸ˆì•¡ì´ ë  ìˆ˜ ìˆìŒì„ ì¸ì§€í•˜ì˜€ë‹¤.

ë•Œë¬¸ì— ì½”ì¸ì„ ê³„ì‚°í•  ë•Œì—ëŠ” `BigDecimal` íƒ€ì…ì„ í™œìš©í•´ ë³´ëŠ” ê²½í—˜ë„ í•˜ì˜€ë‹¤. 
ì •í™•í•œ ê³„ì‚°ì„ í•˜ê³  ì‹¶ì–´ì„œ ìˆ«ìë¥¼ ëª¨ë‘ `BigDecimal` ë¡œ ë°”ê¾¸ê¸°ë„ í–ˆëŠ”ë°... ê·¸ë ‡ê²Œ í•˜ë‹ˆ ê¸°ì¡´ì— ë¹„í•´ ì„±ëŠ¥ì´ ë„ˆë¬´ ëŠë ¤ì ¸ì„œ ë‹¤ì‹œ ë°”ê¾¸ëŠë¼ ì• ë¨¼ ì‹œê°„ì„ ë‚ ë¦¬ê¸°ë„ í–ˆë‹¤ ğŸ¥²

ì°¾ì•„ë³´ë‹ˆ `BigDecimal` ê°ì²´ëŠ” ë³´ë‹¤ ì •ë°€í•œ ìˆ«ì ì •ë³´ë¥¼ ì €ì¥í•´ì•¼í•˜ë¯€ë¡œ í° ë©”ëª¨ë¦¬ ê³µê°„ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ ê¸°ë³¸ ìë£Œí˜•ì— ë¹„í•´ ì„±ëŠ¥ì´ ëŠë¦¬ë‹¤ê³  í•œë‹¤! ì‚¬ì‹¤ ë‹¹ì—°í•œ ê±´ë° ê·¸ë•ŒëŠ” ë³„ ìƒê°ì´ ì—†ì—ˆë˜ ê²ƒ ê°™ë‹¤...

êµ¬í˜„í•˜ê³  ìˆ˜ì •í•˜ëŠë¼ ëˆˆì´ ë¹ ì§ˆ ë»” ğŸ‘€ í•œ ì ì´ í•œ ë‘ë²ˆì´ ì•„ë‹ˆì§€ë§Œ ê·¸ë˜ë„ ê¸°ëŠ¥ì„ ì§ì ‘ ë§Œë“¤ì—ˆë‹¤ëŠ” ì , ìƒˆë¡œìš´ íƒ€ì…ì„ í™œìš©í•´ë³´ì•˜ë‹¤ëŠ” ì  ë“±ì€ ë¿Œë“¯í–ˆë‹¤!

> ğŸ§‘ğŸ»â€ğŸ’» ë©˜í† ë‹˜ê»˜ì„œ `BigDecimal` íƒ€ì…ì— ëŒ€í•œ ì–¸ê¸‰ì„ í•´ì£¼ì…”ì„œ ì‚¬ìš©ì„ í•´ ë³¼ ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤. `BigDecimal`ì€ ì •ë°€í•œ ê³„ì‚°ì—ì„œ í•„ìš”í•˜ê¸°ì— ì€í–‰ê³¼ ê°™ì€ ê¸ˆìœµ ì„œë¹„ìŠ¤ì—ì„œ ìì£¼ ì‚¬ìš©í•  ê²ƒ ê°™ë‹¤. ì‹¤ì œ í˜„ì—…ì—ì„œëŠ” ì–´ë–»ê²Œ í™œìš©í•˜ê³  ìˆê³ , ëŠë¦° ì„±ëŠ¥ì„ ê°œì„ í•˜ê¸° ìœ„í•´ì„œ ì–´ë–»ê²Œ í•˜ê³  ìˆëŠ”ì§€ ê¶ê¸ˆí•˜ë‹¤!

### 4) ë³´ì•ˆì„±1 : ì¿ í‚¤ ì‚¬ìš©


![](https://velog.velcdn.com/images/hsh111366/post/fa555668-3402-49c7-b12c-cfb8a701bc52/image.png)

í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì†Œì…œ ë¡œê·¸ì¸ (êµ¬ê¸€, ë„¤ì´ë²„, ì¹´ì¹´ì˜¤)ë¥¼ í™œìš©í•´ ë¡œê·¸ì¸ ë° íšŒì›ê°€ì…ì„ êµ¬í˜„í–ˆë‹¤. 
ì•¡ì„¸ìŠ¤ í† í°ì€ ë¡œê·¸ì¸ ì„±ê³µ ì‹œ í”„ë¡ íŠ¸ì—”ë“œë¡œ ë³´ë‚´ì£¼ì–´ ê´€ë¦¬í•˜ê²Œ ë˜ì§€ë§Œ, ë¦¬í”„ë ˆì‰¬ í† í°ì˜ ê´€ë¦¬ê¹Œì§€ ë§¡ê¸°ê¸°ì—ëŠ” ë¬´ë¦¬ê°€ ìˆì—ˆë‹¤.

ë•Œë¬¸ì— ë¦¬í”„ë ˆì‰¬ í† í°ì€ ì¿ í‚¤ì— ë‹´ì•„ ê´€ë¦¬ë¥¼ ì§„í–‰í•˜ë©° í¸ë¦¬ì„± ë° ë³´ì•ˆì„±ì„ ë†’ì´ê³ ì í–ˆë‹¤.
ë˜í•œ í† í° íƒˆì·¨ ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•œ ë°©ì§€ë„ ê³ ë ¤í•˜ì—¬ êµ¬í˜„í•˜ì˜€ë‹¤.

ì´ì— ëŒ€í•´ì„œëŠ” ì•„ë˜ ë¸”ë¡œê·¸ ê¸€ì„ ë§ì´ ì°¸ê³ í•˜ì˜€ë‹¤.

(ë§í¬ : https://mgyo.tistory.com/832)

### 5) ë³´ì•ˆì„±2 : ì—…ë¹„íŠ¸ í‚¤ ì•”í˜¸í™”

![](https://velog.velcdn.com/images/hsh111366/post/8e9d42f5-1d33-4cad-bb40-d422fb742e59/image.png)

ì„œë¹„ìŠ¤ì—ì„œ ìë™ë§¤ë§¤ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì‚¬ìš©ìì˜ ì—…ë¹„íŠ¸ í‚¤ (ì•¡ì„¸ìŠ¤, ì‹œí¬ë¦¿)ì„ ë°›ì•„ì„œ ì´ìš©í•´ì•¼ í–ˆë‹¤. í•˜ì§€ë§Œ ì´ëŠ” ê°œì¸ì •ë³´ì´ê¸°ì— íƒˆì·¨ë‹¹í•œë‹¤ë©´ í° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ë•Œë¬¸ì— í‚¤ ë“±ë¡ ì‹œì—, ì•”í˜¸í™”ë¥¼ ì§„í–‰í•œ í›„ì— DBì— ì €ì¥í•˜ëŠ” ë°©ì‹ì„ ê²°ì •í–ˆë‹¤.

ìˆœì„œëŠ” ìœ„ì— ìˆëŠ” ê²ƒê³¼ ê°™ê³ , í¼ë¸”ë¦­ í‚¤ë¡œ ì•”í˜¸í™”ë¥¼ ì§„í–‰í•œ í›„ì— í‚¤ë“¤ì„ DBì— ì €ì¥í•œë‹¤.

ê·¸ë¦¬ê³  í”„ë¼ì´ë¹— í‚¤ë„ ì €ì¥ì„ í•´ì•¼ í•˜ëŠ”ë°, ë§Œì•½ ì´ í”„ë¼ì´ë¹— í‚¤ë„ íƒˆì·¨ë¥¼ ë‹¹í•œë‹¤ë©´ ì—…ë¹„íŠ¸ í‚¤ë¥¼ ë³µí˜¸í™”í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ëŒ€ì¹­í‚¤ë¡œ í”„ë¼ì´ë¹— í‚¤ë¥¼ ì•”í˜¸í™” í•œ í›„ì— DBì— ì €ì¥í–ˆë‹¤.

ì—…ë¹„íŠ¸ API ì‚¬ìš©ì„ ìœ„í•´ í‚¤ë¥¼ DBì—ì„œ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ìœ„ì˜ ê³¼ì •ì„ ë°˜ëŒ€ë¡œ ì§„í–‰í•˜ì—¬ í‚¤ê°’ë“¤ì„ ì–»ì€ í›„ì—, í†µì‹ ìš© JWT í† í°ì„ ë°œê¸‰í•´ì„œ í†µì‹ ì„ ì§„í–‰í–ˆë‹¤.

ì•”í˜¸í™”/ë³µí˜¸í™”ëŠ” ì´ë²ˆ í•™ê¸° ë„¤íŠ¸ì›Œí¬ë³´ì•ˆ ìˆ˜ì—…ì„ ë“¤ìœ¼ë©´ì„œ ì²˜ìŒ ì•Œê²Œ ëœ ê²ƒì´ë¼..ì¡°ê¸ˆ ë¯¸ìˆ™í•˜ê²Œ êµ¬í˜„í•œ ê²ƒ ê°™ê¸°ëŠ” í•˜ë‹¤ ğŸ˜‚

> ğŸ§‘ğŸ»â€ğŸ’» íŒ¨ìŠ¤ì›Œë“œ ê´€ë¦¬ ê°™ì€ ê²ƒë“¤ì€ í•´ì‹œë¥¼ ì‚¬ìš©í•´ì„œ, ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¡œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì€ë°.. ì´ë ‡ê²Œ ì›ë³¸ í‚¤ ê°’ì„ ë‹¤ì‹œ í™•ì¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ì„œëŠ” ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì•”í˜¸í™”ë¥¼ ì§„í–‰í•˜ëŠ”ì§€ê°€ ê¶ê¸ˆí•˜ë‹¤..!

### 6) ë”¥ëŸ¬ë‹ ì—°ë™

ë”¥ëŸ¬ë‹ ì—°ë™í•˜ëŠ” ê²ƒë„ ê±°ì˜ ë§‰ë°”ì§€ì— ê²¨ìš° ì„±ê³µì„ í–ˆë˜ ê²ƒ ê°™ë‹¤...

ë©”ì¸ ê¸°ëŠ¥ë“¤ êµ¬í˜„í•˜ëŠ” ë°ì—ë„ ì‰½ì§€ ì•Šì•˜ì–´ì„œ, ë”¥ëŸ¬ë‹ íŒŒíŠ¸ íŒ€ì›ë¶„ì´ ë„˜ê²¨ ì£¼ì‹  ì½”ë“œë¥¼ ë³´ê³  ì´í•´ë¥¼ ì–´ëŠ ì •ë„ í•œ ë’¤ì— êµ¬í˜„ì„ í–ˆë‹¤.

Flaskë¥¼ í™œìš©í•´ì„œ ë”¥ëŸ¬ë‹ ê°€ê²© ì˜ˆì¸¡ ê²°ê³¼ ì¡°íšŒ APIë¥¼ ë§Œë“¤ì—ˆê³ , ì´ë¥¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ 12ì‹œì— í˜¸ì¶œí•˜ë©° ìƒˆë¡œìš´ ê°€ê²© ì˜ˆì¸¡ ê°’ì„ ë°›ì•˜ë‹¤. ë¡œì§ì€ ì•„ë˜ì™€ ê°™ë‹¤.

1ï¸âƒ£ ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§¤ì¼ 12ì‹œë§ˆë‹¤, ë”¥ëŸ¬ë‹ ì„œë²„ APIë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤. 
ì´ ë•Œ, DBì— ì €ì¥ë˜ì–´ ìˆëŠ” ë¹„íŠ¸ì½”ì¸ ê°€ê²© ë°ì´í„°ë¥¼ ë³´ë‚´ì£¼ì—ˆê³  ì´ëŠ” ë‹¹ì¼ê¹Œì§€ ë°˜ì˜í•˜ì—¬ ìƒˆë¡­ê²Œ ì—…ë°ì´íŠ¸ í•œ í›„ ë³´ë‚´ì¤€ë‹¤.

2ï¸âƒ£ ë°›ì€ ë¹„íŠ¸ì½”ì¸ ë°ì´í„°ë¥¼ í†µí•´ì„œ ë² ì´ìŠ¤ ëª¨ë¸ í•™ìŠµì„ ì§„í–‰í•œ í›„ì—, ìƒˆë¡œìš´ ê°€ì¤‘ì¹˜ë¥¼ ì €ì¥í•œë‹¤. 

3ï¸âƒ£ ìƒˆë¡œìš´ ê°€ì¤‘ì¹˜ë¥¼ ê°€ì§€ê³  ì•ìœ¼ë¡œ 5ì¼ê°„ì˜ ë¹„íŠ¸ì½”ì¸ ì¢…ê°€ ì˜ˆì¸¡ê°’ì„ ë§Œë“¤ì–´ ë‚¸ë‹¤.

4ï¸âƒ£ ì˜ˆì¸¡ ë°ì´í„°ë¥¼ ë°±ì—”ë“œ ì„œë²„ë¡œ ë°˜í™˜í•œë‹¤.

5ï¸âƒ£ ì˜ˆì¸¡ ë°ì´í„°ë¥¼ DBì— ì €ì¥í•˜ì—¬, í”„ë¡ íŠ¸ì—”ë“œ ì¸¡ì—ì„œ ì¡°íšŒí•  ì‹œ ë°˜í™˜í•œë‹¤.

> ğŸ§‘ğŸ»â€ğŸ’» Flaskë„ ê±°ì˜ ì•ˆì¨ë´¤ëŠ”ë° ì–´ì©Œë‹¤ ë³´ë‹ˆ ì°½ì—… ë™ì•„ë¦¬ ë•Œë¶€í„° 2ë²ˆì§¸ ì‚¬ìš©í•˜ê³  ìˆë‹¤. 
API êµ¬í˜„ ìì²´ëŠ” í¬ê²Œ ì–´ë µì§€ ì•Šì•„ì„œ ë‹¤í–‰ì´ì—ˆëŠ”ë°, ì—¬ê¸°ì„œë„ ë°ì´í„° íƒ€ì… ë•Œë¬¸ì— ì• ë¥¼ ì¢€ ë¨¹ì—ˆë‹¤.. ê·¸ë˜ì„œ `ì§ë ¬í™” & ì—­ì§ë ¬í™”`ë¥¼ ê³µë¶€í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤!
ê·¸ë¦¬ê³  ë”¥ëŸ¬ë‹ ì½”ë“œë¥¼ ëŒì•„ê°€ê²Œ í•´ ë³¸ ê²ƒë„ ê±°ì˜ ì²˜ìŒì´ì—ˆì–´ì„œ, ì‹ ê¸°í•˜ê³  ì¬ë¯¸ìˆì—ˆë‹¤! ğŸ™ƒ


### 7) ì „ì—­ ì—ëŸ¬ì²˜ë¦¬

ì˜ˆì „ì—ëŠ” ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•  ë•Œ ê·¸ëƒ¥ ResponseEntityë¥¼ ë°”ë¡œ ë§Œë“¤ì–´ì„œ ë°˜í™˜í•˜ê³ ëŠ” í–ˆì—ˆëŠ”ë°, ë­”ê°€ ì¡°ê¸ˆ ë” ì •í•´ì§„ ë°©ì‹ì´ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì„ í–ˆë‹¤.

ê·¸ë˜ì„œ ê¸°ì¡´ì— ì‚¬ìš©í•˜ê³  ìˆë˜ ApiResponseë¥¼ í™œìš©í•´ì„œ ì‘ë‹µ í¬ë§·ì„ í†µì¼í•´ë³´ê¸°ë¡œ í•˜ì˜€ë‹¤.
ì•„ë˜ì—ì„œëŠ” ì—ëŸ¬ë¥¼ ë˜ì§€ê³  ì²˜ë¦¬í•˜ëŠ” ìˆœì„œëŒ€ë¡œ í•œ ë²ˆ ì„¤ëª…í•´ë³´ë„ë¡ í•˜ê² ë‹¤!

#### ì„œë¹„ìŠ¤ ë¡œì§

```java
	// ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ë¥¼ ì €ì¥í•˜ëŠ” ë©”ì„œë“œ
    @Override
    @Transactional
    public void saveBackTestingResult(String authorizationHeader, BackTestingDto.SavingRequest savingRequest) {
        User user = jwtUtil.getUserFromHeader(authorizationHeader);

        Portfolio portfolio = portfolioRepository.findByPortfolioId(savingRequest.getPortfolioId())
                .orElseThrow(() -> new PortfolioException(PortfolioErrorResult.NOT_FOUND_PORTFOLIO));

        // ì´ë¯¸ ì €ì¥ëœ í¬íŠ¸í´ë¦¬ì˜¤ì¸ ê²½ìš°
        if (portfolio.getIsSaved()) {
            throw new PortfolioException(PortfolioErrorResult.IS_ALREADY_SAVED);
        }

        // í¬íŠ¸í´ë¦¬ì˜¤ ì €ì¥ ì²˜ë¦¬
        portfolio.savePortfolio(savingRequest.getComment());
        portfolioRepository.save(portfolio);
    }
```

ë§Œì•½ì— ì´ë ‡ê²Œ ì„œë¹„ìŠ¤ ë¡œì§ì´ ìˆì„ ë•Œ, í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ì°¾ì§€ ëª»í•˜ë©´ ì§€ì •í•´ ë‘” ì—ëŸ¬ë¥¼ ë˜ì§€ê²Œ ëœë‹¤.
ì—ëŸ¬ë¥¼ ë˜ì§€ê¸°ë§Œ í•œë‹¤ê³  ì²˜ë¦¬ê°€ ë˜ì§€ëŠ” ì•Šê¸°ì—, ì´ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬í•´ ì¤„ ë‹¤ë¥¸ ë¡œì§ì´ í•„ìš”í•˜ë‹¤.

#### GlobalExceptionHandler

```java
package org.dgu.backend.exception;

import lombok.extern.slf4j.Slf4j;
import org.dgu.backend.common.ApiResponse;
import org.dgu.backend.common.code.BaseErrorCode;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.MissingRequestHeaderException;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;
import org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;

@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler extends ResponseEntityExceptionHandler {

    // Token
    @ExceptionHandler(TokenException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleTokenException(TokenException e) {
        TokenErrorResult errorResult = e.getTokenErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Header
    @ExceptionHandler(MissingRequestHeaderException.class)
    public ResponseEntity<String> handleMissingHeaderException(MissingRequestHeaderException ex) {
        String errorMessage = "Required header '" + ex.getHeaderName() + "' is missing";
        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(errorMessage);
    }
    // User
    @ExceptionHandler(UserException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleUserException(UserException e) {
        UserErrorResult errorResult = e.getUserErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Portfolio
    @ExceptionHandler(PortfolioException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handlePortfolioException(PortfolioException e) {
        PortfolioErrorResult errorResult = e.getPortfolioErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // BackTesting
    @ExceptionHandler(BackTestingException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleBackTestingException(BackTestingException e) {
        BackTestingErrorResult errorResult = e.getBackTestingErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Number
    @ExceptionHandler(NumberException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleNumberException(NumberException e) {
        NumberErrorResult errorResult = e.getNumberErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Upbit
    @ExceptionHandler(UpbitException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleUpbitException(UpbitException e) {
        UpbitErrorResult errorResult = e.getUpbitErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Encryption
    @ExceptionHandler(EncryptionException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleEncryptionException(EncryptionException e) {
        EncryptionErrorResult errorResult = e.getEncryptionErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Chart
    @ExceptionHandler(ChartException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleChartException(ChartException e) {
        ChartErrorResult errorResult = e.getChartErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Market
    @ExceptionHandler(MarketException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleMarketException(MarketException e) {
        MarketErrorResult errorResult = e.getMarketErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Candle
    @ExceptionHandler(CandleException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleCandleException(CandleException e) {
        CandleErrorResult errorResult = e.getCandleErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Trading
    @ExceptionHandler(TradingException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handleTradingException(TradingException e) {
        TradingErrorResult errorResult = e.getTradingErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
    // Prediction
    @ExceptionHandler(PredictionException.class)
    public ResponseEntity<ApiResponse<BaseErrorCode>> handlePredictionException(PredictionException e) {
        PredictionErrorResult errorResult = e.getPredictionErrorResult();
        return ApiResponse.onFailure(errorResult);
    }
}
```

ê·¸ë˜ì„œ ì´ë ‡ê²Œ `GlobalExceptionHandler` ë¥¼ êµ¬í˜„í•˜ì—¬ ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤.

`@RestControllerAdvice` ì–´ë…¸í…Œì´ì…˜ì„ ë‘ì—ˆê¸° ë•Œë¬¸ì—, ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì—ëŸ¬ì— ëŒ€í•´ ì²˜ë¦¬ë¥¼ í•´ì¤„ ìˆ˜ ìˆë‹¤. ì¦‰, API ìš”ì²­ì„ í†µí•´ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì— ëŒ€í•´ ëŒ€ì²˜ê°€ ê°€ëŠ¥í•˜ë‹¤.

ì´ì „ì—ëŠ” ì˜ ëª°ë¼ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ ë‹¨ì—ì„œ try-catch êµ¬ë¬¸ì„ ì“°ëŠ” ì¼ë„ ìˆì—ˆëŠ”ë°.. ì˜í•˜ëŠ” ì¹œêµ¬ê°€ ì¡°ì–¸ì„ í•´ì¤˜ì„œ ì´ë ‡ê²Œ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤ ğŸ‘ğŸ»

í•˜ë‚˜ì˜ í•¸ë“¤ëŸ¬ì—ì„œ ëª¨ë“  ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•´ì¤„ ìˆ˜ ìˆìœ¼ë‹ˆ í¸ë¦¬í–ˆë˜ ê²ƒ ê°™ë‹¤!
ì—ëŸ¬ë¥¼ ë°›ì€ í›„ì—ëŠ”, í´ë¼ì´ì–¸íŠ¸ì—ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ `ApiResponse` ë¥¼ ì‚¬ìš©í•´ ë°˜í™˜í•˜ì˜€ë‹¤.

#### ApiResponse

```java
package org.dgu.backend.common;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.Getter;
import lombok.RequiredArgsConstructor;
import org.dgu.backend.common.code.BaseCode;
import org.dgu.backend.common.code.BaseErrorCode;
import org.springframework.http.ResponseEntity;

@Getter
@RequiredArgsConstructor
public class ApiResponse<T> {
    @JsonProperty("is_success")
    private final Boolean isSuccess;
    private final String code;
    private final String message;

    @JsonInclude(JsonInclude.Include.NON_NULL)
    private final T payload;
    public static <T> ResponseEntity<ApiResponse<T>> onSuccess(BaseCode code, T payload) {
        ApiResponse<T> response = new ApiResponse<>(true, code.getReasonHttpStatus().getCode(), code.getReasonHttpStatus().getMessage(), payload);
        return ResponseEntity.status(code.getReasonHttpStatus().getHttpStatus()).body(response);
    }

    public static <T> ResponseEntity<ApiResponse<T>> onSuccess(BaseCode code) {
        ApiResponse<T> response = new ApiResponse<>(true, code.getReasonHttpStatus().getCode(), code.getReasonHttpStatus().getMessage(), null);
        return ResponseEntity.status(code.getReasonHttpStatus().getHttpStatus()).body(response);
    }

    public static <T> ResponseEntity<ApiResponse<T>> onFailure(BaseErrorCode code) {
        ApiResponse<T> response = new ApiResponse<>(false, code.getReasonHttpStatus().getCode(), code.getReasonHttpStatus().getMessage(), null);
        return ResponseEntity.status(code.getReasonHttpStatus().getHttpStatus()).body(response);
    }
}
```

ì—¬ê¸°ì„œ ì²«ë²ˆì§¸, ë‘ë²ˆì§¸ëŠ” ì„±ê³µ ì‹œ ì‘ë‹µ ê°ì²´ë¥¼ êµ¬ì„±í•˜ëŠ” ë¡œì§ì´ë‹¤.
ê·¸ë¦¬ê³  ì„¸ë²ˆì§¸ê°€ ì‹¤íŒ¨í–ˆì„ ë•Œ, ì¦‰ ì—ëŸ¬ë¥¼ ë˜ì§ˆ ë•Œì˜ ë¡œì§ì´ë‹¤. 

![](https://velog.velcdn.com/images/hsh111366/post/c95851df-bde0-4cac-b74c-adba4d3583d1/image.png)

í´ë¼ì´ì–¸íŠ¸ëŠ” ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ ì‘ë‹µì„ ë°›ê²Œ ë˜ë©°,
1) ìƒíƒœ ì½”ë“œ 2) ë©”ì„¸ì§€ 3) ì„±ê³µ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ë˜í•œ ApiResponse ê°ì²´ë¥¼ ResponseEntityë¡œ í•œ ë²ˆ ë” ë§ì•„ì„œ ë³´ë‚´ê¸° ë•Œë¬¸ì—, ì‹¤ì œ HttpStatusë„ ë°˜ì˜ë˜ì–´ ìˆëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤! (í˜„ì¬ 409)

ë‹¤ë§Œ ë‚˜ë„ ì´ ë°©ì‹ì´ `ìƒíƒœ ì½”ë“œë¥¼ ì¤‘ë³µìœ¼ë¡œ ë³´ë‚´ë‹ˆ ë¶ˆí•„ìš”í•œê°€?` ë¼ëŠ” ìƒê°ì´ ë“¤ì–´ì„œ í•œë™ì•ˆ ì„œì¹­ì„ í•´ ë³¸ì ì´ ìˆì—ˆë‹¤.

ì°¾ì•„ ë³´ë‹ˆ 1ê°œë§Œ ì‚¬ìš©ì„ í•˜ê±°ë‚˜, ì•„ë‹ˆë©´ ë‚˜ì²˜ëŸ¼ ì»¤ìŠ¤í…€ + ìƒíƒœ ì½”ë“œê¹Œì§€ ë³´ë‚´ê³  ì‹¶ì–´ 2ê°œë¥¼ ë‹¤ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤ê³  í•œë‹¤. ê·¸ë˜ì„œ ì´ë²ˆì—ëŠ” í›„ìë¥¼ ì„ íƒí•´ì„œ ì§„í–‰í–ˆì—ˆë‹¤!

> ğŸ§‘ğŸ»â€ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ ì¸¡ì— ìµœëŒ€í•œ ë§ì€ ì •ë³´ë¥¼ ì œê³µí•˜ê³ ì ì´ë ‡ê²Œ êµ¬í˜„í–ˆë˜ ê²ƒ ê°™ë‹¤. 
í•˜ì§€ë§Œ ë¶ˆí•„ìš”í•˜ê²Œ ëŠê»´ì§„ë‹¤ë©´ ì‘ë‹µ ê°ì²´ì—ì„œ `code` í•„ë“œë¥¼ ì œê±°í•˜ê±°ë‚˜ `ResponseEntity`ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•´ë„ ì¢‹ì„ ê²ƒ ê°™ë‹¤!

---

# ğŸ† ê²°ê³¼

ìµœì¢… ë°œí‘œ ë•Œê¹Œì§€ ë°œí‘œ ì—°ìŠµë„ ì—´ì‹¬íˆ í•˜ê³ , ì‹œì—° ì˜ìƒ í¸ì§‘ê¹Œì§€ í–ˆê¸°ì—.. ê·¸ë˜ë„ ìƒì„ ë°›ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì€ í–ˆì—ˆë‹¤!

ë‹¤ë§Œ ë„ˆë¬´ ì•„ì‰¬ì› ë˜ ì ì€ ë°œí‘œ ì‹œê°„ì„ ê³ ì‘ ì‹œì—° í¬í•¨ 6ë¶„ ë°–ì— ì£¼ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì´ë‹¤...
íŒ€ì´ 10ê°œê°€ ë„˜ê¸°ì— ì‹œê°„ ìƒ ê·¸ëŸ° ê±¸ ìˆ˜ë„ ìˆê³ , í•™ìƒë“¤ì´ í•˜ëŠ” í”„ë¡œì íŠ¸ì´ê¸°ì— í° ê¸°ëŒ€ë¥¼ í•˜ì§€ ì•Šì•„ì„œ ê·¸ë ‡ê²Œ í•œ ê²ƒì¼ ìˆ˜ë„ ìˆê² ë‹¤. ê·¸ë˜ë„ í•œ í•™ê¸° ë™ì•ˆ ê³ ìƒí•´ì„œ ë§Œë“  í”„ë¡œì íŠ¸ë¥¼ ë°œí‘œí•˜ëŠ” ìë¦¬ì´ë‹ˆ, ì ì–´ë„ í•œ 10ë¶„ì€ ì£¼ë©´ ì¢‹ì§€ ì•Šë‚˜ ì‹¶ë‹¤ ^^

ìš°ë¦¬ ì„œë¹„ìŠ¤ëŠ” ë„ë©”ì¸ì´ ì–´ë ¤ì›Œì„œ ì„¤ëª…í•  ê²ƒë„ ë§ê³ , ê¸°ëŠ¥ì´ ë§ì•„ì„œ ë³´ì—¬ì£¼ê³  ì‹¶ì€ ê²ƒë“¤ë„ ë§ì•˜ëŠ”ë° ì‹œê°„ì´ ì—†ì–´ì„œ ì—„ì²­ë‚˜ê²Œ ë¹ ë¥´ê²Œ ë„˜ì–´ê°”ë˜ ê²ƒ ê°™ë‹¤. ê·¸ë˜ë„ ë°œí‘œ ìì²´ëŠ” í° ë¬¸ì œ ì—†ì´ ì˜ í–ˆë˜ ê²ƒ ê°™ì•„ì„œ í›„ë ¨í–ˆë‹¤!

![](https://velog.velcdn.com/images/hsh111366/post/853c94a8-9df4-430b-84df-68c46b871a52/image.jpeg)


ê·¸ë¦¬ê³  ê²°ê³¼ì ìœ¼ë¡œ 2ë“±ì„ í–ˆë‹¤! ì‚¬ì‹¤ 1ë“±ì„ í•˜ê³  ì‹¶ì—ˆì§€ë§Œ, 1ë“±í•œ íŒ€ì´ ì‚¬ì—…ì„± ê¹Œì§€ ê³ ë ¤ë¥¼ í•´ì„œ ì¢‹ì€ ì ìˆ˜ë¥¼ ë°›ì•˜ë˜ ê²ƒ ê°™ë‹¤ ã…ã…

ê·¸ë˜ë„ ì´ë ‡ê²Œ ì¢‹ì€ ì„±ê³¼ë¥¼ ë‚´ì–´ í•œ í•™ê¸° ë™ì•ˆ ê³ ìƒí•œ ë³´ìƒì„ ë°›ì€ ê²ƒ ê°™ì•„ì„œ í–‰ë³µí–ˆê³ , ë§ì´ ë„ì™€ì£¼ì‹  ë©˜í† ë‹˜ê»˜ë„ ê¸°ë¶„ ì¢‹ê²Œ ë§ì”€ ë“œë¦´ ìˆ˜ ìˆì–´ì„œ ë” ë¿Œë“¯í–ˆë˜ ê²ƒ ê°™ë‹¤! ğŸ™‚

í•¨ê»˜ ì—´ì‹¬íˆ ëê¹Œì§€ ë‹¬ë¦° íŒ€ì›ë“¤ì—ê²Œë„ ë„ˆë¬´ ê³ ë§™ë‹¤ ğŸ‘ğŸ»ğŸ‘ğŸ»
ì–¼ë¥¸ ìƒê¸ˆì„ ë°›ì•„ì„œ ë©˜í† ë‹˜ê³¼ í•¨ê»˜ ë§›ìˆëŠ” ê±¸ ë¨¹ê³  ì‹¶ë‹¤! ğŸ»

---

# ğŸ’¡ ëŠë‚€ ì  & ë°°ìš´ ì 

## 1. ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„

ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„ì€ ì´ë²ˆ í”„ë¡œì íŠ¸ê¹Œì§€ í•´ì„œ ì´ 6ë²ˆì§¸ í•´ ë³´ëŠ” ê²ƒ ê°™ë‹¤!

í•˜ì§€ë§Œ ì‚¬ì‹¤ìƒ ì²« 3ë²ˆì€ êµ¬í˜„í•˜ê¸°ì— ê¸‰ê¸‰í–ˆê¸°ì—, ì´ì œì•¼ ì¡°ê¸ˆì€ ë” ì•Œê²Œ ë˜ì§€ ì•Šì•˜ë‚˜ ì‹¶ë‹¤.
í•˜ë©´ì„œ ëŠë¼ëŠ” ê±°ì§€ë§Œ í• ìˆ˜ë¡ ë” ì–´ë µê³  ë°°ìš°ëŠ” ê²Œ ë§ì€ ê²ƒ ê°™ë‹¤.

ì—¬ëŸ¬ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ë„ ìƒê°í•´ë³´ì•„ì•¼ í•˜ê³ , ê·¸ë˜ì„œ ë³´ì•ˆê³¼ ê´€ë ¨ëœ ê³µë¶€ë„ ë°˜ê°•ì œì ìœ¼ë¡œ ê¾¸ì¤€íˆ í•˜ê²Œ ë˜ëŠ”ë°.. ì—¬ê¸°ì„œ ë°°ìš°ëŠ” ì ì´ ë§ì€ ê²ƒ ê°™ì•„ì„œ ì¢‹ë‹¤ ğŸ‘ğŸ»

ì–´ì°¨í”¼ ì„œë¹„ìŠ¤ì— ìˆì–´ì„œ ë¡œê·¸ì¸ & íšŒì›ê°€ì…ê³¼ ê°™ì€ ì¸ì¦ì¸ê°€ëŠ” ê¸°ë³¸ì´ê¸°ì—, ë‚˜ì—ê²Œ ì¢‹ì€ ê²½í—˜ì´ë¼ê³  ìƒê°ì„ í•œë‹¤!

## 2. ë³´ì•ˆì˜ ì¤‘ìš”ì„±

ìœ„ì—ì„œ ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ ë³´ì•ˆì ì¸ ë¶€ë¶„ì—ì„œ ê³µë¶€ë¥¼ ë” ë§ì´ í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤ê³  ëŠê¼ˆë‹¤.

í”„ë¡œì íŠ¸ë¥¼ ì—¬ëŸ¬ ë²ˆ í•˜ë©´ì„œ ëŠë¼ëŠ” ê±´ë°, ì‚¬ì‹¤ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” `ì–´ë–»ê²Œ ë¬¸ì œ ì—†ì´ ì˜ ëŒì•„ê°€ë„ë¡ ë§Œë“œëŠëƒ`ê°€ ë” ì¤‘ìš”í•˜ê³  ì–´ë ¤ìš´ ê²ƒ ê°™ë‹¤.
ë¬¼ë¡  ì†ë„ë„ ì¤‘ìš”í•˜ì§€ë§Œ, ë””í…Œì¼ì— ë” ì§‘ì°©í•˜ê³  ì‹ ê²½ì„ ì“°ë‹¤ ë³´ë©´ì€ ì¢€ ë” ì¢‹ì€ ê°œë°œìê°€ ë˜ì§€ ì•Šì„ê¹Œ..? í•˜ëŠ” ìƒê°ì´ ìˆë‹¤.

ê·¸ë˜ì„œ ì´ë²ˆì— ë³´ì•ˆì„±ì— ì¡°ê¸ˆ ë” ì‹œê°„ì„ ì¼ë˜ ì ì€ ë‚´ ì„±ì¥ì— í° ì˜ì–‘ë¶„ì´ ë˜ì—ˆë˜ ê²ƒ ê°™ë‹¤! 
í•˜ì§€ë§Œ ì•„ì§ë„ ë©€ì—ˆìœ¼ë‹ˆ... ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ê³µë¶€ë¥¼ ì œëŒ€ë¡œ í•´ì•¼í•  ê²ƒ ê°™ë‹¤ ğŸ˜‚

## 3. DTO

ì´ë²ˆì—ëŠ” ì™”ë‹¤ê°”ë‹¤ í•˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ë‚˜ ê°œìˆ˜ê°€ ë§ì•˜ì–´ì„œ, DTOë¥¼ êµ¬ì„±í•˜ëŠ” ë°ì—ë„ ì¢€ ì‹ ê²½ì„ ì“´ ê²ƒ ê°™ë‹¤.
`of & to` ë©”ì„œë“œë¥¼ í™œìš©í•´ ë³´ê¸°ë„ í•˜ê³ .. ì–´ë–»ê²Œ í•´ì•¼ ê°„ê²°í•˜ê³  í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ê³ ë¯¼ì„ í–ˆë‹¤.

ê·¸ë¦¬ê³  ìˆ«ìë¡œ ëœ ë°ì´í„°ë“¤ì´ ë§ì•˜ê¸°ì—, íƒ€ì…ì„ ë§ì¶”ëŠ” ë°ì—ì„œë„ ë¬¸ì œê°€ ë°œìƒí•œ ì ë„ ê½¤ë‚˜ ìˆì—ˆë‹¤.

`ì§ë ¬í™” & ì—­ì§ë ¬í™”` ... ë¼ëŠ” ê²ƒë„ ì•Œê²Œ ëœì§€ëŠ” ì–¼ë§ˆ ì•ˆë˜ì—ˆëŠ”ë°
ì§ë ¬í™”ëŠ” `DTO -> Json` ë¡œ, ì—­ì§ë ¬í™”ëŠ” `Json -> DTO` ë¡œ ë³€ê²½í•˜ëŠ” ì‘ì—…ì´ë¼ê³  ì´í•´ë¥¼ í•˜ê¸°ëŠ” í–ˆë‹¤! ë¬¼ë¡  ê¼­ DTOë‘ Jsonì€ ì•„ë‹ˆê² ì§€ë§Œ ë§ì´ë‹¤.

> ğŸ§‘ğŸ»â€ğŸ’» ì—…ë¹„íŠ¸ ì™¸ë¶€ APIì—ì„œ ë°›ì€ ì‘ë‹µì„ ë°”ë¡œ DTOë¡œ ë‹´ìœ¼ë ¤ê³  í–ˆëŠ”ë°.. ê·¸ê²Œ ì•ˆë¼ì„œ ì• ë¥¼ ë¨¹ì€ ì ë„ ìˆì—ˆë‹¤. ë¶„ëª… ë ˆí¼ëŸ°ìŠ¤ì— ë‚˜ì™€ ìˆëŠ” íƒ€ì…ëŒ€ë¡œ í•œ ê²ƒ ê°™ì€ë° ì™œ ì•ˆë˜ì§€..? 
ê·¸ë˜ì„œ ì§ë ¬í™” & ì—­ì§ë ¬í™”ì— ëŒ€í•œ ê³µë¶€ë¥¼ ì¢€ ë” í•œë‹¤ë©´ DTOë¥¼ í›¨ì”¬ ì˜ ë‹¤ë£° ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤!

## 4. íŠ¸ë ˆì´ë”© ê´€ë ¨ ì§€ì‹

ë°±í…ŒìŠ¤íŒ…, ë¬¼íƒ€ê¸° ë§¤ë§¤ë²•, ì§€ìˆ˜ê°€ì¤‘ì´ë™í‰ê· , ê³¨ë“  í¬ë¡œìŠ¤ ë“±ë“± ... 
ê³µë¶€í•˜ê³  êµ¬í˜„ë„ í•´ ë³´ê³  ì‹¤ì œë¡œ ìë™ë§¤ë§¤ê¹Œì§€ í•´ ë³´ë‹ˆ ì–´ëŠì •ë„ ì§€ì‹ì´ ìŠµë“ëœ ê²ƒ ê°™ê¸°ëŠ” í•˜ë‹¤! 
ì§€ê¸ˆ ë‹¹ì¥ ë‚˜ì—ê²Œ í•„ìš”í•œ ì§€ì‹ì¸ê°€ë¥¼ ë”°ì ¸ ë³´ì•˜ì„ ë•ŒëŠ” ì•„ë‹ ìˆ˜ ìˆìœ¼ë‚˜, ì–¸ì  ê°€ëŠ” ì§€ê¸ˆì˜ ê²½í—˜ì´ ë„ì›€ì´ ë  ìˆ˜ ìˆìœ¼ë¦¬ë¼ ìƒê°í•œë‹¤ ğŸ™ƒ

## 5. ìº¡ìŠ¤í†¤ ë””ìì¸ (ì€ ë¹¡ì„¸ë‹¤)

ìƒê°ë³´ë‹¤ ë§ì´ í˜ë“¤ì—ˆë˜ ì ì€, ê±°ì˜ ë§¤ì£¼ ë³´ê³ ì„œë¥¼ ì œì¶œí•´ì•¼ í–ˆê³  ë°œí‘œë„ ìì£¼ ìˆì—ˆë‹¤ëŠ” ì ì´ë‹¤.

3ëª…ì´ì„œ ê°œë°œì„ í•˜ëŠ”ë°, í•œ ë¶„ì€ ë”¥ëŸ¬ë‹ì´ì…¨ê¸°ì— ì‚¬ì‹¤ìƒ í”„ë¡ íŠ¸ 1ëª… ë°±ì—”ë“œ 1ëª…ì´ì„œ ì „ë°˜ì ì¸ ê°œë°œì„ ì§„í–‰í–ˆë‹¤.

ë•Œë¬¸ì— ì‹œê°„ì´ ë§ì´ ë¶€ì¡±í–ˆëŠ”ë°.. ê·¸ ì™€ì¤‘ì— ì´ê²ƒì €ê²ƒ ë‹¤ë¥¸ ê²ƒë“¤ë„ ë§ì´ ì‹œí‚¤ë‹ˆê¹Œ ë„ˆë¬´ ì •ì‹ ì´ ì—†ì—ˆë‹¤. 
ê·¸ë˜ë„ ë”¥ëŸ¬ë‹ íŒŒíŠ¸ ë¶„ê»˜ì„œ ê¸°íš ìª½ì„ í•´ë³´ì…¨ê³  ë³´ê³ ì„œë¥¼ ì˜ ì“°ì…”ì„œ ì´ëŸ¬í•œ ë¶€ë¶„ì—ì„œëŠ” ë„ì›€ì„ ë§ì´ ë°›ì€ ê²ƒ ê°™ë‹¤!

ì‚¬ì‹¤ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ìš•ì‹¬ì„ ì¡°ê¸ˆ ì¤„ì´ë©´ ì‰½ê²Œ ê°ˆ ìˆ˜ë„ ìˆëŠ” ê±°ì˜€ëŠ”ë°.. ã…‹ã…‹ã…‹ã…‹ ë‚˜ë‘ í”„ë¡ íŠ¸ ë¶„ì´ë‘ ë‘˜ ë‹¤ ìš•ì‹¬ì´ ì¡°ê¸ˆ ìˆëŠ” í¸ì´ë¼ ë§ˆì§€ë§‰ê¹Œì§€ ê±°ì˜ ë°¤ì„ ìƒˆê°€ë©° ì–´ë–»ê²Œë“  í–ˆë˜ ê²ƒ ê°™ë‹¤. 

ì–´ì°Œëë“  í•œ ë²ˆ ë” í•˜ë¼ë©´ ëª»í•  ê²ƒ ê°™ë‹¤.. ğŸ¤£ğŸ¤£

---

# ğŸ‘‹ğŸ» ë§ˆë¬´ë¦¬

ì´ë ‡ê²Œ ë‚˜ì˜ ë§ˆì§€ë§‰ í•™ê¸°ê°€ ëì´ ë‚¬ë‹¤!
í›„ë ¨í•  ê²¨ë¥¼ë„ ì—†ì´ ë‹¤ë¥¸ ì¼ë“¤ì„ í•˜ëŠë¼ ì •ì‹ ì´ ì—†ì—ˆì§€ë§Œ...
ì´ë ‡ê²Œ ì­‰ ëŒì•„ ë³´ë‹ˆ ë°”ìœ ì¼ì • ì†ì—ì„œë„ ë§Œì¡±í•  ë§Œí•œ ì„±ê³¼ë¥¼ ëƒˆìŒì— ë¿Œë“¯í•¨ì´ ë“œëŠ” ê²ƒ ê°™ë‹¤!

ì•ìœ¼ë¡œë„ ë„ˆë¬´ ì§€ì¹˜ì§€ ì•Šê³  ë‚´ê°€ ì¦ê±°ìš´ ì„ ì—ì„œ ì—´ì‹¬íˆ ê°œë°œì„ ê³µë¶€í•´ ë³´ê³  ì‹¶ë‹¤ ğŸ”¥
