---
date: 2025-05-21
tags:
  - onetime
  - backend
  - perf
  - side-project
---

---

# â° OneTime?

> [ì›íƒ€ì„](https://www.onetime-with-members.com/)ì— ëŒ€í•´ì„œ ê¶ê¸ˆí•˜ë‹¤ë©´ ì•„ë˜ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”!

[â° OneTime ì„œë¹„ìŠ¤ ë°”ë¡œê°€ê¸°](https://www.onetime-with-members.com/)
[ğŸ“ OneTime ì†Œê°œê¸€](https://disquiet.io/product/%EC%9B%90%ED%83%80%EC%9E%84-one-time-l-%EC%9D%BC%EC%A0%95%EC%9D%84-%EC%89%BD%EA%B3%A0-%EB%B9%A0%EB%A5%B4%EA%B2%8C)
[ğŸ§‘ğŸ»â€ğŸ’» GitHub](https://github.com/onetime-with-members)
[ğŸ“¸ Instagram](https://www.instagram.com/one.time.official/)

---

# ğŸ¬ ì„œë¡ 

ì£¼ë³€ì—ì„œ OneTimeì„ ì‚¬ìš©í•˜ëŠ” ì¹œêµ¬ë“¤ì´ `ìš”ì¦˜ ë“¤ì–´ ì›íƒ€ì„ì´ ëŠë ¤ì¡Œë‹¤` ëŠ” ë§ì„ ë§ì´ í–ˆë‹¤ ğŸ¥²
ì²˜ë¦¬ ì†ë„ë¥¼ ë³´ë‹ˆ ì´ëŠ” ì„œë²„ì—ì„œì˜ ë¬¸ì œë¼ê³  ìƒê°ì´ ë“¤ì—ˆê³  ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ DB ì„±ëŠ¥ ìµœì í™”ë¥¼ í•´ë³´ê¸°ë¡œ ê²°ì •í–ˆë‹¤.

ì´ë²ˆ ê¸€ì€ ì´ì— ëŒ€í•œ ë‚´ìš©ìœ¼ë¡œ ì´ì–´ì§„ë‹¤.

---


# ì „ì²´ ìŠ¤ì¼€ì¤„ ì¡°íšŒ API

ì´ì „ì— [ë¡œê¹…ì„ ê°œì„ ](https://velog.io/@hsh111366/Spring-ì¡°ì•…í•œ-ë¡œê¹…-ê°œì„ í•´-ë³´ê¸°)í•˜ë©´ì„œ ê° APIì— ëŒ€í•œ ì²˜ë¦¬ ì†ë„ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. 

```bash
âœ… [GET] {ì—”ë“œí¬ì¸íŠ¸} request completed - 7786ms | status=200
```

ì›íƒ€ì„ì—ì„œ íŠ¹ì • ì´ë²¤íŠ¸ì— ë“¤ì–´ê°€ê²Œ ë˜ë©´ì€, ì°¸ì—¬í•œ ëª¨ë“  ì°¸ì—¬ìë“¤ì˜ ë“±ë¡ ìŠ¤ì¼€ì¤„ì„ ë¶ˆëŸ¬ì˜¤ê²Œ ëœë‹¤. 

ìœ„ëŠ” ì²´ê°ìƒ ë¡œë”©ì´ ê°€ì¥ ì˜¤ë˜ ê±¸ë ¸ë˜ ì´ë²¤íŠ¸ë¡œ, `7786ms` **ì¦‰ 7ì´ˆ ì´ìƒì˜ ì²˜ë¦¬ ì†ë„**ê°€ ê±¸ë¦° ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. 
ì´ëŠ” ì‚¬ìš©ì„±ì— ìˆì–´ì„œ ì‹¬ê°í•œ ë¬¸ì œê°€ ëœë‹¤. ìœ ì €ê°€ ì´ë²¤íŠ¸ì— ì…ì¥í•  ë•Œ 7ì´ˆ ì´ìƒì„ ê¸°ë‹¤ë ¤ì•¼í•˜ê¸° ë•Œë¬¸ì´ë‹¤. 

## ì´ˆê¸° ì„±ëŠ¥ ì¸¡ì •

> **ì„±ëŠ¥ ì¸¡ì • íˆ´ì€ `Grafana K6`ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.**

ë˜í•œ ì•„ë˜ì˜ ì¡°ê±´ì„ ê³ ì •ìœ¼ë¡œ ë‘ì–´ ì¸¡ì •í•˜ì˜€ë‹¤.

>1) 20ëª…ì˜ ë™ì‹œ ì‚¬ìš©ìê°€ í˜¸ì¶œ : `vus: 20`
2) 50ë²ˆ í˜¸ì¶œ ì‹œ ì¢…ë£Œ : `iterations: 50`

ì „ì²´ ìŠ¤ì¼€ì¤„ ì¡°íšŒëŠ” ì²« ì…ì¥ ì‹œ 1ë²ˆë§Œ í˜¸ì¶œ ë˜ê¸°ì— 50ë²ˆë§Œ í˜¸ì¶œí•´ë³´ëŠ” ê²ƒìœ¼ë¡œ ì œí•œí•˜ì˜€ë‹¤.

![](https://velog.velcdn.com/images/hsh111366/post/deec87cd-7e73-4bc2-be6b-c0431af4ade3/image.png)

ì´ˆê¸°ì—ëŠ” í‰ê·  ì‘ë‹µ ì‹œê°„ì´ `18.38s` ë¼ëŠ” ë§¤ìš° ì¢‹ì§€ ì•Šì€ ì„±ëŠ¥ì„ ë³´ì˜€ë‹¤.

ë•Œë¬¸ì— í•´ë‹¹ APIê°€ ê°€ì¥ ë¨¼ì € í•´ê²°í•´ì•¼ í•  ë¶€ë¶„ì´ë¼ê³  ìƒê°ì´ ë“¤ì—ˆê³ , ìš°ì„  ë¬¸ì œë¥¼ íŒŒì•…í•´ë³´ì•˜ë‹¤.

---

# ğŸš¨ ë¬¸ì œ 1 : N+1 ë¬¸ì œ ë°œìƒ

```sql
2025-05-21T19:00:06.192+09:00 DEBUG 49903 --- [nio-8090-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.schedules_id,
        s1_0.created_date,
        s1_0.date,
        s1_0.day,
        s1_0.events_id,
        s1_0.time,
        s1_0.updated_date 
    from
        schedules s1_0 
    where
        s1_0.schedules_id=?
Hibernate: 
    select
        s1_0.schedules_id,
        s1_0.created_date,
        s1_0.date,
        s1_0.day,
        s1_0.events_id,
        s1_0.time,
        s1_0.updated_date 
    from
        schedules s1_0 
    where
        s1_0.schedules_id=?
2025-05-21T19:00:06.192+09:00 TRACE 49903 --- [nio-8090-exec-1] org.hibernate.orm.jdbc.bind              : binding parameter (1:BIGINT) <- [387712]
2025-05-21T19:00:06.199+09:00 DEBUG 49903 --- [nio-8090-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.schedules_id,
        s1_0.created_date,
        s1_0.date,
        s1_0.day,
        s1_0.events_id,
        s1_0.time,
        s1_0.updated_date 
    from
        schedules s1_0 
    where
        s1_0.schedules_id=?
Hibernate: 
    select
        s1_0.schedules_id,
        s1_0.created_date,
        s1_0.date,
        s1_0.day,
        s1_0.events_id,
        s1_0.time,
        s1_0.updated_date 
    from
        schedules s1_0 
    where
        s1_0.schedules_id=?
```

ìœ„ ë¡œê·¸ë¥¼ ë³´ë©´, schedules í…Œì´ë¸”ì—ì„œ ë™ì¼í•œ íŒ¨í„´ì˜ ì¿¼ë¦¬ê°€ ë°˜ë³µì ìœ¼ë¡œ ë°œìƒí•˜ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤. 
ì´ëŠ” N+1 ë¬¸ì œê°€ ë°œìƒí–ˆìŒì„ ë‚˜íƒ€ë‚¸ë‹¤.

```java
Map<String, List<Selection>> groupedSelectionsByDate = member.getSelections().stream()
	.filter(s -> s.getSchedule() != null && s.getSchedule().getDate() != null)
    .collect(Collectors.groupingBy(
    	s -> s.getSchedule().getDate(),
        LinkedHashMap::new,
        Collectors.toList()
   	 ));
```

1.	`member.getSelections()` í˜¸ì¶œ ì‹œì—ëŠ” ì•„ì§ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒê°€ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. ì´ ì‹œì ì—ì„œëŠ” JPAì˜ Lazy í”„ë¡ì‹œ ê°ì²´ë§Œ ë°˜í™˜ëœë‹¤.
2.	í•˜ì§€ë§Œ ì´í›„ .stream().filter(...) ë“±ì˜ ê³¼ì •ì—ì„œ `s.getSchedule()`ì„ í˜¸ì¶œí•˜ê²Œ ë˜ë©´, HibernateëŠ” ê° Selectionì— ëŒ€í•´ Scheduleì„ ê°œë³„ ì¿¼ë¦¬ë¡œ ì¡°íšŒí•˜ê²Œ ëœë‹¤.
3.	ê²°ê³¼ì ìœ¼ë¡œ Selectionì´ 100ê°œë¼ë©´ Scheduleë„ 100ë²ˆ ì¡°íšŒë˜ë©°, ì¿¼ë¦¬ ìˆ˜ê°€ Selection ìˆ˜ë§Œí¼ ì¦ê°€í•˜ëŠ” `N+1 ë¬¸ì œ`ê°€ ë°œìƒí•œë‹¤.

## âœ… í•´ê²° ë°©ì•ˆ : Fetch Join

```sql
    @Query("""
        SELECT s FROM Selection s
        JOIN FETCH s.schedule sc
        WHERE s.member = :member
    """)
    List<Selection> findAllByMemberWithSchedule(@Param("member") Member member);

    @Query("""
        SELECT s FROM Selection s
        JOIN FETCH s.schedule sc
        JOIN FETCH sc.event
        WHERE s.user = :user
    """)
    List<Selection> findAllByUserWithScheduleAndEvent(@Param("user") User user);
```

ê°ê° ë©¤ë²„ì™€ ìœ ì €ì— ëŒ€í•´ì„œ `selections`ê³¼ ì—°ê´€ëœ `schedules` í…Œì´ë¸”ì„ í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ í•¨ê»˜ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ fetch join ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì˜€ë‹¤. 
ìœ ì €ì˜ ê²½ìš°ì—ëŠ” `events` í…Œì´ë¸”ë„ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì´ ë˜í•œ í•¨ê»˜ ê°€ì ¸ì˜¤ë„ë¡ í•˜ì˜€ë‹¤.


## ğŸ“Š ê²°ê³¼

```sql
select
    s1_0.selections_id,
    ...
    s2_0.schedules_id,
    ...
    e1_0.events_id,
    ...
from
    selections s1_0
join
    schedules s2_0
    on s2_0.schedules_id = s1_0.schedules_id
join
    events e1_0
    on e1_0.events_id = s2_0.events_id
where
    s1_0.users_id = ?
```

ì¿¼ë¦¬ ë‚´ì—­ì„ ë³´ë©´, í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ `selections / schedules / events` í…Œì´ë¸”ì„ ëª¨ë‘ ê°€ì ¸ì˜¤ê³  ìˆë‹¤.

![](https://velog.velcdn.com/images/hsh111366/post/46d4bab2-b75f-4436-a242-574db5a1e002/image.png)


ë†€ëê²Œë„ N+1ë¬¸ì œë§Œ í•´ê²°í•˜ì í‰ê·  ì‘ë‹µ ì‹œê°„ì´ `0.35s`ë¡œ ê°œì„ ë˜ì—ˆë‹¤. ë§¤ë²ˆ ì¡°ê¸ˆì”© ì°¨ì´ê°€ ìˆì§€ë§Œ í‰ê· ì ìœ¼ë¡œ `0.3 ~ 0.5ì´ˆ` ì •ë„ë§Œ ì†Œìš”ë˜ì—ˆë‹¤.

ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³  ë”ìš± ê°œì„ í•  ìˆ˜ ìˆë„ë¡ ë‹¤ë¥¸ ë°©ì•ˆë“¤ë„ ì ìš©í•´ ë³´ê¸°ë¡œ ê²°ì •í–ˆë‹¤.

---

# ğŸš¨ ë¬¸ì œ 2 : ì¸ë±ìŠ¤ ë¯¸ì ìš©

[DB ì¸ë±ìŠ¤ì— ëŒ€í•´ì„œëŠ” ìµœê·¼ì— ê³µë¶€](https://velog.io/@hsh111366/DB-Index)ë¥¼ í–ˆê¸° ë•Œë¬¸ì—, ì§€ê¸ˆê¹Œì§€ ì ìš©ì„ í•´ ë³¸ ì ì€ ì—†ì—ˆë‹¤.
í•˜ì§€ë§Œ ê³µë¶€ë¥¼ í•˜ê³  ë‚˜ë‹ˆ, ì™œ ì¸ë±ìŠ¤ë¥¼ ê±¸ì–´ì•¼ í•˜ê³  & í˜„ì¬ DBì—ì„œ ì–´ëŠ ë¶€ë¶„ì— ê±¸ë©´ ì¢‹ì„ì§€ ì–´ëŠì •ë„ ë– ì˜¬ë¦´ ìˆ˜ê°€ ìˆì—ˆë‹¤.

## âœ… í•´ê²° ë°©ì•ˆ 1 : selections í…Œì´ë¸”ì— ì¸ë±ìŠ¤ ê±¸ê¸°

![](https://velog.velcdn.com/images/hsh111366/post/f85fc22b-0b61-4d61-ac7a-9b848f2af307/image.png)

í˜„ì¬ `selections` í…Œì´ë¸”ì€ ìœ ì €ì™€ ë©¤ë²„ì˜ ìŠ¤ì¼€ì¤„ ì„ íƒ ë‚´ì—­ì„ ì €ì¥í•˜ëŠ” **ì¡°íšŒ ì¤‘ì‹¬ í…Œì´ë¸”**ë¡œ ì‚¬ìš©ë˜ê³  ìˆë‹¤.  

INSERTëŠ” ë°œìƒí•˜ì§€ë§Œ, UPDATEë‚˜ DELETEëŠ” ê±°ì˜ ì—†ìœ¼ë©°, API ìš”ì²­ íë¦„ìƒ **ë§¤ìš° ë¹ˆë²ˆí•œ ì¡°íšŒ(read ì—°ì‚°)** ê°€ ë°œìƒí•œë‹¤.

ë”°ë¼ì„œ, `users_id`, `members_id`, `schedules_id` ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ë¥¼ ê±¸ë©´ ì¡°íšŒ ì„±ëŠ¥ì„ íšê¸°ì ìœ¼ë¡œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆê³ , ì“°ê¸° ë¶€í•˜ê°€ ê±°ì˜ ì—†ê¸° ë•Œë¬¸ì— ì¸ë±ìŠ¤ ì˜¤ë²„í—¤ë“œë„ ë¬´ì‹œí•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ì´ë¼ê³  íŒë‹¨ë˜ì—ˆë‹¤.

```sql
CREATE INDEX idx_selections_users_id ON selections(users_id);
CREATE INDEX idx_selections_members_id ON selections(members_id);
CREATE INDEX idx_selections_schedules_id ON selections(schedules_id);
```

ìœ„ DDLì„ í†µí•´ì„œ ì¸ë±ìŠ¤ë¥¼ ì§ì ‘ ê±¸ì–´ì¤„ ìˆ˜ê°€ ìˆë‹¤.
ê±¸ê¸° ì „ì— ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ í˜„ì¬ ì¸ë±ìŠ¤ë¥¼ í™•ì¸í•´ ë³´ì•˜ë‹¤.

```sql
SHOW INDEX FROM selections;
```

![](https://velog.velcdn.com/images/hsh111366/post/0f970ac9-f0db-4975-b149-bd95c8fa64e7/image.png)

>** ê·¸ëŸ°ë° PK ì™¸ì˜ ëª¨ë“  FKë“¤ì—ë„ ì´ë¯¸ ì¸ë±ìŠ¤ê°€ ê±¸ë ¤ìˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.**

ì´ì— ëŒ€í•´ ì°¾ì•„ë³´ë‹ˆ MySQLì€ FKì— ëŒ€í•´ì„œë„ ìë™ìœ¼ë¡œ ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•´ ì¤€ë‹¤ê³  í•œë‹¤.
[ì°¸ê³  ë¸”ë¡œê·¸](https://dbknowledge.tistory.com/165)

ì•Œë‹¤ì‹œí”¼ ì¸ë±ìŠ¤ë¥¼ ì ì ˆí•˜ì§€ ì•Šê²Œ ê±¸ê²Œ ë˜ë©´ ì˜¤íˆë ¤ ì„±ëŠ¥ì„ ì•…í™”ì‹œí‚¬ ìˆ˜ê°€ ìˆë‹¤. FKë¥¼ ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì˜ë„ì¹˜ ì•Šê²Œ ì´ëŸ¬í•œ ê²½ìš°ê°€ ë°œìƒí•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

> ğŸ§‘ğŸ»â€ğŸ’» FKë¥¼ ì“°ì§€ ì•Šì•„ì•¼ í•œë‹¤ëŠ” ì˜ê²¬ë„ ë§ì´ ì¡´ì¬í•œë‹¤. ì•„ë§ˆ ì´ëŸ¬í•œ ë¶€ë¶„ë“¤ê³¼ ë”ë¶ˆì–´ ì œì•½ì¡°ê±´ìœ¼ë¡œ ì¸í•´ì„œ ì œì–´í•˜ê¸° ì–´ë ¤ìš´ ìƒí™©ì´ ë°œìƒí•˜ëŠ” ê²ƒ ë•Œë¬¸ì¸ ë“¯ í•˜ë‹¤. 
ë‚˜ëŠ” ì•„ì§ê¹Œì§€ëŠ” FKë¥¼ ê³„ì†í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, **ì¶”í›„ ê³µë¶€ë¥¼ í•œ í›„ ë°©í–¥ì„±ì„ ì •í•´ë´ì•¼ê² ë‹¤!**

## âœ… í•´ê²° ë°©ì•ˆ 2 : schedules í…Œì´ë¸”ì— ì¸ë±ìŠ¤ ê±¸ê¸°

![](https://velog.velcdn.com/images/hsh111366/post/2b18232b-d2e1-4b94-91ff-abdd71413448/image.png)

ìŠ¤ì¼€ì¤„ í…Œì´ë¸”ì˜ ê²½ìš°ì—ëŠ” ì´ë²¤íŠ¸ê°€ ìƒì„±ë¨ì— ë”°ë¼ì„œ, INSERT ì‘ì—…ì´ ì´ë£¨ì–´ì§„ë‹¤.
ì´í›„ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì •í•¨ì— ë”°ë¼ì„œ INSERT or DELETE ì‘ì—…ì´ ë°œìƒí•  ì—¬ì§€ê°€ ìˆì§€ë§Œ, SELECTì— ë¹„í•´ ë¹ˆë„ëŠ” ë§¤ìš° ì ì€ í¸ì´ë‹¤.

ë•Œë¬¸ì— FKë¥¼ ì œì™¸í•œ `1) date 2) day 3) time` ì„ ëŒ€ìƒìœ¼ë¡œ ì¸ë±ìŠ¤ë¥¼ ê±¸ê¸°ë¡œ ê²°ì •í–ˆë‹¤.

```sql
CREATE INDEX idx_schedules_date ON schedules(date);
CREATE INDEX idx_schedules_day ON schedules(day);
CREATE INDEX idx_schedules_time ON schedules(time);
```

í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ìœ ì˜ë¯¸í•œ ê²°ê³¼ëŠ” ì–»ì§€ ëª»í•˜ì˜€ë‹¤. ë‚˜ëŠ” ê·¸ ì´ìœ ë¡œ í•´ë‹¹ ì„¸ ì»¬ëŸ¼ì˜ ì¹´ë””ë„ë¦¬í‹°ê°€ ë‚®ê¸° ë•Œë¬¸ì´ë¼ê³  íŒë‹¨í–ˆë‹¤.

![](https://velog.velcdn.com/images/hsh111366/post/4376b428-7d8e-443d-b204-9ddd51ef6e2a/image.png)

ê°ê° 178, 7, 49ë¡œ ê³ ìœ í•œ ë°ì´í„°ë“¤ì˜ ê°œìˆ˜ê°€ ì ì€ í¸ì´ë©°, ê·¸ë ‡ê²Œ ëœë‹¤ë©´ DB ì˜µí‹°ë§ˆì´ì €ê°€ `ì¸ë±ìŠ¤ë¥¼ ì•ˆ íƒ€ëŠ” ê²ƒì´ ë” ë¹ ë¥´ê² ëŠ”ë°?`ë¼ëŠ” íŒë‹¨ì„ í•  ê°€ëŠ¥ì„±ì´ ë†’ì•„ì§„ë‹¤.

ì¸ë±ìŠ¤ë¥¼ ìƒì„±í–ˆëŠ”ë° ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì´ëŠ” ì˜¤íˆë ¤ ë¶ˆí•„ìš”í•œ ì €ì¥ ê³µê°„ ì†Œëª¨ ë° ì“°ê¸° ì—°ì‚° ì‹œ ì„±ëŠ¥ ì €í•˜ë¥¼ ì•¼ê¸°í•  ìˆ˜ë„ ìˆë‹¤.

### ë³µí•© ì¸ë±ìŠ¤ ì‚¬ìš©

ê·¸ë ‡ë‹¤ë©´ ë‹¨ì¼ì´ ì•„ë‹ˆë¼ ë³µí•© ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

ì¡°íšŒë¥¼ í•  ë•Œ `date + time / day + time` ì˜ ì¡°í•©ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì— ë³µí•© ì¸ë±ìŠ¤ë¥¼ ê±¸ì–´ë³´ì•˜ë‹¤.

```sql
CREATE INDEX idx_schedules_date_time ON schedules(date, time);
CREATE INDEX idx_schedules_day_time ON schedules(day, time);
```

í•˜ì§€ë§Œ ì—¬ê¸°ì„œë„ ìœ ì˜ë¯¸í•œ ì„±ëŠ¥ ê°œì„ ì„ í•˜ì§€ëŠ” ëª» í•˜ì˜€ë‹¤.

```sql
EXPLAIN SELECT * FROM schedules
        WHERE date = '2025.05.13' AND time = '09:00';
EXPLAIN SELECT * FROM schedules FORCE INDEX (idx_schedules_date_time)
        WHERE date = '2025.05.13' AND time = '09:00';
```

ìœ„ì²˜ëŸ¼ DB ì˜µí‹°ë§ˆì´ì €ì˜ íŒë‹¨ vs ê°•ì œ ì¸ë±ìŠ¤ ì‚¬ìš© í…ŒìŠ¤íŠ¸ë„ ì§„í–‰í•´ë³´ì•˜ëŠ”ë°, `date + time`ì˜ ê²½ìš°ì—ëŠ” ì¸ë±ìŠ¤ ì‚¬ìš©ì´ ìš°ì„¸í•œ ê²½ìš°ê°€ ìˆì—ˆìœ¼ë‚˜ ëŒ€ì²´ë¡œ í° ì˜ë¯¸ëŠ” ì—†ì—ˆë‹¤.

> ğŸ§‘ğŸ»â€ğŸ’» ë¯¸ë¯¸í•œ íš¨ê³¼ ë•Œë¬¸ì— ì¸ë±ìŠ¤ë¥¼ ê±¸ê¸°ì—ëŠ”, **ê·¸ë¡œ ì¸í•œ ì‚¬ì´ë“œ ì´í™íŠ¸ì˜ ë¦¬ìŠ¤í¬ê°€ ë” í´ ê²ƒì´ë¼ëŠ” ìƒê°ì´ ë“¤ì–´ schedules í…Œì´ë¸”ì—ì„œë„ ì¸ë±ìŠ¤ëŠ” ê±¸ì§€ ì•Šê¸°ë¡œ ê²°ì •í•˜ì˜€ë‹¤.**


---

# ğŸ ë§ˆë¬´ë¦¬

ì§€ì‹ì˜ í•œê³„ë¥¼ ëŠë¼ê³ , ì¡°ê¸ˆ ë” í•™ìŠµì„ í•œ í›„ì— ì„±ëŠ¥ ê°œì„ ì„ ë” í•´ë³´ì•„ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´ ì—¬ê¸°ì„œ ê¸€ì„ ë§ˆë¬´ë¦¬í•˜ë ¤ê³  í•œë‹¤.

## ğŸƒğŸ» ì•ìœ¼ë¡œ í•´ë³¼ ê²ƒë“¤

1. DTO Projection
2. Query DSL
3. ìºì‹±
4. ì •ê·œí™” / ë¹„ì •ê·œí™” ê³ ë ¤


## ğŸ’¡ ëŠë‚€ ì  ë° ë°°ìš´ ì 

1. í…ŒìŠ¤íŠ¸ ìƒìœ¼ë¡œ `18.32s -> 0.35` ì¦‰ 98%ì˜ ì„±ëŠ¥ ê°œì„ ì„ í•  ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ ì´ëŠ” N+1 ë¬¸ì œë¥¼ í•´ê²°í•¨ìœ¼ë¡œì¨ ë¹„êµì  ì‰½ê²Œ ì–»ì–´ë‚¸ ê²°ê³¼ì´ë¯€ë¡œ, ì•ìœ¼ë¡œ ë‹¤ë¥¸ ë¶€ë¶„ì„ ë” ì ìš©í•´ ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´ ë” ì»¤ì¡Œë‹¤.
2. ì„±ëŠ¥ ê°œì„ ì„ ì œëŒ€ë¡œ ë„ì „í•´ ë³¸ ê²ƒì€ ì²˜ìŒì´ì—ˆëŠ”ë° ìƒê°ë³´ë‹¤ ì¬ë¯¸ìˆì—ˆë‹¤. DBëŠ” ê³µë¶€í• ìˆ˜ë¡ ìœ ì € ì‚¬ìš©ì„±ì— ê¸ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ì¢‹ì€ ê²ƒ ê°™ë‹¤.
3. DB ì¸ë±ìŠ¤ì— ëŒ€í•´ ê³µë¶€ë¥¼ í•˜ê³  ì ìš©ì„ í•´ ë³´ë‹ˆ ì¢€ ë” ì´í•´ & íŒë‹¨ì´ ì˜ ë˜ì—ˆë˜ ê²ƒ ê°™ë‹¤. ê·¸ë ‡ì§€ ì•Šì•˜ë‹¤ë©´ ë¬´ë¶„ë³„í•˜ê²Œ ì¸ë±ìŠ¤ë¥¼ ì ìš©í–ˆì„ ë“¯í•˜ë‹¤.
