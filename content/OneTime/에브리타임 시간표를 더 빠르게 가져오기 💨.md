---
date: 2025-03-20
tags:
  - onetime
  - backend
  - side-project
  - perf
---

---

# â° OneTime?

> **ì›íƒ€ì„ì— ëŒ€í•´ì„œ ê¶ê¸ˆí•˜ë‹¤ë©´ ì•„ë˜ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”!**
> 

[â° OneTime ì„œë¹„ìŠ¤ ë°”ë¡œê°€ê¸°](https://www.onetime-with-members.com/)
[ğŸ“ OneTime ì†Œê°œê¸€](https://velog.io/@hsh111366/%EB%A7%81%ED%81%AC-%EA%B3%B5%EC%9C%A0-%ED%95%9C-%EB%B2%88%EC%9C%BC%EB%A1%9C-%EC%97%AC%EB%9F%AC-%EC%82%AC%EB%9E%8C%EA%B3%BC-%EC%89%BD%EA%B2%8C-%EC%9D%BC%EC%A0%95%EC%9D%84-%EB%A7%9E%EC%B6%94%EC%84%B8%EC%9A%94-OneTime)
[ğŸ§‘ğŸ»â€ğŸ’» GitHub](https://github.com/onetime-with-members)
[ğŸ“¸ Instagram](https://www.instagram.com/one.time.official/)

---

# ğŸ¬ ì„œë¡ 

ì›íƒ€ì„ì˜ ì‹ ê¸°ëŠ¥, ì—ë¸Œë¦¬íƒ€ì„ ì—°ë™ ê¸°ëŠ¥ êµ¬í˜„ê³¼ì •ì„ ì •ë¦¬í–ˆë˜ [ì´ì „ ê¸€](https://velog.io/@hsh111366/OneTime-ì—ë¸Œë¦¬íƒ€ì„-ì‹œê°„í‘œë¥¼-ì›íƒ€ì„ìœ¼ë¡œ-ê°€ì ¸ì™€ë³´ì)ì— ì´ì–´ì„œ 
êµ¬í˜„ ê³¼ì •ì—ì„œ ë°œìƒí•œ `íŠ¸ëŸ¬ë¸” ìŠˆíŒ… & ì„±ëŠ¥ ê°œì„  ê³¼ì •`ì— ëŒ€í•´ì„œë„ ì ì–´ë³´ë ¤ê³  í•œë‹¤!

![](https://velog.velcdn.com/images/hsh111366/post/49ac8646-b8ab-447f-9de8-c8423a3f91c9/image.png)

ê°ì‚¬í•˜ê²Œë„ ì´ì „ ê¸€ì´ ë°˜ì‘ì´ ì¢‹ì•„ íŠ¸ë Œë”©ì—ë„ ì˜¬ë¼ê°”ë‹¤ ã…ã…
ì´ë²ˆ ê¸€ë„ ì¬ë¯¸ìˆê²Œ ì½ì–´ ì£¼ì…¨ìœ¼ë©´ ì¢‹ê² ë‹¤ ğŸ™ğŸ»

---

# ğŸ‹ğŸ» ë¶€í•˜ í…ŒìŠ¤íŠ¸

## ë¶€í•˜ í…ŒìŠ¤íŠ¸ë¥¼ 'ì™œ' í–ˆëŠ”ê°€

ì‚¬ì‹¤ ë¶€ë„ëŸ½ê²Œë„ ì´ë²ˆì— ì²˜ìŒìœ¼ë¡œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê²Œ ë˜ì—ˆë‹¤ ğŸ˜‚
ê³¼ì •ì—ì„œ ì–»ì€ ê²ƒì´ êµ‰ì¥íˆ ë§ì•˜ê¸°ì—, ì•ìœ¼ë¡œë„ ì„±ì¥ê³¼ ì„œë¹„ìŠ¤ì˜ ì•ˆì •ì„±ì„ ìœ„í•´ í…ŒìŠ¤íŠ¸ë¥¼ í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

ìš°ì„ ì€ ë¶€í•˜ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê²Œ ëœ ì´ìœ ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

> 1. ì´ˆê¸° êµ¬í˜„ ë•ŒëŠ” í•˜ë‚˜ì˜ ìš”ì²­ ë‹¹ ì²˜ë¦¬ ì†ë„ê°€ 3~4ì´ˆ ë‚¨ì§“ì´ì—ˆìŒ -> êµ‰ì¥íˆ ê¸º
2. ê¸°ëŠ¥ ë°°í¬ì™€ ë™ì‹œì— ì´ë²¤íŠ¸ë¥¼ í•¨ê»˜ ì§„í–‰í•˜ê¸°ì— íŠ¸ë˜í”½ì´ ëª°ë¦´ ìš°ë ¤ê°€ ìˆìŒ -> í¬ë¡¤ë§ ì„œë²„ê°€ ë‹¤ìš´ëœë‹¤ë©´ ì¹˜ëª…ì ì„

## í…ŒìŠ¤íŠ¸ ì´ì „ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ğŸ”«

> ğŸ§‘ğŸ»â€ğŸ’» ì‘ì„±ì— ì•ì„œ ì²¨ì–¸í•˜ìë©´, ë¶€í•˜ í…ŒìŠ¤íŠ¸ë¥¼ ì²˜ìŒ í•´ë³´ê¸° ë•Œë¬¸ì— ì ì ˆí•˜ê²Œ ì§„í–‰í•œ ê²ƒì¸ì§€ì—ëŠ” ì•„ì§ ì˜ë¬¸ì´ ë“ ë‹¤..! ë˜í•œ í…ŒìŠ¤íŠ¸ ê³¼ì • ì¤‘ì—ì„œë„ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ í•œ ë‚´ì—­ì´ ìˆê¸°ì— ê°™ì´ ì •ë¦¬í•˜ê³ ì í•œë‹¤. 

### âš™ï¸ í…ŒìŠ¤íŠ¸ í™˜ê²½

- **ì„œë²„**: AWS EC2 (Ubuntu) t2.micro
- **Flask + Selenium ê¸°ë°˜ í¬ë¡¤ë§ API**
- **ë¶€í•˜ í…ŒìŠ¤íŠ¸ ë„êµ¬**: `wrk`

### 1ï¸âƒ£ ì´ˆê¸° ì„¤ì • ë° ë¬¸ì œ ë°œìƒ

ì›íƒ€ì„ì˜ í¬ë¡¤ë§ ì„œë²„ëŠ”, EC2 ì„œë²„ì—ì„œ `Flask`ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰í•˜ê³ , ë‚´ë¶€ì—ì„œ `Selenium`ì„ ì´ìš©í•´ í¬ë¡¤ë§í•˜ëŠ” êµ¬ì¡°ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

`wrk` ë¼ëŠ” íˆ´ì„ ì‚¬ìš©í•´ ë¶€í•˜ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë ¤ í–ˆìœ¼ë‚˜, ì²˜ìŒ `wrk -t10 -c100 -d30s`ì„ ì‹¤í–‰í–ˆì„ ë•Œë¶€í„° ì„œë²„ê°€ ì¦‰ì‹œ ë©ˆì¶”ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.

### 2ï¸âƒ£ ì„œë²„ ì ‘ì† ë¶ˆê°€ í˜„ìƒ

ë‹¤ì‹œ ssh ì ‘ì† ì‹œë„ ì‹œ, `Connection refused` ë¼ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.

AWS EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ê³¼ë¶€í•˜ë¡œ ë‹¤ìš´ë˜ê±°ë‚˜, OOM(Out of Memory) Killë¡œ ì¸í•´ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œëœ ê²ƒìœ¼ë¡œ ì¶”ì •í–ˆê³ , ì¬ë¶€íŒ… í›„ ë‹¤ì‹œ `wrk` ë¶€í•˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ì ì§„ì ìœ¼ë¡œ ë¶€í•˜ë¥¼ ì˜¬ë ¤ë³´ê¸°ë¡œ ê²°ì •í–ˆë‹¤.

> ğŸ” ë‹¹ì‹œì—ëŠ” ë„ˆë¬´ ë§ì€ ìš”ì²­ì„ ë™ì‹œì— ë³´ëƒ„ìœ¼ë¡œì¨ ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆë‹¤ê³  íŒë‹¨í–ˆë‹¤!

### 3ï¸âƒ£ ì ì§„ì  ë¶€í•˜ í…ŒìŠ¤íŠ¸

ì ì§„ì ìœ¼ë¡œ ë¶€í•˜ë¥¼ ì˜¬ë¦¬ê¸°ë¡œ ê²°ì •í•˜ê³ , ì•„ë˜ì™€ ê°™ì´ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í–ˆì§€ë§Œ ë˜ ë‹¤ì‹œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.

- `wrk -t2 -c5 -d10s` â†’ ìš”ì²­ì´ ì¼ë¶€ ì •ìƒì ìœ¼ë¡œ ê°€ì§€ë§Œ, ë¡œê·¸ì—ëŠ” 4ê°œì”©ë§Œ ì°í˜.
- `wrk -t2 -c5 -d30s` â†’ ì‘ë‹µ ì†ë„ê°€ ë„ˆë¬´ ëŠë¦¬ê³  **í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³„ì† ë‚¨ì•„ìˆëŠ” ë¬¸ì œ ë°œìƒ**

### 4ï¸âƒ£ í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ì§€ ì•ŠëŠ” ë¬¸ì œ

> ğŸ” ì²˜ìŒ ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆì„ ë•Œ, í¬ë¡¬ ë“œë¼ì´ë²„ì™€ ê´€ë ¨í•œ ì—ëŸ¬ ë¡œê·¸ë¥¼ ë³´ì•˜ì—ˆë‹¤. 
ë‹¹ì‹œì—ëŠ” ëŒ€ìˆ˜ë¡­ì§€ ì•Šê²Œ ì—¬ê²¼ì§€ë§Œ, `í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³„ì†í•´ì„œ ìŒ“ì´ëŠ” ê²ƒ`ì„ í™•ì¸í•˜ë‹ˆ í•´ë‹¹ ë¶€ë¶„ì´ ë¬¸ì œì¼ ê²ƒì´ë¼ëŠ” íŒë‹¨ì´ ë“¤ì—ˆë‹¤!

`ps aux | grep chrome | wc -l` ëª…ë ¹ì–´ë¡œ í™•ì¸í•´ë³´ë‹ˆ, í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³„ì† ë‚¨ì•„ ìˆëŠ” ê²ƒì„ ë³´ì•˜ë‹¤. ë§ì´ ìŒ“ì´ê²Œ ë˜ë©´ ì•½ 1,000ê°œ ê°€ëŸ‰ì´ ìŒ“ì˜€ë‹¤.

ê·¸ë ‡ê¸°ì— `Selenium`ì—ì„œ í¬ë¡¤ë§ ì¢…ë£Œ ì‹œ `driver.quit()`ì„ ìˆ˜í–‰í•˜ë„ë¡ ë³€ê²½í•˜ì˜€ì§€ë§Œ -> ì—¬ì „íˆ ë¬¸ì œê°€ í•´ê²°ë˜ì§€ ì•Šì•˜ë‹¤.

### 5ï¸âƒ£ í•´ê²° ì‹œë„ ë° ì½”ë“œ ìˆ˜ì •

- `finally` ë¸”ë¡ì„ í™œìš©í•´ `driver.quit()`ì´ ë°˜ë“œì‹œ ì‹¤í–‰ë˜ë„ë¡ ìˆ˜ì •
- `psutil`ì„ í™œìš©í•´ í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°•ì œ ì¢…ë£Œí•˜ëŠ” ì½”ë“œ ì¶”ê°€

> ğŸ” ìœ„ì™€ ê°™ì€ ë°©ë²•ë“¤ì„ ì‹œë„í•˜ë©´ì„œ, `ì–´ë–»ê²Œ í•˜ë©´ ì‚¬ìš©í•œ í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œê±°í•  ìˆ˜ ìˆì„ê¹Œ?` ì— ëŒ€í•œ ê³ ë¯¼ì´ ì´ì–´ì¡Œë‹¤.
ê·¸ë ‡ê²Œ ì—¬ëŸ¬ ë¸”ë¡œê·¸ë„ ë’¤ì ¸ ë³´ê³  ì§€í”¼í‹°ì—ê²Œë„ ë¬¼ì–´ë³´ë©° ì‚¬íˆ¬ë¥¼ í•œ ê²°ê³¼, `ì•„ë˜ì˜ ë‹µ`ì„ ì°¾ì„ ìˆ˜ ìˆì—ˆë‹¤.

### 6ï¸âƒ£ Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ `--init` ì˜µì…˜ ì¶”ê°€ âœ…

ë‹µì€ ë°”ë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ `--init` ì˜µì…˜ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ì—ˆë‹¤.


```
sudo docker run -d --init --name {ì»¨í…Œì´ë„ˆ ëª…} -p {port}:{port} {ì´ë¯¸ì§€ëª…:ë²„ì „}
```

ìœ„ì²˜ëŸ¼ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ ë•Œ í•´ë‹¹ ì˜µì…˜ì„ ë¶™ì—¬ì£¼ë©´, ìë™ìœ¼ë¡œ ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œê±°í•´ì¤€ë‹¤ê³  í•œë‹¤!

ê·¸ë ‡ê²Œ ë§Œë“¤ê³  ë‚˜ë‹ˆ..

![](https://velog.velcdn.com/images/hsh111366/post/b2deb8b5-3836-4bdf-b195-c78a7476547e/image.jpeg)

ì´ë ‡ê²Œ ì“°ì„ì´ ë‹¤ í•œ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì•Œì•„ì„œ ì œê±°ë˜ì–´ ê´€ë¦¬ë˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤!

> ğŸ’¡ ë„ì»¤ë¥¼ ì“°ë©´ì„œ `--init` ì˜µì…˜ì„ ì¨ ë³¸ ê²ƒì€ ì²˜ìŒì´ì—ˆëŠ”ë° ì•Œê²Œ ë˜ì–´ ì¢‹ì•˜ë‹¤ ğŸ˜„

ë“œë””ì–´ ì´ì œ ë‹¤ì‹œ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì´ ë˜ì—ˆë‹¤.

## ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì§„í–‰

### ğŸ“Œ í…ŒìŠ¤íŠ¸ ì§„í–‰ ë‚´ì—­ ë° ê²°ê³¼ ë¶„ì„

| **í…ŒìŠ¤íŠ¸ ì¡°ê±´** | **ìš”ì²­ ìˆ˜ (**wrk**)** | **í‰ê·  ì‘ë‹µ ì‹œê°„** | **ì´ˆë‹¹ ì²˜ë¦¬ëŸ‰ (**Req/Sec**)** | **CPU ì‚¬ìš©ë¥ ** | **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰** |
| --- | --- | --- | --- | --- | --- |
| **10ëª… ë™ì‹œ ìš”ì²­ (-c10)** | 30ì´ˆ | 9.57ì´ˆ | 1.00 | 10% | 520MB |
| **20ëª… ë™ì‹œ ìš”ì²­ (-c20)** | 30ì´ˆ | 23.73ì´ˆ | 0.66 | 10% | 510MB |
| **30ëª… ë™ì‹œ ìš”ì²­ (-c30)** | 30ì´ˆ | 28.99ì´ˆ | 1.00 | 0% | 510MB |
| **50ëª… ë™ì‹œ ìš”ì²­ (-c50)** | 30ì´ˆ | ìš”ì²­ ì‹¤íŒ¨ | 0.00 | 0% | 510MB |
| **50ëª… ë™ì‹œ ìš”ì²­ (-c50) + 60ì´ˆ í…ŒìŠ¤íŠ¸** | 60ì´ˆ | 49.35ì´ˆ | 0.83 | 0% | 510MB |
| **100ëª… ë™ì‹œ ìš”ì²­ (-c100) + 120ì´ˆ í…ŒìŠ¤íŠ¸** | 120ì´ˆ | 1.69ë¶„ | 0.84 | 0% | 510MB |


ì—¬ê¸°ì„œ ì•Œê²Œ ëœ ë¬¸ì œì ì€ ì•„ë˜ 2ê°€ì§€ì˜€ë‹¤.

> ğŸš¨ **ì„±ëŠ¥ ë¬¸ì œ**
1. ê¸€ ì´ˆë°˜ë¶€ì— ë§í•œ ê²ƒì²˜ëŸ¼ ì‹œê°„í‘œ ì¶”ì¶œì„ í•  ë•Œë§ˆë‹¤ **ì•½ 4ì´ˆ ì •ë„ê°€ ì†Œìš”**ë˜ì—ˆë‹¤. ìœ ì € ì…ì¥ì—ì„œ 4ì´ˆë‚˜ ê¸°ë‹¤ë¦¬ê²Œ ë˜ëŠ” ê²ƒì€ ì‚¬ìš©ì„±ì„ í•´ì¹  ìˆ˜ ìˆë‹¤.
2. í‰ê·  ì‘ë‹µ ì‹œê°„ì„ ë³´ë©´, ìš”ì²­ ìˆ˜ì— ë”°ë¼ ê³„ì†í•´ì„œ ì¦ê°€í•œë‹¤. ì´ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

ê²°ë¡ ë¶€í„° ë§í•˜ë©´ 2ë²ˆ ë¹„ë™ê¸° ì²˜ë¦¬ê¹Œì§€ëŠ” êµ¬í˜„í•˜ì§€ ëª» í–ˆë‹¤..! Flaskê°€ ì•„ë‹Œ Fast APIê°€ ë¹„ë™ê¸° ì²˜ë¦¬ì— íŠ¹í™”ë˜ì–´ ìˆë‹¤ê³ ëŠ” í•˜ëŠ”ë° ë„ì…ì„ í•˜ë˜ ì¤‘ ì‹œê°„ì´ ë„ˆë¬´ ë¶€ì¡±í•´ ì œëŒ€ë¡œ êµ¬í˜„í•˜ì§€ ëª» í–ˆë‹¤. 
ì´ ë¶€ë¶„ì€ ë‹¤ìŒì— ë‹¤ì‹œ ë„ì „í•´ë³´ì•„ì•¼ í•  ë“¯í•˜ë‹¤ ğŸ˜‚

ê·¸ë˜ë„ 1ë²ˆì€ ê½¤ë‚˜ í•´ê²°ì´ ë˜ì—ˆëŠ”ë°, ì´ëŠ” ì•„ë˜ ë‚´ìš©ì—ì„œ ì´ì–´ì§„ë‹¤.

---

# ğŸš€ ì„±ëŠ¥ ê°œì„ 

## ë¬¸ì œ ë° ì›ì¸ íŒŒì•…

ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ë¶„ì„í•´ ë³´ë©´, ì„œë²„ì˜ CPU ì‚¬ìš©ë¥ ì€ ìƒëŒ€ì ìœ¼ë¡œ ë‚®ì•˜ì§€ë§Œ ìš”ì²­ì´ ëª°ë¦´ ë•Œ **ì‘ë‹µ ì‹œê°„ì´ ê¸‰ê²©íˆ ì¦ê°€**í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.

ì´ëŸ¬í•œ í˜„ìƒì˜ ì£¼ìš” ì›ì¸ì€ `Selenium WebDriver`ì˜ ì‹¤í–‰ ë¹„ìš©ì´ í¬ê¸° ë•Œë¬¸ì´ë¼ê³  íŒë‹¨í–ˆë‹¤.
ì¦‰, ê¸°ì¡´ì—ëŠ” í¬ë¡¤ë§ì„ ìˆ˜í–‰í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ `WebDriver` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì¢…ë£Œí•˜ëŠ”ë°, ì´ ê³¼ì •ì—ì„œ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ì†Œëª¨ê°€ ë°œìƒí•œë‹¤ê³  ë³´ì•˜ë‹¤.

## í•´ê²° ë°©ì•ˆ âœ…

> í•´ê²° ë°©ì•ˆì€ ìƒê°ë³´ë‹¤ ê°„ë‹¨í–ˆë‹¤. **WebDriver ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬ì‚¬ìš©(WebDriver í’€ë§)í•˜ëŠ” ë°©ì‹**ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤!

### ê¸°ì¡´

#### ê¸°ì¡´ ì½”ë“œ

```python
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import re
import math
from collections import defaultdict

def crawl_schedule(url):
    # âœ… Chrome WebDriver ì˜µì…˜ ì„¤ì •
    chrome_options = Options()
    chrome_options.add_argument("--disable-gpu")
    chrome_options.add_argument("--window-size=1920x1080")
    chrome_options.add_argument("--no-sandbox")
    chrome_options.add_argument("--disable-dev-shm-usage")
    chrome_options.add_argument("--headless")  # ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
    chrome_options.add_argument("user-agent=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36")

    # âœ… WebDriver ì‹¤í–‰
    driver = webdriver.Chrome(options=chrome_options)
    driver.get(url)

    # âœ… í˜ì´ì§€ê°€ ì™„ì „íˆ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
    try:
        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.CLASS_NAME, "tablebody")))
    except:
        driver.quit()
        return {"code": "400", "message": "í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", "is_success": False}

    # âœ… `tablehead` ì°¾ê¸° (ìš”ì¼ ì¶”ì¶œ)
    try:
        tablehead = driver.find_element(By.CLASS_NAME, "tablehead")
        days = [td.text.strip() for td in tablehead.find_elements(By.TAG_NAME, "td") if td.text.strip()]
    except:
        driver.quit()
        return {"code": "400", "message": "ìš”ì¼ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", "is_success": False}

    # âœ… `tablebody` ì°¾ê¸° (ì‹œê°„í‘œ ë¸”ë¡ë“¤ ê°€ì ¸ì˜¤ê¸°)
    try:
        tablebody = driver.find_element(By.CLASS_NAME, "tablebody")
        subjects = tablebody.find_elements(By.CLASS_NAME, "subject")
    except:
        driver.quit()
        return {"code": "400", "message": "ì‹œê°„í‘œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", "is_success": False}

    # âœ… ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ ì €ì¥ìš©
    schedules = defaultdict(list)

    # âœ… ë¸”ë¡ ì •ë³´ ë¶„ì„
    for subject in subjects:
        style = subject.get_attribute("style")

        # â³ height, top ê°’ ì¶”ì¶œ
        height_match = re.search(r'height:\s*(\d+)px', style)
        top_match = re.search(r'top:\s*(\d+)px', style)

        if not height_match or not top_match:
            continue

        height = int(height_match.group(1))
        top = int(top_match.group(1))

        # **ì‹œì‘ ì‹œê°„ ê³„ì‚°**
        start_total_minutes = ((top - 450) // 25) * 30
        start_hour = 9 + (start_total_minutes // 60)
        start_minute = start_total_minutes % 60

        # **ì¢…ë£Œ ì‹œê°„ ê³„ì‚°**
        duration_total_minutes = math.ceil((height - 1) / 25) * 30
        end_total_minutes = start_total_minutes + duration_total_minutes
        end_hour = 9 + (end_total_minutes // 60)
        end_minute = end_total_minutes % 60

        # â³ ë³€í™˜ ì™„ë£Œ
        start_time = f"{int(start_hour):02}:{int(start_minute):02}"
        end_time = f"{int(end_hour):02}:{int(end_minute):02}"

        # ğŸ“Œ **ìš”ì¼ ì°¾ê¸°**
        parent_td = subject.find_element(By.XPATH, "./ancestor::td")
        td_index = list(parent_td.find_element(By.XPATH, "./ancestor::tr").find_elements(By.TAG_NAME, "td")).index(parent_td)
        day = days[td_index] if td_index < len(days) else "ì•Œ ìˆ˜ ì—†ìŒ"

        schedules[day].append((start_time, end_time))

    driver.quit()

    # âœ… **ì‹œê°„ ì •ì œ: ì—°ì†ëœ ì‹œê°„ í•©ì¹˜ê¸° & 30ë¶„ ë‹¨ìœ„ ë³€í™˜**
    final_schedules = []
    for day, times in schedules.items():
        times.sort()
        merged_times = set()

        for start, end in times:
            start_h, start_m = map(int, start.split(":"))
            end_h, end_m = map(int, end.split(":"))

            current_h, current_m = start_h, start_m
            while (current_h, current_m) < (end_h, end_m):
                merged_times.add(f"{current_h:02}:{current_m:02}")
                current_m += 30
                if current_m >= 60:
                    current_h += 1
                    current_m = 0

        sorted_times = sorted(merged_times)

        final_schedules.append({
            "time_point": day,
            "times": sorted_times
        })

    return {
        "code": "200",
        "message": "ìœ ì € ê³ ì • ìŠ¤ì¼€ì¤„ ì¡°íšŒì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.",
        "payload": {
            "schedules": final_schedules
        },
        "is_success": True
    }

```

> ğŸ‘ğŸ» **ê¸°ì¡´ ë°©ì‹**
- ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ webdriver.Chrome()ì„ ìƒˆë¡œ ìƒì„±
- ìš”ì²­ì´ ëë‚˜ë©´ WebDriverë¥¼ ì¢…ë£Œ
- ë™ì‹œ ìš”ì²­ì´ ë§ì•„ì§ˆ ê²½ìš° í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³„ì† ìƒì„±ë˜ê³  ì¢…ë£Œë˜ë©´ì„œ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒ
- ê²°ê³¼ì ìœ¼ë¡œ ì‘ë‹µ ì‹œê°„ì´ ë¶ˆí•„ìš”í•˜ê²Œ ê¸¸ì–´ì§
    
### ë³€ê²½
    
#### ë³€ê²½ ì½”ë“œ

```python
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import re
import math
import os
import psutil
from collections import defaultdict
from threading import Lock

# âœ… WebDriver ì „ì—­ ì¸ìŠ¤í„´ìŠ¤ & ë½ ì„¤ì • (ë©€í‹°ì“°ë ˆë“œ ëŒ€ì‘)
driver = None
driver_lock = Lock()

def get_webdriver():
    """ì´ë¯¸ ì‹¤í–‰ëœ WebDriverë¥¼ ë°˜í™˜í•˜ê±°ë‚˜, ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±"""
    global driver
    with driver_lock:
        if driver is None:
            chrome_options = Options()
            chrome_options.add_argument("--disable-gpu")
            chrome_options.add_argument("--window-size=1920x1080")
            chrome_options.add_argument("--no-sandbox")
            chrome_options.add_argument("--disable-dev-shm-usage")
            chrome_options.add_argument("--headless")
            chrome_options.add_argument("user-agent=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36")

            service = Service("/usr/bin/chromedriver")
            driver = webdriver.Chrome(service=service, options=chrome_options)
        
        return driver

def crawl_schedule(url):
    # âœ… ê¸°ì¡´ ì‹¤í–‰ ì¤‘ì¸ WebDriverë¥¼ ì¬ì‚¬ìš©
    driver = get_webdriver()
    
    try:
        # âœ… ìš”ì²­í•œ URLë¡œ ì´ë™
        driver.get(url)

        # âœ… ê³µê°œë˜ì§€ ì•Šì€ ì‹œê°„í‘œ ê°ì§€ (ì¡´ì¬í•˜ë©´ ì¦‰ì‹œ 404 ë°˜í™˜)
        try:
            WebDriverWait(driver, 3).until(EC.presence_of_element_located((By.CLASS_NAME, "empty")))
            return {
                "code": "400",
                "message": "ê³µê°œë˜ì§€ ì•Šì€ ì‹œê°„í‘œì…ë‹ˆë‹¤.",
                "is_success": False
            }
        except Exception:
            pass  # ê³„ì† ì§„í–‰

        # âœ… íŠ¹ì • ìš”ì†Œê°€ ë¡œë“œë˜ë©´ ë°”ë¡œ í¬ë¡¤ë§ ì§„í–‰
        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.CLASS_NAME, "tablebody")))

        # âœ… `tablehead` ì°¾ê¸° (ìš”ì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°)
        tablehead = WebDriverWait(driver, 5).until(EC.presence_of_element_located((By.CLASS_NAME, "tablehead")))
        days = [td.text.strip() for td in tablehead.find_elements(By.TAG_NAME, "td") if td.text.strip()]

        # âœ… `tablebody` ì°¾ê¸° (ì‹œê°„í‘œ ë¸”ë¡ë“¤ ê°€ì ¸ì˜¤ê¸°)
        tablebody = WebDriverWait(driver, 5).until(EC.presence_of_element_located((By.CLASS_NAME, "tablebody")))
        subjects = tablebody.find_elements(By.CLASS_NAME, "subject")

        # âœ… ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ ì €ì¥ (ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ì €ì¥)
        schedules = defaultdict(list)

        # âœ… ë¸”ë¡ ì •ë³´ ë¶„ì„ (ìŠ¤íƒ€ì¼ ì†ì„±ì—ì„œ ì‹œê°„ ì •ë³´ ì¶”ì¶œ)
        for subject in subjects:
            style = subject.get_attribute("style")

            # â³ height, top ê°’ ì¶”ì¶œ (ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ ì‹œì‘/ì¢…ë£Œ ì‹œê°„ ê³„ì‚°)
            height_match = re.search(r'height:\s*(\d+)px', style)
            top_match = re.search(r'top:\s*(\d+)px', style)

            if not height_match or not top_match:
                continue

            height = int(height_match.group(1))  # ë¸”ë¡ ë†’ì´ (ìˆ˜ì—… ê¸¸ì´)
            top = int(top_match.group(1))  # ë¸”ë¡ ìœ„ì¹˜ (ì‹œì‘ ì‹œê°„)

            # âœ… ì‹œì‘ ì‹œê°„ ê³„ì‚° (í”½ì…€ â†’ ë¶„ ë‹¨ìœ„ ë³€í™˜)
            start_total_minutes = ((top - 450) // 25) * 30
            start_hour = 9 + (start_total_minutes // 60)
            start_minute = start_total_minutes % 60

            # âœ… ì¢…ë£Œ ì‹œê°„ ê³„ì‚° (ìˆ˜ì—… ê¸¸ì´ë¥¼ ë°˜ì˜)
            duration_total_minutes = math.ceil((height - 1) / 25) * 30
            end_total_minutes = start_total_minutes + duration_total_minutes
            end_hour = 9 + (end_total_minutes // 60)
            end_minute = end_total_minutes % 60

            # â³ ìµœì¢… ë³€í™˜ëœ ì‹œì‘/ì¢…ë£Œ ì‹œê°„
            start_time = f"{int(start_hour):02}:{int(start_minute):02}"
            end_time = f"{int(end_hour):02}:{int(end_minute):02}"

            # ğŸ“Œ ìš”ì¼ ì°¾ê¸° (í•´ë‹¹ ë¸”ë¡ì´ ìœ„ì¹˜í•œ ìš”ì¼ ì¶”ì¶œ)
            parent_td = subject.find_element(By.XPATH, "./ancestor::td")
            td_index = list(parent_td.find_element(By.XPATH, "./ancestor::tr").find_elements(By.TAG_NAME, "td")).index(parent_td)
            day = days[td_index] if td_index < len(days) else "ì•Œ ìˆ˜ ì—†ìŒ"

            # âœ… ìš”ì¼ë³„ ì‹œê°„ ì¶”ê°€
            schedules[day].append((start_time, end_time))

        # âœ… ì‹œê°„ ì •ì œ: ì—°ì†ëœ ì‹œê°„ í•©ì¹˜ê¸° & 30ë¶„ ë‹¨ìœ„ ë³€í™˜
        final_schedules = []
        for day, times in schedules.items():
            times.sort()
            merged_times = set()
            
            for start, end in times:
                start_h, start_m = map(int, start.split(":"))
                end_h, end_m = map(int, end.split(":"))

                current_h, current_m = start_h, start_m
                while (current_h, current_m) < (end_h, end_m):
                    merged_times.add(f"{current_h:02}:{current_m:02}")
                    current_m += 30
                    if current_m >= 60:
                        current_h += 1
                        current_m = 0

            sorted_times = sorted(merged_times)

            final_schedules.append({
                "time_point": day,
                "times": sorted_times
            })

        # âœ… ìµœì¢… JSON ë°˜í™˜
        return {
            "code": "200",
            "message": "ìœ ì € ê³ ì • ìŠ¤ì¼€ì¤„ ì¡°íšŒì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.",
            "payload": {
                "schedules": final_schedules
            },
            "is_success": True
        }

    except Exception as e:
        return {"code": "500", "message": f"ì„œë²„ ì˜¤ë¥˜: {str(e)}", "is_success": False}
    
```
    
> ğŸ‘ğŸ» **ê°œì„  ë°©ì‹** 
- WebDriver ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¯¸ë¦¬ í•˜ë‚˜ ìƒì„±í•œ í›„, ëª¨ë“  ìš”ì²­ì´ ì´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ë„ë¡ ë³€ê²½
- ë‹¤ì¤‘ ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ë™ê¸°í™”ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ Lockì„ ì ìš©
- WebDriverë¥¼ ì§€ì†ì ìœ¼ë¡œ ìœ ì§€í•˜ë©´ì„œ ë¶ˆí•„ìš”í•œ ìƒì„±/ì¢…ë£Œ ë¹„ìš©ì„ ì ˆê°

> ğŸŒˆ **ê¸°ëŒ€ íš¨ê³¼**
- ì²˜ë¦¬ ì†ë„ ê°œì„ 
- ì„œë²„ ì•ˆì •ì„± ì¦ê°€
- í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ì˜ ë¶ˆí•„ìš”í•œ ìƒì„±Â·ì¢…ë£Œê°€ ì¤„ì–´ë“¤ì–´ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ìµœì í™”
- í™•ì¥ì„± í–¥ìƒ
- ë™ì‹œ ìš”ì²­ì´ ë§ì•„ì ¸ë„ WebDriver ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•˜ë¯€ë¡œ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥

## ê²°ê³¼



ê²°ë¡ ì ìœ¼ë¡œ ì•½ 3~4ì´ˆê°€ ê±¸ë¦¬ë˜ í¬ë¡¤ë§ì´ **1ì´ˆ ë‚´ì™¸ë¡œ ë‹¨ì¶•**ë˜ì—ˆë‹¤!

![](https://velog.velcdn.com/images/hsh111366/post/7b6102a1-ae91-4fc7-b695-3157e4a23c75/image.gif)ê°œì„  ì´ì „|![](https://velog.velcdn.com/images/hsh111366/post/c02e7576-5ce7-4c07-81e5-b14ba525960a/image.gif)ê°œì„  ì´í›„
---|---|

ìœ„ ë‘ ê°€ì§€ë¥¼ ë¹„êµí•´ì„œ ë³´ì•„ë„ í™•ì‹¤íˆ ê°œì„  í›„ì— ì†ë„ê°€ ë¹¨ë¼ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤!

---

# ğŸ ë§ˆë¬´ë¦¬

ì´ë ‡ê²Œ ì›íƒ€ì„ ì‹ ê¸°ëŠ¥ì˜ ë¶€í•˜í…ŒìŠ¤íŠ¸ì™€ ì„±ëŠ¥ ê°œì„  ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ì•˜ë‹¤.

ì‹¤ì œë¡œ ìœ ì €ê°€ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì„ ì¡°ê¸ˆ ë” ì‚¬ìš©ì„± ì¢‹ê²Œ ë§Œë“¤ì—ˆë‹¤ëŠ” ë°ì— í° ì˜ì˜ë¥¼ ë‘ê³ , **ì•ìœ¼ë¡œ ì´ëŸ¬í•œ ë¶€ë¶„ë“¤ì„ ë” ì‹ ê²½ì“°ëŠ” ê°œë°œìê°€ ë  ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•´ì•¼ê² ë‹¤!**

> ğŸ‘‹ğŸ» ëª¨ë‘ë“¤ [OneTime](https://www.onetime-with-members.com/) ë§ì´ ì‚¬ìš©í•´ì£¼ì„¸ìš”!

![](https://velog.velcdn.com/images/hsh111366/post/f6d1b737-8432-4b1b-b610-d3dd603d9938/image.png)


[ğŸ ì´ë²¤íŠ¸ ì¸ìŠ¤íƒ€ê·¸ë¨ ê²Œì‹œë¬¼](https://www.instagram.com/p/DHBOlTSPmwl/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA==)
[ğŸ“¸ ì—ë¸Œë¦¬íƒ€ì„ ì—°ë™ ê¸°ëŠ¥ ì¸ìŠ¤íƒ€ê·¸ë¨ ê²Œì‹œë¬¼](https://www.instagram.com/p/DHBPGnkvnVH/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA==)


